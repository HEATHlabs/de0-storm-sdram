   1              		.file	"main.c"
   9              	.Ltext0:
  10              		.align	2
  11              		.global	io_read_gpio0_pin
  13              	io_read_gpio0_pin:
  14              	.LFB2:
  15              		.file 1 "../lib/io_driver.c"
   1:../lib/io_driver.c **** #include "io_driver.h"
   2:../lib/io_driver.c **** #include "storm_core.h"
   3:../lib/io_driver.c **** #include "storm_soc_basic.h"
   4:../lib/io_driver.c **** 
   5:../lib/io_driver.c **** // ################################################################################################
   6:../lib/io_driver.c **** // General Purpose IO (GENERAL_PURPOSE_CONTROLLER_0)
   7:../lib/io_driver.c **** // ################################################################################################
   8:../lib/io_driver.c **** 
   9:../lib/io_driver.c **** // ******************************************************************************
  10:../lib/io_driver.c **** // Read general purpose IO pin
  11:../lib/io_driver.c ****    unsigned long io_read_gpio0_pin(unsigned char pin)
  12:../lib/io_driver.c **** // ******************************************************************************
  13:../lib/io_driver.c **** {
  16              	 args = 0, pretend = 0, frame = 0
  17              		@ frame_needed = 0, uses_anonymous_args = 0
  18              		@ link register save eliminated.
  19              	.LVL0:
  20              		.loc 1 17 0
  14:../lib/io_driver.c **** ong _cmsr = get_cmsr();
  15:../lib/io_driver.c **** //	set_cmsr(_cmsr  | (1<<CMSR_IRQ) | (1<<CMSR_FIQ));
  16:../lib/io_driver.c **** 
  17:../lib/io_driver.c **** 		unsigned long temp = GPIO0_IN & (1<<pin);
  21              	r3, #61440
  22 0000 E3E03A0F 		ldr	r1, [r3, #-4091]
  23 0004 E5131FFB 		.loc 1 13 0
  24              		and	r2, r0, #255
  25 0008 E20020FF 		.loc 1 21 0
  18:../lib/io_driver.c **** 	set_cmsr(_cmsr);
  19:../lib/io_driver.c **** 	return temp;
  20:../lib/io_driver.c **** }
  21:../lib/io_driver.c **** 
  26              	r0, #1
  27 000c E3A00001 	.LVL1:
  28              		and	r0, r1, r0, asl r2
  29 0010 E0010210 		.loc 1 13 0
  30              		@ lr needed for prologue
  31              		.loc 1 21 0
  32              		mov	pc, lr
  33 0014 E1A0F00E 	.LFE2:
  35              		.align	2
  36              		.global	io_read_gpio0_port
  38              	io_read_gpio0_port:
  39              	.LFB3:
  40              		.loc 1 27 0
  22:../lib/io_driver.c **** *****************************************************************************
  23:../lib/io_driver.c **** // Read general purpose IO port
  24:../lib/io_driver.c ****    unsigned long io_read_gpio0_port(void)
  25:../lib/io_driver.c **** // ******************************************************************************
  26:../lib/io_driver.c **** {
  27:../lib/io_driver.c **** //	unsigned long _cmsr = get_cmsr();
  41              	etend = 0, frame = 0
  42              		@ frame_needed = 0, uses_anonymous_args = 0
  43              		@ link register save eliminated.
  44              		.loc 1 31 0
  28:../lib/io_driver.c **** _cmsr(_cmsr  | (1<<CMSR_IRQ) | (1<<CMSR_FIQ));
  29:../lib/io_driver.c **** 
  30:../lib/io_driver.c **** 		unsigned long temp = GPIO0_IN;
  31:../lib/io_driver.c **** 
  45              		r3, #61440
  46 0018 E3E03A0F 		ldr	r0, [r3, #-4091]
  47 001c E5130FFB 	.LVL2:
  48              		.loc 1 27 0
  49              		@ lr needed for prologue
  50              	.LVL3:
  51              		.loc 1 35 0
  32:../lib/io_driver.c **** et_cmsr(_cmsr);
  33:../lib/io_driver.c **** 	return temp;
  34:../lib/io_driver.c **** }
  35:../lib/io_driver.c **** 
  52              	, lr
  53 0020 E1A0F00E 	.LFE3:
  55              		.align	2
  56              		.global	io_set_gpio0_pin
  58              	io_set_gpio0_pin:
  59              	.LFB4:
  60              		.loc 1 41 0
  36:../lib/io_driver.c **** *****************************************************************************
  37:../lib/io_driver.c **** // Set general purpose IO port
  38:../lib/io_driver.c ****    void io_set_gpio0_pin(unsigned char pin)
  39:../lib/io_driver.c **** // ******************************************************************************
  40:../lib/io_driver.c **** {
  41:../lib/io_driver.c **** //	unsigned long _cmsr = get_cmsr();
  61              	 0, pretend = 0, frame = 0
  62              		@ frame_needed = 0, uses_anonymous_args = 0
  63              		@ link register save eliminated.
  64              	.LVL4:
  65              		.loc 1 45 0
  42:../lib/io_driver.c **** _cmsr(_cmsr  | (1<<CMSR_IRQ) | (1<<CMSR_FIQ));
  43:../lib/io_driver.c **** 
  44:../lib/io_driver.c **** 		GPIO0_OUT = GPIO0_OUT | (1<<pin);
  45:../lib/io_driver.c **** 
  66              	r1, #61440
  67 0024 E3E01A0F 		ldr	r3, [r1, #-4095]
  68 0028 E5113FFF 		.loc 1 41 0
  69              		and	r0, r0, #255
  70 002c E20000FF 		.loc 1 45 0
  71              		mov	r2, #1
  72 0030 E3A02001 		orr	r3, r3, r2, asl r0
  73 0034 E1833012 		.loc 1 41 0
  74              		@ lr needed for prologue
  75              		.loc 1 45 0
  76              		str	r3, [r1, #-4095]
  77 0038 E5013FFF 		.loc 1 48 0
  46:../lib/io_driver.c **** et_cmsr(_cmsr);
  47:../lib/io_driver.c **** }
  48:../lib/io_driver.c **** 
  78              	.LFE4:
  80              		.align	2
  81              		.global	io_clr_gpio0_pin
  83              	io_clr_gpio0_pin:
  84              	.LFB5:
  85              		.loc 1 54 0
  86              		@ args = 0, pretend = 0, frame = 0
  49:../lib/io_driver.c **** ******************************************************************************
  50:../lib/io_driver.c **** // Clear general purpose IO port
  51:../lib/io_driver.c ****    void io_clr_gpio0_pin(unsigned char pin)
  52:../lib/io_driver.c **** // ******************************************************************************
  53:../lib/io_driver.c **** {
  54:../lib/io_driver.c **** //	unsigned long _cmsr = get_cmsr();
  87              	needed = 0, uses_anonymous_args = 0
  88              		@ link register save eliminated.
  89              	.LVL5:
  90              		and	r0, r0, #255
  91              		.loc 1 58 0
  92 0040 E20000FF 		mov	r2, #1
  55:../lib/io_driver.c **** _cmsr(_cmsr  | (1<<CMSR_IRQ) | (1<<CMSR_FIQ));
  56:../lib/io_driver.c **** 
  57:../lib/io_driver.c **** 		GPIO0_OUT = GPIO0_OUT & ~(1<<pin);
  58:../lib/io_driver.c **** 
  93              	2, r2, asl r0
  94 0044 E3A02001 		mvn	r1, #61440
  95 0048 E1A02012 		ldr	r3, [r1, #-4095]
  96 004c E3E01A0F 		mvn	r2, r2
  97 0050 E5113FFF 		and	r3, r3, r2
  98 0054 E1E02002 		.loc 1 54 0
  99 0058 E0033002 		@ lr needed for prologue
 100              		.loc 1 58 0
 101              		str	r3, [r1, #-4095]
 102              		.loc 1 61 0
 103 005c E5013FFF 		mov	pc, lr
  59:../lib/io_driver.c **** et_cmsr(_cmsr);
  60:../lib/io_driver.c **** }
  61:../lib/io_driver.c **** // ******************************************************************************
 104              	ze	io_clr_gpio0_pin, .-io_clr_gpio0_pin
 105 0060 E1A0F00E 		.align	2
 106              		.global	io_toggle_gpio0_pin
 108              	io_toggle_gpio0_pin:
 109              	.LFB6:
 110              		.loc 1 66 0
 111              		@ args = 0, pretend = 0, frame = 0
 112              		@ frame_needed = 0, uses_anonymous_args = 0
  62:../lib/io_driver.c **** Set general purpose IO port
  63:../lib/io_driver.c ****    void io_toggle_gpio0_pin(unsigned char pin)
  64:../lib/io_driver.c **** // ******************************************************************************
  65:../lib/io_driver.c **** {
  66:../lib/io_driver.c **** //	unsigned long _cmsr = get_cmsr();
 113              	egister save eliminated.
 114              	.LVL6:
 115              		.loc 1 70 0
 116              		mvn	r1, #61440
 117              		ldr	r3, [r1, #-4095]
  67:../lib/io_driver.c **** t_cmsr(_cmsr  | (1<<CMSR_IRQ) | (1<<CMSR_FIQ));
  68:../lib/io_driver.c **** 
  69:../lib/io_driver.c **** 		GPIO0_OUT = GPIO0_OUT ^ (1<<pin);
  70:../lib/io_driver.c **** 
 118              	 1 66 0
 119 0064 E3E01A0F 		and	r0, r0, #255
 120 0068 E5113FFF 		.loc 1 70 0
 121              		mov	r2, #1
 122 006c E20000FF 		eor	r3, r3, r2, asl r0
 123              		.loc 1 66 0
 124 0070 E3A02001 		@ lr needed for prologue
 125 0074 E0233012 		.loc 1 70 0
 126              		str	r3, [r1, #-4095]
 127              		.loc 1 73 0
 128              		mov	pc, lr
 129 0078 E5013FFF 	.LFE6:
  71:../lib/io_driver.c **** et_cmsr(_cmsr);
  72:../lib/io_driver.c **** }
  73:../lib/io_driver.c **** 
 130              	ggle_gpio0_pin, .-io_toggle_gpio0_pin
 131 007c E1A0F00E 		.align	2
 132              		.global	io_set_gpio0_port
 134              	io_set_gpio0_port:
 135              	.LFB7:
 136              		.loc 1 79 0
 137              		@ args = 0, pretend = 0, frame = 0
 138              		@ frame_needed = 0, uses_anonymous_args = 0
  74:../lib/io_driver.c **** ******************************************************************************
  75:../lib/io_driver.c **** // Clear general purpose IO port
  76:../lib/io_driver.c ****    void io_set_gpio0_port(unsigned long value)
  77:../lib/io_driver.c **** // ******************************************************************************
  78:../lib/io_driver.c **** {
  79:../lib/io_driver.c **** //	unsigned long _cmsr = get_cmsr();
 139              	egister save eliminated.
 140              	.LVL7:
 141              		.loc 1 83 0
 142              		mvn	r3, #61440
 143              		.loc 1 79 0
  80:../lib/io_driver.c **** _cmsr(_cmsr  | (1<<CMSR_IRQ) | (1<<CMSR_FIQ));
  81:../lib/io_driver.c **** 
  82:../lib/io_driver.c **** 		GPIO0_OUT = value;
  83:../lib/io_driver.c **** 
 144              	 needed for prologue
 145 0080 E3E03A0F 		.loc 1 83 0
 146              		str	r0, [r3, #-4095]
 147              		.loc 1 86 0
 148              		mov	pc, lr
 149 0084 E5030FFF 	.LFE7:
  84:../lib/io_driver.c **** et_cmsr(_cmsr);
  85:../lib/io_driver.c **** }
  86:../lib/io_driver.c **** 
 150              		io_set_gpio0_port, .-io_set_gpio0_port
 151 0088 E1A0F00E 		.align	2
 152              		.global	io_set_pwm
 154              	io_set_pwm:
 155              	.LFB8:
 156              		.loc 1 98 0
 157              		@ args = 0, pretend = 0, frame = 0
 158              		@ frame_needed = 0, uses_anonymous_args = 0
  87:../lib/io_driver.c **** / #################################################################################################
  88:../lib/io_driver.c **** // Pulse-Width-Modulation Controller
  89:../lib/io_driver.c **** // ################################################################################################
  90:../lib/io_driver.c **** 
  91:../lib/io_driver.c **** // ******************************************************************************
  92:../lib/io_driver.c **** // Set pwm value
  93:../lib/io_driver.c ****    void io_set_pwm(unsigned char port, unsigned char data)
  94:../lib/io_driver.c **** // ******************************************************************************
  95:../lib/io_driver.c **** {
  96:../lib/io_driver.c **** //	unsigned long _cmsr = get_cmsr();
  97:../lib/io_driver.c **** //	set_cmsr(_cmsr  | (1<<CMSR_IRQ) | (1<<CMSR_FIQ));
  98:../lib/io_driver.c **** 
 159              	nd	r0, r0, #255
 160              		.loc 1 105 0
 161              		cmp	r0, #7
 162              		.loc 1 98 0
 163 008c E20000FF 		stmfd	sp!, {r4, lr}
  99:../lib/io_driver.c **** ng temp = 0;
 100:../lib/io_driver.c **** 
 101:../lib/io_driver.c **** 	// value adjustment
 102:../lib/io_driver.c **** 	if(port > 7)
 103:../lib/io_driver.c **** 		port = 0;
 104:../lib/io_driver.c **** 
 105:../lib/io_driver.c **** 	if(port < 4){
 164              	0:
 165 0090 E3500007 		.loc 1 105 0
 166              		mov	ip, #0
 167 0094 E92D4010 		mvn	lr, #255
 168              		.loc 1 98 0
 169              		and	r1, r1, #255
 170 0098 E3A0C000 		.loc 1 105 0
 171 009c E3E0E0FF 		bhi	.L16
 172              		.loc 1 117 0
 173 00a0 E20110FF 		sub	r3, r0, #4
 174              		and	r3, r3, #255
 175 00a4 8A000011 		.loc 1 108 0
 106:../lib/io_driver.c **** = PWM0_CONF0; // get working copy
 107:../lib/io_driver.c **** 		temp = temp & ~(0xFF << (port*8)); // clear old value
 108:../lib/io_driver.c **** 		temp = temp | (unsigned long)(data << (port*8)); // insert new value
 109:../lib/io_driver.c **** 		PWM0_CONF0 = temp;
 110:../lib/io_driver.c **** 	}
 111:../lib/io_driver.c **** 	else{
 112:../lib/io_driver.c **** 		port = port-4;
 113:../lib/io_driver.c **** 		temp = PWM0_CONF1; // get working copy
 114:../lib/io_driver.c **** 		temp = temp & ~(0xFF << (port*8)); // clear old value
 115:../lib/io_driver.c **** 		temp = temp | (unsigned long)(data << (port*8)); // insert new value
 116:../lib/io_driver.c **** 		PWM0_CONF1 = temp;
 117:../lib/io_driver.c **** 	}
 176              		.loc 1 117 0
 177 00a8 E2403004 		mov	lr, r3, asl #3
 178 00ac E20330FF 		.loc 1 116 0
 179              		mvn	r4, #61440
 180 00b0 E3500003 		.loc 1 108 0
 181              		mov	ip, r0, asl #3
 182 00b4 E1A0E183 		bls	.L22
 183              		.loc 1 117 0
 184 00b8 E3E04A0F 		mov	r3, #255
 185              		mov	r3, r3, asl lr
 186 00bc E1A0C180 		.loc 1 116 0
 187 00c0 9A000007 		ldr	r2, [r4, #-3979]
 188              	.LVL9:
 189 00c4 E3A030FF 		.loc 1 117 0
 190 00c8 E1A03E13 		mvn	r3, r3
 191              		and	r2, r2, r3
 192 00cc E5142F8B 	.LVL10:
 193              		.loc 1 118 0
 194              		orr	r2, r2, r1, asl lr
 195 00d0 E1E03003 	.LVL11:
 196 00d4 E0022003 		.loc 1 119 0
 197              		str	r2, [r4, #-3979]
 118:../lib/io_driver.c **** _cmsr);
 198              	LVL12:
 199 00d8 E1822E11 	.L22:
 200              		.loc 1 108 0
 119:../lib/io_driver.c **** 
 201              	v	r3, #255
 202 00dc E5042F8B 		mov	r3, r3, asl ip
 203 00e0 E8BD8010 		mvn	lr, r3
 204              	.L16:
 205              		.loc 1 109 0
 206              		mvn	r2, #61440
 207 00e4 E3A030FF 		ldr	r3, [r2, #-3983]
 208 00e8 E1A03C13 	.LVL13:
 209 00ec E1E0E003 		.loc 1 110 0
 210              		and	r3, r3, lr
 211              	.LVL14:
 212 00f0 E3E02A0F 		.loc 1 111 0
 213 00f4 E5123F8F 		orr	r3, r3, r1, asl ip
 214              	.LVL15:
 215              		.loc 1 112 0
 216 00f8 E003300E 		str	r3, [r2, #-3983]
 217              		ldmfd	sp!, {r4, pc}
 218              	.LFE8:
 220              		.align	2
 221              		.global	io_get_pwm
 223 0104 E8BD8010 	io_get_pwm:
 224              	.LFB9:
 225              		.loc 1 128 0
 226              		@ args = 0, pretend = 0, frame = 0
 227              		@ frame_needed = 0, uses_anonymous_args = 0
 228              		@ link register save eliminated.
 229              	.LVL16:
 230              		and	r0, r0, #255
 120:../lib/io_driver.c **** 
 121:../lib/io_driver.c **** // ******************************************************************************
 122:../lib/io_driver.c **** // Set pwm value
 123:../lib/io_driver.c ****    unsigned char io_get_pwm(unsigned char port)
 124:../lib/io_driver.c **** // ******************************************************************************
 125:../lib/io_driver.c **** {
 126:../lib/io_driver.c **** //	unsigned long _cmsr = get_cmsr();
 127:../lib/io_driver.c **** //	set_cmsr(_cmsr  | (1<<CMSR_IRQ) | (1<<CMSR_FIQ));
 128:../lib/io_driver.c **** 
 231              	c 1 128 0
 232              		@ lr needed for prologue
 233              		.loc 1 135 0
 234              		mov	r2, #0
 235              		bhi	.L26
 236 0108 E20000FF 		.loc 1 142 0
 129:../lib/io_driver.c **** d long temp = 0;
 130:../lib/io_driver.c **** 
 131:../lib/io_driver.c **** 	// value adjustment
 132:../lib/io_driver.c **** 	if(port > 7)
 133:../lib/io_driver.c **** 		port = 0;
 134:../lib/io_driver.c **** 
 135:../lib/io_driver.c **** 	if(port < 4)
 237              	3, r0, #4
 238 010c E3500007 		.loc 1 138 0
 239              		cmp	r0, #3
 240              		.loc 1 142 0
 241              		and	r2, r3, #255
 242 0110 E3A02000 		.loc 1 138 0
 243 0114 8A00000A 		bls	.L31
 136:../lib/io_driver.c **** = PWM0_CONF0; // get config register
 137:../lib/io_driver.c **** 	else{
 138:../lib/io_driver.c **** 		port = port-4;
 139:../lib/io_driver.c **** 		temp = PWM0_CONF1; // get config register
 140:../lib/io_driver.c **** 	}
 141:../lib/io_driver.c **** 
 142:../lib/io_driver.c **** 	temp = temp >> (port*8); // only keep designated byte
 244              	 142 0
 245 0118 E2403004 		mvn	r3, #61440
 246              		ldr	r0, [r3, #-3979]
 247 011c E3500003 	.LVL17:
 248              		mov	r2, r2, asl #3
 249 0120 E20320FF 		mov	r0, r0, lsr r2
 250              	.LVL18:
 251 0124 9A000005 		and	r0, r0, #255
 252              		.loc 1 149 0
 253 0128 E3E03A0F 		mov	pc, lr
 254 012c E5130F8B 	.LVL19:
 255              	.L31:
 256 0130 E1A02182 		.loc 1 138 0
 257 0134 E1A00230 		mov	r2, r0, asl #3
 258              	.L26:
 259 0138 E20000FF 		.loc 1 139 0
 143:../lib/io_driver.c **** _cmsr(_cmsr);
 144:../lib/io_driver.c **** 	return (unsigned char)temp;
 145:../lib/io_driver.c **** }
 146:../lib/io_driver.c **** 
 147:../lib/io_driver.c **** 
 148:../lib/io_driver.c **** 
 149:../lib/io_driver.c **** // ################################################################################################
 260              		ldr	r0, [r3, #-3983]
 261 013c E1A0F00E 	.LVL20:
 262              		.loc 1 142 0
 263              		mov	r0, r0, lsr r2
 264              	.LVL21:
 265 0140 E1A02180 		and	r0, r0, #255
 266              		.loc 1 149 0
 267              		mov	pc, lr
 268 0144 E3E03A0F 	.LFE9:
 270              		.align	2
 271              		.global	io_uart0_read_byte
 273              	io_uart0_read_byte:
 274 0150 E20000FF 	.LFB10:
 275              		.loc 1 161 0
 276 0154 E1A0F00E 		@ args = 0, pretend = 0, frame = 0
 277              		@ frame_needed = 0, uses_anonymous_args = 0
 278              		@ link register save eliminated.
 279              		.loc 1 166 0
 280              		mvn	r2, #61440
 281              		ldr	r3, [r2, #-3835]
 282              		tst	r3, #2
 283              		mvn	r0, #0
 150:../lib/io_driver.c **** ral Purpose UART "miniUART" (UART_0)
 151:../lib/io_driver.c **** // ################################################################################################
 152:../lib/io_driver.c **** 
 153:../lib/io_driver.c **** // ******************************************************************************
 154:../lib/io_driver.c **** // Read one byte via UART 0
 155:../lib/io_driver.c ****    int io_uart0_read_byte(void)
 156:../lib/io_driver.c **** // ******************************************************************************
 157:../lib/io_driver.c **** {
 158:../lib/io_driver.c **** //	unsigned long _cmsr = get_cmsr();
 159:../lib/io_driver.c **** //	set_cmsr(_cmsr  | (1<<CMSR_IRQ) | (1<<CMSR_FIQ));
 160:../lib/io_driver.c **** 
 161:../lib/io_driver.c **** 	int temp;
 284              	drne	r0, [r2, #-3839]
 285              		.loc 1 161 0
 286              		@ lr needed for prologue
 287              	.LVL23:
 162:../lib/io_driver.c **** SREG & (1<<CUART_RXD)) != 0) // byte available?
 163:../lib/io_driver.c **** 		temp = UART0_DATA;
 164:../lib/io_driver.c **** 	else
 165:../lib/io_driver.c **** 		temp = -1;
 166:../lib/io_driver.c **** 
 288              	c 1 173 0
 289 0158 E3E02A0F 		mov	pc, lr
 290 015c E5123EFB 	.LFE10:
 292 0164 E3E00000 		.align	2
 293              		.global	io_uart0_send_byte
 167:../lib/io_driver.c **** t_cmsr(_cmsr);
 294              		io_uart0_send_byte, %function
 295 0168 15120EFF 	io_uart0_send_byte:
 296              	.LFB11:
 297              		.loc 1 179 0
 298              		@ args = 0, pretend = 0, frame = 0
 168:../lib/io_driver.c **** return temp;
 169:../lib/io_driver.c **** }
 170:../lib/io_driver.c **** 
 171:../lib/io_driver.c **** // ******************************************************************************
 172:../lib/io_driver.c **** // Write one byte via UART 0
 173:../lib/io_driver.c ****    int io_uart0_send_byte(int ch)
 299              	ame_needed = 0, uses_anonymous_args = 0
 300 016c E1A0F00E 		@ link register save eliminated.
 301              	.LVL24:
 302              		@ lr needed for prologue
 303              		mvn	r2, #61440
 304              	.L39:
 305              		.loc 1 183 0
 306              		ldr	r3, [r2, #-3835]
 307              		tst	r3, #1
 174:../lib/io_driver.c **** ***************************************************************************
 175:../lib/io_driver.c **** {
 176:../lib/io_driver.c **** //	unsigned long _cmsr = get_cmsr();
 177:../lib/io_driver.c **** //	set_cmsr(_cmsr  | (1<<CMSR_IRQ) | (1<<CMSR_FIQ));
 178:../lib/io_driver.c **** 
 179:../lib/io_driver.c **** 	while((UART0_SREG & (1<<CUART_TXB)) == 0); // uart busy?
 308              	
 309              		.loc 1 184 0
 310              		and	r3, r0, #255
 311              		str	r3, [r2, #-3839]
 312              	.LVL25:
 313              		.loc 1 188 0
 314 0170 E3E02A0F 		mov	pc, lr
 315              	.LFE11:
 180:../lib/io_driver.c **** _DATA = (ch & 0x000000FF);
 181:../lib/io_driver.c **** 
 182:../lib/io_driver.c **** //	set_cmsr(_cmsr);
 183:../lib/io_driver.c **** 	return ch;
 316              	io_uart0_send_byte, .-io_uart0_send_byte
 317 0174 E5123EFB 		.align	2
 318 0178 E3130001 		.global	io_spi0_config
 184:../lib/io_driver.c **** 
 320              	pi0_config:
 321 0180 E20030FF 	.LFB12:
 322 0184 E5023EFF 		.loc 1 200 0
 323              		@ args = 0, pretend = 0, frame = 0
 185:../lib/io_driver.c **** // ################################################################################################
 186:../lib/io_driver.c **** // Serial Peripherial Interface (SPI_CONTROLLER_0)
 187:../lib/io_driver.c **** // ################################################################################################
 188:../lib/io_driver.c **** 
 324              	rame_needed = 0, uses_anonymous_args = 0
 325 0188 E1A0F00E 		@ link register save eliminated.
 326              	.LVL26:
 327              		and	r0, r0, #255
 328              		.loc 1 206 0
 329              		cmp	r0, #1
 330              		.loc 1 209 0
 331              		orr	r2, r1, #1024
 332              		.loc 1 207 0
 189:../lib/io_driver.c **** *****************************************************************************
 190:../lib/io_driver.c **** // Configure SPI 0
 191:../lib/io_driver.c ****    void io_spi0_config(unsigned char auto_cs, unsigned long data_size)
 192:../lib/io_driver.c **** // ******************************************************************************
 193:../lib/io_driver.c **** {
 194:../lib/io_driver.c **** //	unsigned long _cmsr = get_cmsr();
 195:../lib/io_driver.c **** //	set_cmsr(_cmsr  | (1<<CMSR_IRQ) | (1<<CMSR_FIQ));
 196:../lib/io_driver.c **** 	// devices update their serial input on a rising edge of sclk,
 197:../lib/io_driver.c **** 	// so we need to update the mosi output of the core before
 198:../lib/io_driver.c **** 	// -> at the falling edge of sclk = set SPI_TX_NEG
 199:../lib/io_driver.c **** 	if(auto_cs == 1)
 200:../lib/io_driver.c **** 		SPI0_CONF = (1<<SPI_ACS) | (1<<SPI_TX_NEG) | data_size; // auto assert cs
 333              	, #61440
 334              		orr	r1, r1, #9216
 335              	.LVL27:
 336              		.loc 1 209 0
 337              		mvnne	r3, #61440
 338 018c E20000FF 		.loc 1 200 0
 201:../lib/io_driver.c **** _CONF = (0<<SPI_ACS) | (1<<SPI_TX_NEG) | data_size; // manual assert cs
 202:../lib/io_driver.c **** //	set_cmsr(_cmsr);
 203:../lib/io_driver.c **** }
 204:../lib/io_driver.c **** 
 205:../lib/io_driver.c **** // ******************************************************************************
 206:../lib/io_driver.c **** // Configure SPI 0 CLK frequency -> (sys_clk/(spi_clk*2))-1
 339              	needed for prologue
 340 0190 E3500001 		.loc 1 207 0
 207:../lib/io_driver.c **** d io_spi0_speed(unsigned long clk_divider)
 208:../lib/io_driver.c **** // ******************************************************************************
 209:../lib/io_driver.c **** {
 341              	treq	r1, [r3, #-3327]
 342 0194 E3812B01 		.loc 1 209 0
 343              		strne	r2, [r3, #-3327]
 344 0198 03E03A0F 		mov	pc, lr
 345 019c E3811B09 	.LFE12:
 347              		.align	2
 348 01a0 13E03A0F 		.global	io_spi0_speed
 350              	io_spi0_speed:
 351              	.LFB13:
 352 01a4 05031CFF 		.loc 1 217 0
 353              		@ args = 0, pretend = 0, frame = 0
 354 01a8 15032CFF 		@ frame_needed = 0, uses_anonymous_args = 0
 355 01ac E1A0F00E 		@ link register save eliminated.
 356              	.LVL28:
 357              		.loc 1 221 0
 358              		mvn	r3, #61440
 359              		.loc 1 217 0
 360              		@ lr needed for prologue
 361              		.loc 1 221 0
 362              		str	r0, [r3, #-3323]
 210:../lib/io_driver.c **** unsigned long _cmsr = get_cmsr();
 211:../lib/io_driver.c **** //	set_cmsr(_cmsr  | (1<<CMSR_IRQ) | (1<<CMSR_FIQ));
 212:../lib/io_driver.c **** 
 213:../lib/io_driver.c **** 		SPI0_PRSC = clk_divider; // (sys_clk/(spi_clk*2))-1;
 214:../lib/io_driver.c **** 
 215:../lib/io_driver.c **** //	set_cmsr(_cmsr);
 216:../lib/io_driver.c **** }
 217:../lib/io_driver.c **** 
 363              	 lr
 364              	.LFE13:
 366              		.align	2
 367              		.global	io_spi0_trans
 218:../lib/io_driver.c **** *************************************************************************
 219:../lib/io_driver.c **** // Sends/receives max 32 bits via SPI, CS and config must be done outside
 220:../lib/io_driver.c ****    unsigned long io_spi0_trans(unsigned long data)
 221:../lib/io_driver.c **** // ******************************************************************************
 368              	e	io_spi0_trans, %function
 369 01b0 E3E03A0F 	io_spi0_trans:
 370              	.LFB14:
 371              		.loc 1 230 0
 372              		@ args = 0, pretend = 0, frame = 0
 373 01b4 E5030CFB 		@ frame_needed = 0, uses_anonymous_args = 0
 222:../lib/io_driver.c **** 	unsigned long _cmsr = get_cmsr();
 223:../lib/io_driver.c **** //	set_cmsr(_cmsr  | (1<<CMSR_IRQ) | (1<<CMSR_FIQ));
 224:../lib/io_driver.c **** 
 374              	k register save eliminated.
 375 01b8 E1A0F00E 	.LVL29:
 376              		@ lr needed for prologue
 377              		mvn	r2, #61440
 378              	.L53:
 379              		.loc 1 235 0
 380              		ldr	r3, [r2, #-3327]
 381              		tst	r3, #256
 382              		bne	.L53
 225:../lib/io_driver.c ****  spi transmission
 226:../lib/io_driver.c **** 	while((SPI0_CONF & (1<<SPI_BUSY)) != 0); // wait for prev tx to finish
 227:../lib/io_driver.c **** 	SPI0_DAT0 = data;
 228:../lib/io_driver.c **** 	SPI0_CONF = SPI0_CONF | (1<<SPI_BUSY); // start transmitter
 229:../lib/io_driver.c **** 	while((SPI0_CONF & (1<<SPI_BUSY)) != 0); // wait for rx to finish
 230:../lib/io_driver.c **** 	unsigned long temp = SPI0_DAT0;
 383              	36 0
 384              		str	r0, [r2, #-3311]
 385              		.loc 1 237 0
 386              		ldr	r3, [r2, #-3327]
 387              		orr	r3, r3, #256
 388              		str	r3, [r2, #-3327]
 389 01bc E3E02A0F 		mvn	r2, #61440
 390              	.L55:
 231:../lib/io_driver.c **** t_cmsr(_cmsr);
 232:../lib/io_driver.c **** 	return temp;
 233:../lib/io_driver.c **** }
 234:../lib/io_driver.c **** 
 235:../lib/io_driver.c **** // ******************************************************************************
 391              	238 0
 392 01c0 E5123CFF 		ldr	r3, [r2, #-3327]
 393 01c4 E3130C01 		tst	r3, #256
 394 01c8 1AFFFFFC 		bne	.L55
 236:../lib/io_driver.c **** ntrols the CS of SPI0, enables a connected CS (turns it LOW)
 395              	c 1 239 0
 396 01cc E5020CEF 		ldr	r0, [r2, #-3311]
 237:../lib/io_driver.c ****   void io_spi0_enable(unsigned char device)
 397              	VL30:
 398 01d0 E5123CFF 	.LVL31:
 399 01d4 E3833C01 		.loc 1 243 0
 400 01d8 E5023CFF 		mov	pc, lr
 401 01dc E3E02A0F 	.LFE14:
 238:../lib/io_driver.c **** / ******************************************************************************
 403              	n	2
 404 01e0 E5123CFF 		.global	io_spi0_enable
 406 01e8 1AFFFFFC 	io_spi0_enable:
 239:../lib/io_driver.c **** 
 407              	15:
 408 01ec E5120CEF 		.loc 1 249 0
 409              		@ args = 0, pretend = 0, frame = 0
 410              		@ frame_needed = 0, uses_anonymous_args = 0
 240:../lib/io_driver.c **** //	unsigned long _cmsr = get_cmsr();
 241:../lib/io_driver.c **** //	set_cmsr(_cmsr  | (1<<CMSR_IRQ) | (1<<CMSR_FIQ));
 242:../lib/io_driver.c **** 
 243:../lib/io_driver.c **** 		SPI0_SCSR = SPI0_SCSR | (1<<device);
 411              	ink register save eliminated.
 412 01f0 E1A0F00E 	.LVL32:
 413              		.loc 1 253 0
 414              		mvn	r1, #61440
 415              		ldr	r3, [r1, #-3319]
 416              		.loc 1 249 0
 417              		and	r0, r0, #255
 418              		.loc 1 253 0
 419              		mov	r2, #1
 244:../lib/io_driver.c **** set_cmsr(_cmsr);
 245:../lib/io_driver.c **** }
 246:../lib/io_driver.c **** 
 247:../lib/io_driver.c **** // ******************************************************************************
 248:../lib/io_driver.c **** // Controls the CS of SPI0, disables a connected CS (turns it HIGH)
 249:../lib/io_driver.c ****    void io_spi0_disable(unsigned char device)
 420              	r3, r2, asl r0
 421              		.loc 1 249 0
 422              		@ lr needed for prologue
 423              		.loc 1 253 0
 424              		str	r3, [r1, #-3319]
 250:../lib/io_driver.c **** ***************************************************************************
 251:../lib/io_driver.c **** {
 252:../lib/io_driver.c **** //	unsigned long _cmsr = get_cmsr();
 253:../lib/io_driver.c **** //	set_cmsr(_cmsr  | (1<<CMSR_IRQ) | (1<<CMSR_FIQ));
 425              	 1 256 0
 426 01f4 E3E01A0F 		mov	pc, lr
 427 01f8 E5113CF7 	.LFE15:
 429 01fc E20000FF 		.align	2
 430              		.global	io_spi0_disable
 432 0204 E1833012 	io_spi0_disable:
 433              	.LFB16:
 434              		.loc 1 262 0
 435              		@ args = 0, pretend = 0, frame = 0
 436 0208 E5013CF7 		@ frame_needed = 0, uses_anonymous_args = 0
 254:../lib/io_driver.c **** PI0_SCSR = SPI0_SCSR & ~(1<<device);
 255:../lib/io_driver.c **** 
 256:../lib/io_driver.c **** //	set_cmsr(_cmsr);
 437              	ster save eliminated.
 438 020c E1A0F00E 	.LVL33:
 439              		and	r0, r0, #255
 440              		.loc 1 266 0
 441              		mov	r2, #1
 442              		mov	r2, r2, asl r0
 443              		mvn	r1, #61440
 444              		ldr	r3, [r1, #-3319]
 445              		mvn	r2, r2
 257:../lib/io_driver.c **** 
 258:../lib/io_driver.c **** 
 259:../lib/io_driver.c **** 
 260:../lib/io_driver.c **** // ################################################################################################
 261:../lib/io_driver.c **** // Inter Intergrated Circuit Interface (I²C_CONTROLLER_0)
 262:../lib/io_driver.c **** // ################################################################################################
 446              	r3, r2
 447              		.loc 1 262 0
 448              		@ lr needed for prologue
 449              		.loc 1 266 0
 450              		str	r3, [r1, #-3319]
 451 0210 E20000FF 		.loc 1 269 0
 263:../lib/io_driver.c **** *****************************************************************************
 264:../lib/io_driver.c **** // Configure SPI 0 CLK frequency -> (sys_clk/(5*i2c_clock)-1
 265:../lib/io_driver.c ****    void io_i2c0_speed(unsigned long clk_divider)
 266:../lib/io_driver.c **** // ******************************************************************************
 452              	c, lr
 453 0214 E3A02001 	.LFE16:
 455 021c E3E01A0F 		.align	2
 456 0220 E5113CF7 		.global	io_i2c0_speed
 458 0228 E0033002 	io_i2c0_speed:
 459              	.LFB17:
 460              		.loc 1 282 0
 461              		@ args = 0, pretend = 0, frame = 0
 462 022c E5013CF7 		@ frame_needed = 0, uses_anonymous_args = 0
 267:../lib/io_driver.c **** 	unsigned long _cmsr = get_cmsr();
 268:../lib/io_driver.c **** //	set_cmsr(_cmsr  | (1<<CMSR_IRQ) | (1<<CMSR_FIQ));
 269:../lib/io_driver.c **** 		I2C0_CTRL = I2C0_CTRL & ~(1<<I2C_EN); // disable i2c core
 463              	ister save eliminated.
 464 0230 E1A0F00E 	.LVL34:
 465              		.loc 1 285 0
 466              		mvn	r2, #61440
 467              		ldr	r3, [r2, #-3047]
 468              		.loc 1 287 0
 469              		mov	r1, r0, lsr #8
 470              		.loc 1 285 0
 471              		bic	r3, r3, #128
 270:../lib/io_driver.c **** 2C0_PRLO = clk_divider;
 271:../lib/io_driver.c **** 		I2C0_PRHI = clk_divider >> 8;
 272:../lib/io_driver.c **** 		I2C0_CTRL = I2C0_CTRL | (1<<I2C_EN); // enable i2c core
 273:../lib/io_driver.c **** //	set_cmsr(_cmsr);
 274:../lib/io_driver.c **** }
 275:../lib/io_driver.c **** 
 276:../lib/io_driver.c **** // ******************************************************************************
 277:../lib/io_driver.c **** // Read/write byte from/to I²C slave, max 2 address bytes
 278:../lib/io_driver.c ****    int io_i2c0_byte_transfer(unsigned char rw,        // 'r' read / 'w' write cycle
 279:../lib/io_driver.c ****                              unsigned char id,        // device ID
 280:../lib/io_driver.c **** 							 unsigned long data_adr,  // data address
 281:../lib/io_driver.c **** 							 unsigned char adr_bytes, // number of adr bytes
 282:../lib/io_driver.c **** 							 unsigned char data)      // data byte
 472              	[r2, #-3047]
 473              		.loc 1 286 0
 474              		str	r0, [r2, #-3055]
 475              		.loc 1 287 0
 476              		str	r1, [r2, #-3051]
 283:../lib/io_driver.c **** ********************************************************************
 284:../lib/io_driver.c **** {
 285:../lib/io_driver.c **** //	unsigned long _cmsr = get_cmsr();
 477              	 1 288 0
 478 0234 E3E02A0F 		ldr	r3, [r2, #-3047]
 479 0238 E5123BE7 		orr	r3, r3, #128
 286:../lib/io_driver.c **** set_cmsr(_cmsr  | (1<<CMSR_IRQ) | (1<<CMSR_FIQ));
 287:../lib/io_driver.c **** 
 480              	oc 1 282 0
 481 023c E1A01420 		@ lr needed for prologue
 482              		.loc 1 288 0
 483 0240 E3C33080 		str	r3, [r2, #-3047]
 484 0244 E5023BE7 		.loc 1 290 0
 485              		mov	pc, lr
 486 0248 E5020BEF 	.LFE17:
 488 024c E5021BEB 		.align	2
 288:../lib/io_driver.c **** / transfer slave identification address
 489              	io_i2c0_byte_transfer
 491 0254 E3833080 	io_i2c0_byte_transfer:
 492              	.LFB18:
 493              		.loc 1 300 0
 494              		@ args = 4, pretend = 0, frame = 0
 495 0258 E5023BE7 		@ frame_needed = 0, uses_anonymous_args = 0
 289:../lib/io_driver.c **** I2C0_DATA = id & 0xFE;                  // device id and write
 290:../lib/io_driver.c **** 	I2C0_CMD = (1<<I2C_STA) | (1<<I2C_WR);  // start condition and write cycle
 496              	
 497 025c E1A0F00E 		stmfd	sp!, {r4, r5, lr}
 498              	.LCFI1:
 499              		.loc 1 306 0
 500              		mov	ip, #144
 501              		.loc 1 305 0
 502              		and	r4, r1, #254
 503              		mvn	lr, #61440
 504              	.LVL36:
 291:../lib/io_driver.c **** hile((I2C0_STAT & (1<<I2C_TIP)) != 0); // wait for transfer to finish
 292:../lib/io_driver.c **** 	if((I2C0_STAT & (1<<I2C_RXACK)) != 0){  // ack received?
 293:../lib/io_driver.c **** //		set_cmsr(_cmsr);
 294:../lib/io_driver.c **** 		return -1;
 295:../lib/io_driver.c **** 	}
 296:../lib/io_driver.c **** 
 297:../lib/io_driver.c **** 	// transfer data address
 298:../lib/io_driver.c **** 	while(adr_bytes != 0){
 299:../lib/io_driver.c **** 		adr_bytes--;
 300:../lib/io_driver.c **** 		if(adr_bytes == 1)
 505              	300 0
 506              		ldrb	r5, [sp, #15]	@ zero_extendqisi2
 507              		and	r0, r0, #255
 508              		.loc 1 305 0
 509 0260 E92D4030 		str	r4, [lr, #-3043]
 510              		.loc 1 300 0
 301:../lib/io_driver.c **** TA = data_adr >> 8;          // high byte
 302:../lib/io_driver.c **** 		else
 303:../lib/io_driver.c **** 			I2C0_DATA = data_adr;               // low byte
 304:../lib/io_driver.c **** 		I2C0_CMD = (1<<I2C_WR);                 // write cycle
 305:../lib/io_driver.c **** 		while((I2C0_STAT & (1<<I2C_TIP)) != 0); // wait for transfer to finish
 306:../lib/io_driver.c **** 		if((I2C0_STAT & (1<<I2C_RXACK)) != 0){  // ack received?
 511              	1, r1, #255
 512 0264 E3A0C090 		.loc 1 306 0
 513              		str	ip, [lr, #-3071]
 514 0268 E20140FE 		.loc 1 300 0
 515 026c E3E0EA0F 		mov	r4, r2
 516              		and	ip, r3, #255
 517              	.LVL37:
 518 0270 E5DD500F 	.L69:
 519 0274 E20000FF 		.loc 1 307 0
 520              		ldr	r3, [lr, #-3071]
 521 0278 E50E4BE3 		tst	r3, #2
 522              		bne	.L69
 523 027c E20110FF 		.loc 1 308 0
 524              		ldr	r3, [lr, #-3071]
 525 0280 E50ECBFF 		tst	r3, #128
 526              		mvnne	r0, #0
 527 0284 E1A04002 	.LVL38:
 528 0288 E203C0FF 		ldmnefd	sp!, {r4, r5, pc}
 529              	.L80:
 530              		.loc 1 314 0
 307:../lib/io_driver.c **** et_cmsr(_cmsr);
 531              	09
 532 028c E51E3BFF 		.loc 1 315 0
 533 0290 E3130002 		sub	r3, ip, #1
 534 0294 1AFFFFFC 		and	ip, r3, #255
 308:../lib/io_driver.c **** 		return -2;
 535              	c 1 316 0
 536 0298 E51E3BFF 		cmp	ip, #1
 537 029c E3130080 		.loc 1 317 0
 538 02a0 13E00000 		moveq	r2, r4, lsr #8
 539              		mvneq	r3, #61440
 540 02a4 18BD8030 		.loc 1 319 0
 541              		mvnne	r3, #61440
 309:../lib/io_driver.c **** 	}
 310:../lib/io_driver.c **** 	}
 311:../lib/io_driver.c **** 
 312:../lib/io_driver.c **** 	if(rw == 'w'){
 313:../lib/io_driver.c **** 		// write adressed byte
 314:../lib/io_driver.c **** 		I2C0_DATA = data;                       // send data
 542              	 317 0
 543 02a8 E35C0000 		streq	r2, [r3, #-3043]
 544 02ac 0A000012 		.loc 1 319 0
 315:../lib/io_driver.c **** _CMD = (1<<I2C_STO) | (1<<I2C_WR);  // stop condition and write cycle
 545              	rne	r4, [r3, #-3043]
 546 02b0 E24C3001 		.loc 1 320 0
 547 02b4 E203C0FF 		mvn	r2, #61440
 316:../lib/io_driver.c **** 	while((I2C0_STAT & (1<<I2C_TIP)) != 0); // wait for transfer to finish
 548              	v	r3, #16
 549 02b8 E35C0001 		str	r3, [r2, #-3071]
 317:../lib/io_driver.c **** 	if((I2C0_STAT & (1<<I2C_RXACK)) != 0){  // ack received?
 550              	78:
 551 02bc 01A02424 		.loc 1 321 0
 552 02c0 03E03A0F 		ldr	r3, [r2, #-3071]
 318:../lib/io_driver.c **** /			set_cmsr(_cmsr);
 319:../lib/io_driver.c **** 			return -3;
 553              	t	r3, #2
 554 02c4 13E03A0F 		bne	.L78
 555              		.loc 1 322 0
 556 02c8 05032BE3 		ldr	r3, [r2, #-3071]
 557              		tst	r3, #128
 558 02cc 15034BE3 		beq	.L80
 320:../lib/io_driver.c **** }
 559              	0, #1
 560 02d0 E3E02A0F 		ldmfd	sp!, {r4, r5, pc}
 561 02d4 E3A03010 	.LVL39:
 562 02d8 E5023BFF 	.L109:
 563              	.LVL40:
 321:../lib/io_driver.c **** 	else{
 564              	 1 328 0
 565 02dc E5123BFF 		cmp	r0, #119
 566 02e0 E3130002 		bne	.L83
 567 02e4 1AFFFFFC 		.loc 1 330 0
 322:../lib/io_driver.c **** /			set_cmsr(_cmsr);
 568              		r3, #61440
 569 02e8 E5123BFF 		.loc 1 331 0
 570 02ec E3130080 		mov	r2, #80
 571 02f0 0AFFFFEC 		.loc 1 330 0
 572 02f4 E3E00001 		str	r5, [r3, #-3043]
 573 02f8 E8BD8030 		.loc 1 331 0
 574              		str	r2, [r3, #-3071]
 575              		mov	r2, r3
 576              	.L85:
 323:../lib/io_driver.c **** 		return 0;
 324:../lib/io_driver.c **** 		}
 325:../lib/io_driver.c **** 	}
 326:../lib/io_driver.c **** 
 327:../lib/io_driver.c **** 	if(rw == 'r'){
 328:../lib/io_driver.c **** 		// re-send control byte - this time with read-bit
 577              	32 0
 578 02fc E3500077 		ldr	r3, [r2, #-3071]
 579 0300 1A00000C 		tst	r3, #2
 329:../lib/io_driver.c **** _DATA = id | 0x01;                  // device id and READ
 330:../lib/io_driver.c **** 		I2C0_CMD = (1<<I2C_STA) | (1<<I2C_WR);  // start condition and write cycle
 580              	e	.L85
 581 0304 E3E03A0F 		.loc 1 333 0
 331:../lib/io_driver.c **** while((I2C0_STAT & (1<<I2C_TIP)) != 0); // wait for transfer to finish
 582              	dr	r3, [r2, #-3071]
 583 0308 E3A02050 		ands	r0, r3, #128
 584              	.LVL41:
 585 030c E5035BE3 		ldmeqfd	sp!, {r4, r5, pc}
 586              	.L87:
 587 0310 E5032BFF 		.loc 1 355 0
 588 0314 E1A02003 		mvn	r0, #2
 589              		.loc 1 360 0
 332:../lib/io_driver.c **** 	if((I2C0_STAT & (1<<I2C_RXACK)) != 0){  // ack received?
 590              	p!, {r4, r5, pc}
 591 0318 E5123BFF 	.LVL42:
 592 031c E3130002 	.L83:
 593 0320 1AFFFFFC 		.loc 1 343 0
 333:../lib/io_driver.c **** /			set_cmsr(_cmsr);
 594              		r0, #114
 595 0324 E5123BFF 		mvnne	r0, #3
 596 0328 E2130080 	.LVL43:
 597              		ldmnefd	sp!, {r4, r5, pc}
 598 032c 08BD8030 		.loc 1 345 0
 599              		orr	r3, r1, #1
 334:../lib/io_driver.c **** 		return -3;
 335:../lib/io_driver.c **** 		}
 336:../lib/io_driver.c **** 		// read adressed byte
 337:../lib/io_driver.c **** 		I2C0_CMD = (1<<I2C_STO) | (1<<I2C_RD) | (1<<I2C_ACK);
 338:../lib/io_driver.c **** 		while((I2C0_STAT & (1<<I2C_TIP)) != 0); // wait for transfer to finish
 339:../lib/io_driver.c **** 		return I2C0_DATA;
 340:../lib/io_driver.c **** 	}
 341:../lib/io_driver.c **** 
 342:../lib/io_driver.c **** //	set_cmsr(_cmsr);
 343:../lib/io_driver.c **** 	return -4;
 344:../lib/io_driver.c **** }
 345:../lib/io_driver.c **** 
 346:../lib/io_driver.c **** 
 347:../lib/io_driver.c **** 
 348:../lib/io_driver.c **** 
 349:../lib/io_driver.c **** // ################################################################################################
 350:../lib/io_driver.c **** // System
 351:../lib/io_driver.c **** // ################################################################################################
 352:../lib/io_driver.c **** 
 353:../lib/io_driver.c **** // ******************************************************************************
 354:../lib/io_driver.c **** // read system coprocessor register x
 355:../lib/io_driver.c ****    unsigned long get_syscpreg(unsigned char index)
 600              	2, #61440
 601 0330 E3E00002 		.loc 1 346 0
 356:../lib/io_driver.c **** ***********************************************************
 357:../lib/io_driver.c **** {
 358:../lib/io_driver.c **** 	unsigned long _cp_val;
 359:../lib/io_driver.c **** 	switch(index){
 360:../lib/io_driver.c **** 		case ID_REG_0:   asm volatile ("mrc p15,0,%0, c0, c0" : "=r" (_cp_val) : /* no inputs */  ); brea
 602              	ov	r1, #144
 603 0334 E8BD8030 	.LVL44:
 604              		.loc 1 345 0
 605              		str	r3, [r2, #-3043]
 606              		.loc 1 346 0
 607 0338 E3500072 		str	r1, [r2, #-3071]
 608 033c 13E00003 	.L91:
 609              		.loc 1 347 0
 610 0340 18BD8030 		ldr	r3, [r2, #-3071]
 611              		tst	r3, #2
 612 0344 E3813001 		bne	.L91
 613 0348 E3E02A0F 		.loc 1 348 0
 614              		ldr	r3, [r2, #-3071]
 615 034c E3A01090 		tst	r3, #128
 616              		bne	.L87
 617              		.loc 1 353 0
 618 0350 E5023BE3 		mov	r3, #104
 619              		str	r3, [r2, #-3071]
 620 0354 E5021BFF 		mvn	r0, #61440
 621              	.L94:
 622              		.loc 1 354 0
 623 0358 E5123BFF 		ldr	r3, [r0, #-3071]
 624 035c E3130002 		tst	r3, #2
 625 0360 1AFFFFFC 		bne	.L94
 626              		.loc 1 355 0
 627 0364 E5123BFF 		ldr	r0, [r0, #-3043]
 628 0368 E3130080 		ldmfd	sp!, {r4, r5, pc}
 629 036c 1AFFFFEF 	.LFE18:
 631 0370 E3A03068 		.align	2
 632 0374 E5023BFF 		.global	get_syscpreg
 634              	get_syscpreg:
 635              	.LFB19:
 636 037c E5103BFF 		.loc 1 373 0
 637 0380 E3130002 		@ args = 0, pretend = 0, frame = 0
 638 0384 1AFFFFFC 		@ frame_needed = 0, uses_anonymous_args = 0
 639              		@ link register save eliminated.
 640 0388 E5100BE3 	.LVL45:
 641 038c E8BD8030 		and	r0, r0, #255
 642              		@ lr needed for prologue
 643              		.loc 1 375 0
 644              		cmp	r0, #15
 645              		ldrls	pc, [pc, r0, asl #2]
 646              		b	.L111
 647              		.p2align 2
 648              	.L128:
 361:../lib/io_driver.c **** e ID_REG_1:   asm volatile ("mrc p15,0,%0, c1, c1" : "=r" (_cp_val) : /* no inputs */  ); break;
 362:../lib/io_driver.c **** 		case ID_REG_2:   asm volatile ("mrc p15,0,%0, c2, c2" : "=r" (_cp_val) : /* no inputs */  ); brea
 363:../lib/io_driver.c **** 		case 3:          asm volatile ("mrc p15,0,%0, c3, c3" : "=r" (_cp_val) : /* no inputs */  ); brea
 364:../lib/io_driver.c **** 		case 4:          asm volatile ("mrc p15,0,%0, c4, c4" : "=r" (_cp_val) : /* no inputs */  ); brea
 365:../lib/io_driver.c **** 		case 5:          asm volatile ("mrc p15,0,%0, c5, c5" : "=r" (_cp_val) : /* no inputs */  ); brea
 366:../lib/io_driver.c **** 		case SYS_CTRL_0: asm volatile ("mrc p15,0,%0, c6, c6" : "=r" (_cp_val) : /* no inputs */  ); brea
 367:../lib/io_driver.c **** 		case 7:          asm volatile ("mrc p15,0,%0, c7, c7" : "=r" (_cp_val) : /* no inputs */  ); brea
 368:../lib/io_driver.c **** 		case CSTAT:      asm volatile ("mrc p15,0,%0, c8, c8" : "=r" (_cp_val) : /* no inputs */  ); brea
 369:../lib/io_driver.c **** 		case ADR_FB:     asm volatile ("mrc p15,0,%0, c9, c9" : "=r" (_cp_val) : /* no inputs */  ); brea
 370:../lib/io_driver.c **** 		case 10:         asm volatile ("mrc p15,0,%0,c10,c10" : "=r" (_cp_val) : /* no inputs */  ); brea
 371:../lib/io_driver.c **** 		case LFSR_POLY:  asm volatile ("mrc p15,0,%0,c11,c11" : "=r" (_cp_val) : /* no inputs */  ); brea
 372:../lib/io_driver.c **** 		case LFSR_DATA:  asm volatile ("mrc p15,0,%0,c12,c12" : "=r" (_cp_val) : /* no inputs */  ); brea
 373:../lib/io_driver.c **** 		case SYS_IO:     asm volatile ("mrc p15,0,%0,c13,c13" : "=r" (_cp_val) : /* no inputs */  ); brea
 649              	L115
 650              		.word	.L116
 651              		.word	.L117
 652              		.word	.L118
 653              		.word	.L119
 654 0390 E20000FF 		.word	.L120
 655              		.word	.L121
 374:../lib/io_driver.c ****       asm volatile ("mrc p15,0,%0,c14,c14" : "=r" (_cp_val) : /* no inputs */  ); break;
 375:../lib/io_driver.c **** 		case 15:         asm volatile ("mrc p15,0,%0,c15,c15" : "=r" (_cp_val) : /* no inputs */  ); brea
 656              	.L122
 657 0394 E350000F 		.word	.L123
 658 0398 979FF100 		.word	.L124
 659 039c EA00000F 		.word	.L125
 660              		.word	.L126
 661              		.word	.L127
 662 03a0 00000460 	.L111:
 663 03a4 00000458 		mov	r0, #0
 664 03a8 00000450 	.LVL46:
 665 03ac 00000448 		mov	pc, lr
 666 03b0 00000440 	.LVL47:
 667 03b4 00000438 	.L127:
 668 03b8 00000430 		.loc 1 391 0
 669 03bc 00000428 		mrc p15,0,r0,c15,c15
 670 03c0 00000420 	.LVL48:
 671 03c4 00000418 	.LVL49:
 672 03c8 00000410 		.loc 1 395 0
 673 03cc 00000408 		mov	pc, lr
 674 03d0 00000400 	.LVL50:
 675 03d4 000003F8 	.L126:
 676 03d8 000003F0 		.loc 1 390 0
 677 03dc 000003E8 		mrc p15,0,r0,c14,c14
 678              	.LVL51:
 679 03e0 E3A00000 		mov	pc, lr
 680              	.LVL52:
 681 03e4 E1A0F00E 	.L125:
 682              		.loc 1 389 0
 683              		mrc p15,0,r0,c13,c13
 376:../lib/io_driver.c **** rc p15,0,%0,c15,c15" : "=r" (_cp_val) : /* no inputs */  ); break;
 377:../lib/io_driver.c **** 		default:         _cp_val = 0; break;
 378:../lib/io_driver.c **** 	}
 379:../lib/io_driver.c **** 	return _cp_val;
 380:../lib/io_driver.c **** }
 381:../lib/io_driver.c **** 
 382:../lib/io_driver.c **** // ******************************************************************************
 383:../lib/io_driver.c **** // write system coprocessor register x
 384:../lib/io_driver.c ****    void set_syscpreg(unsigned long _cp_val, unsigned char index)
 385:../lib/io_driver.c **** // ******************************************************************************
 386:../lib/io_driver.c **** {
 387:../lib/io_driver.c **** 	switch(index){
 388:../lib/io_driver.c **** //		case ID_REG_0:   asm volatile ("mcr p15,0,%0, c0, c0,0" : /* no outputs */ : "r" (_cp_val)); br
 389:../lib/io_driver.c **** //		case ID_REG_1:   asm volatile ("mcr p15,0,%0, c1, c1,0" : /* no outputs */ : "r" (_cp_val)); br
 390:../lib/io_driver.c **** //		case ID_REG_2:   asm volatile ("mcr p15,0,%0, c2, c2,0" : /* no outputs */ : "r" (_cp_val)); br
 391:../lib/io_driver.c **** //		case 3:          asm volatile ("mcr p15,0,%0, c3, c3,0" : /* no outputs */ : "r" (_cp_val)); br
 684              	.L124:
 685 03e8 EE1F0F1F 		.loc 1 388 0
 686              		mrc p15,0,r0,c12,c12
 687              	.LVL55:
 392:../lib/io_driver.c **** , c3,0" : /* no outputs */ : "r" (_cp_val)); break;
 393:../lib/io_driver.c **** //		case 4:          asm volatile ("mcr p15,0,%0, c4, c4,0" : /* no outputs */ : "r" (_cp_val)); br
 394:../lib/io_driver.c **** //		case 5:          asm volatile ("mcr p15,0,%0, c5, c5,0" : /* no outputs */ : "r" (_cp_val)); br
 395:../lib/io_driver.c **** 		case SYS_CTRL_0: asm volatile ("mcr p15,0,%0, c6, c6,0" : /* no outputs */ : "r" (_cp_val)); brea
 688              		pc, lr
 689 03ec E1A0F00E 	.LVL56:
 690              	.L123:
 691              		.loc 1 387 0
 692              		mrc p15,0,r0,c11,c11
 693 03f0 EE1E0F1E 	.LVL57:
 694              		mov	pc, lr
 695 03f4 E1A0F00E 	.LVL58:
 696              	.L122:
 697              		.loc 1 386 0
 698              		mrc p15,0,r0,c10,c10
 699 03f8 EE1D0F1D 	.LVL59:
 700              		mov	pc, lr
 701 03fc E1A0F00E 	.LVL60:
 702              	.L121:
 703              		.loc 1 385 0
 704              		mrc p15,0,r0, c9, c9
 705 0400 EE1C0F1C 	.LVL61:
 706              		mov	pc, lr
 707 0404 E1A0F00E 	.LVL62:
 708              	.L120:
 709              		.loc 1 384 0
 710              		mrc p15,0,r0, c8, c8
 711 0408 EE1B0F1B 	.LVL63:
 712              		mov	pc, lr
 713 040c E1A0F00E 	.LVL64:
 714              	.L119:
 715              		.loc 1 383 0
 716              		mrc p15,0,r0, c7, c7
 717 0410 EE1A0F1A 	.LVL65:
 718              		mov	pc, lr
 719 0414 E1A0F00E 	.LVL66:
 720              	.L118:
 721              		.loc 1 382 0
 722              		mrc p15,0,r0, c6, c6
 723 0418 EE190F19 	.LVL67:
 724              		mov	pc, lr
 725 041c E1A0F00E 	.LVL68:
 726              	.L117:
 727              		.loc 1 381 0
 728              		mrc p15,0,r0, c5, c5
 729 0420 EE180F18 	.LVL69:
 730              		mov	pc, lr
 731 0424 E1A0F00E 	.LVL70:
 732              	.L116:
 733              		.loc 1 380 0
 734              		mrc p15,0,r0, c4, c4
 735 0428 EE170F17 	.LVL71:
 736              		mov	pc, lr
 737 042c E1A0F00E 	.LVL72:
 738              	.L115:
 739              		.loc 1 379 0
 740              		mrc p15,0,r0, c3, c3
 741 0430 EE160F16 	.LVL73:
 742              		mov	pc, lr
 743 0434 E1A0F00E 	.LVL74:
 744              	.L114:
 745              		.loc 1 378 0
 746              		mrc p15,0,r0, c2, c2
 747 0438 EE150F15 	.LVL75:
 748              		mov	pc, lr
 749 043c E1A0F00E 	.LVL76:
 750              	.L113:
 751              		.loc 1 377 0
 752              		mrc p15,0,r0, c1, c1
 753 0440 EE140F14 	.LVL77:
 754              		mov	pc, lr
 755 0444 E1A0F00E 	.LVL78:
 756              	.L112:
 757              		.loc 1 376 0
 758              		mrc p15,0,r0, c0, c0
 759 0448 EE130F13 	.LVL79:
 760              		mov	pc, lr
 761 044c E1A0F00E 	.LFE19:
 763              		.align	2
 764              		.global	set_syscpreg
 766              	set_syscpreg:
 767 0454 E1A0F00E 	.LFB20:
 768              		.loc 1 401 0
 769              		@ args = 0, pretend = 0, frame = 0
 770              		@ frame_needed = 0, uses_anonymous_args = 0
 771 0458 EE110F11 		@ link register save eliminated.
 772              	.LVL80:
 773 045c E1A0F00E 		and	r1, r1, #255
 774              		.loc 1 402 0
 775              		sub	r1, r1, #6
 776              	.LVL81:
 777 0460 EE100F10 		.loc 1 401 0
 778              		@ lr needed for prologue
 779 0464 E1A0F00E 		.loc 1 402 0
 780              		cmp	r1, #7
 781              		ldrls	pc, [pc, r1, asl #2]
 782              		b	.L138
 783              		.p2align 2
 784              	.L137:
 785              		.word	.L133
 786              		.word	.L138
 396:../lib/io_driver.c **** 6,0" : /* no outputs */ : "r" (_cp_val)); break;
 397:../lib/io_driver.c **** //		case 7:          asm volatile ("mcr p15,0,%0, c7, c7,0" : /* no outputs */ : "r" (_cp_val)); br
 398:../lib/io_driver.c **** //		case CSTAT:      asm volatile ("mcr p15,0,%0, c8, c8,0" : /* no outputs */ : "r" (_cp_val)); br
 399:../lib/io_driver.c **** //		case ADR_FB:     asm volatile ("mcr p15,0,%0, c9, c9,0" : /* no outputs */ : "r" (_cp_val)); br
 400:../lib/io_driver.c **** //		case 10:         asm volatile ("mcr p15,0,%0,c10,c10,0" : /* no outputs */ : "r" (_cp_val)); br
 401:../lib/io_driver.c **** 		case LFSR_POLY:  asm volatile ("mcr p15,0,%0,c11,c11,0" : /* no outputs */ : "r" (_cp_val)); brea
 787              		mcr p15,0,r0,c13,c13,0
 788              	.L138:
 789              		mov	pc, lr
 790              	.L133:
 791              		.loc 1 409 0
 792 0468 E20110FF 		mcr p15,0,r0, c6, c6,0
 402:../lib/io_driver.c **** : /* no outputs */ : "r" (_cp_val)); break;
 793              	c, lr
 794 046c E2411006 	.L134:
 795              		.loc 1 414 0
 796              		mcr p15,0,r0,c11,c11,0
 797              		mov	pc, lr
 798              	.L135:
 799 0470 E3510007 		.loc 1 415 0
 800 0474 979FF101 		mcr p15,0,r0,c12,c12,0
 801 0478 EA000008 		mov	pc, lr
 802              	.LFE20:
 804 047c 000004A4 		.align	2
 805 0480 000004A0 		.global	uart0_printf
 807 0488 000004A0 	uart0_printf:
 808 048c 000004A0 	.LFB25:
 809 0490 000004AC 		.file 2 "../lib/uart.c"
 810 0494 000004B4 		.loc 2 7 0
 811 0498 0000049C 		@ args = 0, pretend = 0, frame = 0
 812              		@ frame_needed = 0, uses_anonymous_args = 0
 403:../lib/io_driver.c **** : /* no outputs */ : "r" (_cp_val)); break;
 404:../lib/io_driver.c **** 		case LFSR_DATA:  asm volatile ("mcr p15,0,%0,c12,c12,0" : /* no outputs */ : "r" (_cp_val)); brea
 405:../lib/io_driver.c **** 		case SYS_IO:     asm volatile ("mcr p15,0,%0,c13,c13,0" : /* no outputs */ : "r" (_cp_val)); brea
 406:../lib/io_driver.c **** //		case 14:         asm volatile ("mcr p15,0,%0,c14,c14,0" : /* no outputs */ : "r" (_cp_val)); br
 407:../lib/io_driver.c **** //		case 15:         asm volatile ("mcr p15,0,%0,c15,c15,0" : /* no outputs */ : "r" (_cp_val)); br
 408:../lib/io_driver.c **** 		default:         break;
 409:../lib/io_driver.c **** 	}
 410:../lib/io_driver.c **** }
 411:../lib/io_driver.c **** // ******************************************************************************
 412:../lib/io_driver.c **** // read CMSR value
 413:../lib/io_driver.c ****    static inline unsigned long get_cmsr(void)
 414:../lib/io_driver.c **** // ******************************************************************************
 415:../lib/io_driver.c **** {
 416:../lib/io_driver.c **** 	unsigned long _cmsr;
 813              	{r4, lr}
 814 049c EE0D0F1D 	.LCFI2:
 815              		.loc 2 7 0
 816 04a0 E1A0F00E 		mov	r4, r0
 817              		.loc 2 10 0
 818              		ldrb	r0, [r0, #0]	@ zero_extendqisi2
 819 04a4 EE060F16 	.LVL83:
 820 04a8 E1A0F00E 		cmp	r0, #0
 821              		bne	.L144
 822              		b	.L140
 823 04ac EE0B0F1B 	.LVL84:
 824 04b0 E1A0F00E 	.L146:
 825              		ldrb	r0, [r4, #1]!	@ zero_extendqisi2
 826              	.LVL85:
 827 04b4 EE0C0F1C 		cmp	r0, #0
 828 04b8 E1A0F00E 		beq	.L140
 829              	.L144:
 830              		.loc 2 11 0
 831              		bl	io_uart0_send_byte
 832              	.LVL86:
 833              		cmp	r0, #0
 834              		bgt	.L146
 835              	.LVL87:
 836              	.L140:
   1:../lib/uart.c **** #include "uart.h"
   2:../lib/uart.c **** 
   3:../lib/uart.c **** // ############################################################################################
   4:../lib/uart.c **** // Print text string via UART 0
   5:../lib/uart.c ****    const char *uart0_printf(const char *string)
   6:../lib/uart.c **** // ############################################################################################
   7:../lib/uart.c **** {
 837              	
 838              	.LVL88:
 839              		ldmfd	sp!, {r4, pc}
 840              	.LFE25:
 842              		.section	.rodata
 843              		.align	2
 844 04c0 E1A04000 	.LC0:
   8:../lib/uart.c **** #######################################
   9:../lib/uart.c **** {
  10:../lib/uart.c **** 	char ch;
 845              		"\000\000"
 846 04c4 E5D00000 		.text
 847              		.align	2
 848 04c8 E3500000 		.global	uart0_scanf
 850 04d0 EA000005 	uart0_scanf:
 851              	.LFB26:
 852              		.loc 2 22 0
 853 04d4 E5F40001 		@ args = 0, pretend = 0, frame = 0
 854              		@ frame_needed = 0, uses_anonymous_args = 0
 855 04d8 E3500000 	.LVL89:
 856 04dc 0A000002 		stmfd	sp!, {r4, r5, r6, lr}
 857              	.LCFI3:
  11:../lib/uart.c **** ############################
 858              		subs	r4, r1, #0
 859 04e0 EBFFFFFE 		.loc 2 22 0
 860              		mov	r5, r0
 861 04e4 E3500000 		and	r6, r2, #255
 862 04e8 CAFFFFF9 		.loc 2 25 0
 863              		ble	.L148
 864              	.LVL90:
  12:../lib/uart.c **** ##########################################
  13:../lib/uart.c **** {
  14:../lib/uart.c **** 	char ch;
  15:../lib/uart.c **** 
  16:../lib/uart.c **** 	while ((ch = *string)){
 865              		.loc 2 26 0
 866 04ec E1A00004 		bl	io_uart0_read_byte
 867              	.LVL91:
 868 04f0 E8BD8010 	.LVL92:
 869              		.loc 2 27 0
 870              		cmn	r0, #1
 871              		.loc 2 28 0
 872              		and	r3, r0, #255
 873              	.LVL93:
 874 0000 0000     		.loc 2 27 0
 875 0002 0000     		beq	.L150
 876              		.loc 2 30 0
 877              		cmp	r6, #1
 878              	.LVL94:
 879              		.loc 2 29 0
 880              		strb	r3, [r5, #0]
  17:../lib/uart.c **** 
  18:../lib/uart.c **** {
  19:../lib/uart.c **** 	char ch;
  20:../lib/uart.c **** 
  21:../lib/uart.c **** 	while ((ch = *string)){
  22:../lib/uart.c **** 		if (io_uart0_send_byte(ch)<=0)
 881              	31 0
 882              		mov	r0, r3
 883              	.LVL96:
 884              		.loc 2 29 0
 885 04f4 E92D4070 		add	r5, r5, #1
 886              		.loc 2 30 0
  23:../lib/uart.c **** g)){
  24:../lib/uart.c **** 		if (io_uart0_send_byte(ch)<=0)
  25:../lib/uart.c **** 			break;
 887              	L157
 888 04f8 E2514000 	.LVL97:
 889              	.L152:
 890 04fc E1A05000 		.loc 2 32 0
 891 0500 E20260FF 		sub	r4, r4, #1
 892              	.LVL98:
 893 0504 DA00000B 	.L150:
 894              		.loc 2 25 0
 895              		cmp	r4, #0
  26:../lib/uart.c **** io_uart0_send_byte(ch)<=0)
 896              	5
 897 0508 EBFFFFFE 	.LVL99:
 898              	.L148:
 899              		.loc 2 35 0
  27:../lib/uart.c **** g)){
 900              		r3, .L158
 901 050c E3700001 	.LVL100:
  28:../lib/uart.c **** 
 902              	trb	r3, [r5, #0]
 903 0510 E20030FF 		.loc 2 36 0
 904              		ldmfd	sp!, {r4, r5, r6, pc}
 905              	.LVL101:
 906 0514 0A000005 	.L157:
  29:../lib/uart.c **** ##########################################
  30:../lib/uart.c **** {
 907              	 2 31 0
 908 0518 E3560001 		bl	io_uart0_send_byte
 909              	.LVL102:
 910              		b	.L152
 911 051c E5C53000 	.L159:
 912              		.align	2
  31:../lib/uart.c **** #######################################
 913              	
 914 0520 E1A00003 		.word	.LC0
 915              	.LFE26:
 917 0524 E2855001 		.align	2
 918              		.global	uart0_print_buffer
 920              	uart0_print_buffer:
 921              	.LFB27:
  32:../lib/uart.c **** ##########################################
 922              	42 0
 923 052c E2444001 		@ args = 0, pretend = 0, frame = 0
 924              		@ frame_needed = 0, uses_anonymous_args = 0
 925              	.LVL103:
 926              		stmfd	sp!, {r4, r5, lr}
 927 0530 E3540000 	.LCFI4:
 928 0534 CAFFFFF3 		.loc 2 44 0
 929              		subs	r4, r1, #0
 930              		.loc 2 42 0
  33:../lib/uart.c **** ##########################################
  34:../lib/uart.c **** {
  35:../lib/uart.c **** 	char ch;
 931              	r0
 932 0538 E59F300C 		.loc 2 44 0
 933              		ldmlefd	sp!, {r4, r5, pc}
 934 053c E5C53000 	.LVL104:
  36:../lib/uart.c **** ############################
 935              	4:
 936 0540 E8BD8070 		.loc 2 46 0
 937              		ldrb	r0, [r5], #1	@ zero_extendqisi2
 938              	.LVL105:
 939              		bl	io_uart0_send_byte
 940 0544 EBFFFFFE 	.LVL106:
 941              		.loc 2 44 0
 942 0548 EAFFFFF7 		subs	r4, r4, #1
 943              		bne	.L164
 944              		ldmfd	sp!, {r4, r5, pc}
 945              	.LFE27:
 947              		.align	2
 948              		.global	long_to_hex_string
 950              	long_to_hex_string:
 951              	.LFB28:
 952              		.file 3 "../lib/utilities.c"
 953              		.loc 3 9 0
  37:../lib/uart.c **** ##########################################
  38:../lib/uart.c **** {
  39:../lib/uart.c **** 	char ch;
  40:../lib/uart.c **** 
  41:../lib/uart.c **** 	while ((ch = *string)){
  42:../lib/uart.c **** 		if (io_uart0_send_byte(ch)<=0)
 954              	d = 0, frame = 0
 955              		@ frame_needed = 0, uses_anonymous_args = 0
 956              	.LVL107:
 957              		stmfd	sp!, {r4, lr}
 958 0550 E92D4030 	.LCFI5:
 959              		.loc 3 9 0
  43:../lib/uart.c **** g)){
  44:../lib/uart.c **** 		if (io_uart0_send_byte(ch)<=0)
 960              	4, r2, #255
 961 0554 E2514000 		.loc 3 14 0
 962              		cmp	r4, #8
 963 0558 E1A05000 		movhi	r4, #8
 964              		bhi	.L169
 965 055c D8BD8030 	.LVL108:
 966              		.loc 3 16 0
 967              		cmp	r4, #0
  45:../lib/uart.c **** g)){
  46:../lib/uart.c **** 		if (io_uart0_send_byte(ch)<=0)
 968              	39 0
 969 0560 E4D50001 		moveq	r4, #1
 970              	.L169:
 971 0564 EBFFFFFE 		mov	r2, r1
 972              	.LVL109:
 973              		mov	lr, r4
 974 0568 E2544001 	.LVL110:
 975 056c 1AFFFFFB 	.L171:
 976 0570 E8BD8030 		.loc 3 22 0
 977              		mov	r3, lr, asl #2
 978              		.loc 3 21 0
 979              		cmp	lr, #1
 980              		.loc 3 22 0
 981              		sub	r3, r3, #4
 982              		.loc 3 21 0
 983              		mov	ip, r0
 984              	.LVL111:
   1:../lib/utilities.c **** #include "utilities.h"
   2:../lib/utilities.c **** 
   3:../lib/utilities.c **** // ############################################################################################
   4:../lib/utilities.c **** // Convert 4/8/12/16/20/24/28/32 bit hexadecimal value to ASCII string
   5:../lib/utilities.c ****    void long_to_hex_string(unsigned long data,    // max 32 bit data word
   6:../lib/utilities.c ****                            unsigned char *buffer, // buffer to store the string
   7:../lib/utilities.c **** 						   unsigned char numbers) // number of places, max 8
   8:../lib/utilities.c **** // ############################################################################################
   9:../lib/utilities.c **** {
 985              	hi	ip, r0, lsr r3
 986              		.loc 3 26 0
 987              		sub	r3, lr, #1
 988              		.loc 3 25 0
 989 0574 E92D4010 		and	ip, ip, #15
 990              	.LVL112:
 991              		.loc 3 26 0
 992 0578 E20240FF 		and	lr, r3, #255
  10:../lib/utilities.c **** #######################################################################
  11:../lib/utilities.c **** {
  12:../lib/utilities.c **** 	unsigned char temp_char = 0;
  13:../lib/utilities.c **** 	unsigned long temp_data = 0;
  14:../lib/utilities.c **** 
 993              	29 0
 994 057c E3540008 		cmp	ip, #9
 995 0580 83A04008 		.loc 3 30 0
 996 0584 8A000001 		add	r3, ip, #48
 997              	.LVL113:
  15:../lib/utilities.c **** #######
  16:../lib/utilities.c **** {
 998              	 3 32 0
 999 0588 E3540000 		addhi	r3, ip, #55
  17:../lib/utilities.c **** #######################################################################
  18:../lib/utilities.c **** {
  19:../lib/utilities.c **** 	unsigned char temp_char = 0;
  20:../lib/utilities.c **** 	unsigned long temp_data = 0;
  21:../lib/utilities.c **** 
  22:../lib/utilities.c **** 	// fit into range
  23:../lib/utilities.c **** 	if(numbers > 8)
  24:../lib/utilities.c **** 		numbers = 8;
  25:../lib/utilities.c **** 	if(numbers < 1)
  26:../lib/utilities.c **** 		numbers = 1;
  27:../lib/utilities.c **** 
  28:../lib/utilities.c **** 	while(numbers > 0){
  29:../lib/utilities.c **** 		// isolate one 4-bit value
  30:../lib/utilities.c **** 		if(numbers > 1)
  31:../lib/utilities.c **** 			temp_data = data >> ((numbers-1)*4);
  32:../lib/utilities.c **** 		else
  33:../lib/utilities.c **** 			temp_data = data;
  34:../lib/utilities.c **** 		temp_data = temp_data & 0x0000000F;
  35:../lib/utilities.c **** 		numbers--;
  36:../lib/utilities.c **** 
  37:../lib/utilities.c **** 		// convert 4-bit value temp_data to char temp_char
  38:../lib/utilities.c **** 		if(temp_data < 10)
  39:../lib/utilities.c **** 			temp_char = '0' + temp_data;
 1000              	loc 3 19 0
 1001 058c 03A04001 		cmp	lr, #0
 1002              		.loc 3 35 0
 1003 0590 E1A02001 		strb	r3, [r2], #1
 1004              		.loc 3 19 0
 1005 0594 E1A0E004 		bne	.L171
 1006              		.loc 3 38 0
 1007              		sub	r3, r4, #1
 1008              	.LVL114:
 1009 0598 E1A0310E 		and	r3, r3, #255
 1010              		add	r3, r1, r3
 1011 059c E35E0001 		strb	lr, [r3, #1]
 1012              		.loc 3 39 0
 1013 05a0 E2433004 		ldmfd	sp!, {r4, pc}
 1014              	.LFE28:
 1016              		.align	2
 1017              		.global	get_adc
 1019              	get_adc:
 1020 05ac E24E3001 	.LFB29:
 1021              		.loc 3 45 0
 1022 05b0 E20CC00F 		@ args = 0, pretend = 0, frame = 0
 1023              		@ frame_needed = 0, uses_anonymous_args = 0
 1024              	.LVL115:
 1025 05b4 E203E0FF 		stmfd	sp!, {r4, lr}
 1026              	.LCFI6:
 1027 05b8 E35C0009 		.loc 3 45 0
 1028              		mov	r4, r0
 1029 05bc E28C3030 		.loc 3 48 0
 1030              		cmp	r4, #7
 1031              		.loc 3 52 0
 1032 05c0 828C3037 		mov	r1, #16
 1033              		mov	r0, #1
 1034 05c4 E35E0000 	.LVL116:
 1035              		.loc 3 48 0
 1036 05c8 E4C23001 		bls	.L188
 1037              		.loc 3 58 0
 1038 05cc 1AFFFFF1 		mov	r0, #0
 1039              		ldmfd	sp!, {r4, pc}
 1040 05d0 E2443001 	.L188:
 1041              		.loc 3 52 0
 1042 05d4 E20330FF 		bl	io_spi0_config
 1043 05d8 E0813003 		.loc 3 53 0
 1044 05dc E5C3E001 		mov	r0, #6
 1045              		bl	io_spi0_enable
 1046 05e0 E8BD8010 		.loc 3 56 0
 1047              		mov	r0, #0
 1048              		bl	io_spi0_trans
 1049              		.loc 3 57 0
 1050              		mov	r0, r4, asl #11
 1051              		.loc 3 58 0
 1052              		ldmfd	sp!, {r4, lr}
 1053              		.loc 3 57 0
  40:../lib/utilities.c **** 		if(temp_data < 10)
  41:../lib/utilities.c **** 			temp_char = '0' + temp_data;
  42:../lib/utilities.c **** 		else
  43:../lib/utilities.c **** 			temp_char = 'A' + temp_data - 10;
  44:../lib/utilities.c **** 
  45:../lib/utilities.c **** 		// save character
 1054              	lign	2
 1055              		.global	delay
 1057              	delay:
 1058 05e4 E92D4010 	.LFB30:
 1059              		.loc 3 64 0
 1060              		@ args = 0, pretend = 0, frame = 0
 1061 05e8 E1A04000 		@ frame_needed = 0, uses_anonymous_args = 0
  46:../lib/utilities.c **** har = 'A' + temp_data - 10;
  47:../lib/utilities.c **** 
  48:../lib/utilities.c **** 		// save character
 1062              	register save eliminated.
 1063 05ec E3540007 	.LVL117:
  49:../lib/utilities.c **** har = 'A' + temp_data - 10;
  50:../lib/utilities.c **** 
  51:../lib/utilities.c **** 		// save character
  52:../lib/utilities.c **** 		*buffer++ = temp_char;
 1064              	loc 3 65 0
 1065 05f0 E3A01010 		rsb	r3, r0, r0, asl #5
 1066 05f4 E3A00001 		add	r0, r0, r3, asl #2
 1067              	.LVL118:
 1068              		add	r0, r0, r0, asl #2
 1069 05f8 9A000001 		mov	r0, r0, asl #4
  53:../lib/utilities.c **** ;
  54:../lib/utilities.c **** 
  55:../lib/utilities.c **** 		// save character
  56:../lib/utilities.c **** 		*buffer++ = temp_char;
  57:../lib/utilities.c **** 	}
  58:../lib/utilities.c **** 
 1070              	9:
 1071 05fc E3A00000 		.loc 3 66 0
 1072 0600 E8BD8010 		cmp	r0, #0
 1073              		.loc 3 64 0
 1074              		@ lr needed for prologue
 1075 0604 EBFFFFFE 		.loc 3 66 0
 1076              		movle	pc, lr
 1077 0608 E3A00006 	.L193:
 1078 060c EBFFFFFE 		.loc 3 67 0
 1079              		NOP
 1080 0610 E3A00000 		.loc 3 66 0
 1081 0614 EBFFFFFE 		subs	r0, r0, #1
 1082              		bne	.L193
 1083 0618 E1A00584 		mov	pc, lr
 1084              	.LFE30:
 1086              		.align	2
 1087 0620 EAFFFFFE 		.global	string_cmpc
 1089              	string_cmpc:
 1090              	.LFB31:
 1091              		.loc 3 76 0
 1092              		@ args = 0, pretend = 0, frame = 0
 1093              		@ frame_needed = 0, uses_anonymous_args = 0
 1094              		@ link register save eliminated.
  59:../lib/utilities.c **** / save character
  60:../lib/utilities.c **** 		*buffer++ = temp_char;
  61:../lib/utilities.c **** 	}
  62:../lib/utilities.c **** 
  63:../lib/utilities.c **** 	*buffer++ = 0; // terminate string
  64:../lib/utilities.c **** }
 1095              	ds	ip, r2, #255
 1096              		.loc 3 76 0
 1097              		@ lr needed for prologue
 1098              		.loc 3 77 0
 1099              		beq	.L196
  65:../lib/utilities.c **** ;
 1100              	21:
 1101 0624 E0603280 		.loc 3 78 0
 1102 0628 E0800103 		ldrb	r2, [r0, #0]	@ zero_extendqisi2
 1103              		ldrb	r3, [r1, #0]	@ zero_extendqisi2
 1104 062c E0800100 		cmp	r2, r3
 1105 0630 E1A00200 		beq	.L200
 1106              		b	.L198
  66:../lib/utilities.c **** ;
 1107              	.LVL122:
 1108 0634 E3500000 		ldrb	r2, [r0, #1]!	@ zero_extendqisi2
 1109              	.LVL123:
 1110              		ldrb	r3, [r1, #1]!	@ zero_extendqisi2
 1111              		cmp	r2, r3
 1112 0638 D1A0F00E 		bne	.L198
 1113              	.LVL124:
  67:../lib/utilities.c **** _data;
 1114              		.loc 3 80 0
 1115 063c E1A00000 		sub	r3, ip, #1
 1116              		.loc 3 77 0
 1117 0640 E2500001 		ands	ip, r3, #255
 1118 0644 1AFFFFFC 		bne	.L201
 1119 0648 E1A0F00E 	.LVL125:
 1120              	.L196:
 1121              		mov	r0, #1
 1122              	.LVL126:
 1123              		.loc 3 83 0
 1124              		mov	pc, lr
 1125              	.LVL127:
 1126              	.L198:
  68:../lib/utilities.c **** 		if(temp_data < 10)
  69:../lib/utilities.c **** 			temp_char = '0' + temp_data;
  70:../lib/utilities.c **** 		else
  71:../lib/utilities.c **** 			temp_char = 'A' + temp_data - 10;
  72:../lib/utilities.c **** 
  73:../lib/utilities.c **** 		// save character
  74:../lib/utilities.c **** 		*buffer++ = temp_char;
  75:../lib/utilities.c **** 	}
  76:../lib/utilities.c **** 
 1127              		mov	r0, #0
 1128              	.LVL128:
 1129              		mov	pc, lr
 1130              	.LFE31:
  77:../lib/utilities.c **** / save character
 1132              	gn	2
 1133 064c E212C0FF 		.global	hex_string_to_long
 1135              	hex_string_to_long:
 1136              	.LFB32:
 1137 0650 0A00000B 		.file 4 "main.c"
 1138              		.loc 4 11 0
  78:../lib/utilities.c **** har = 'A' + temp_data - 10;
 1139              	 = 0, pretend = 0, frame = 0
 1140 0654 E5D02000 		@ frame_needed = 0, uses_anonymous_args = 0
 1141 0658 E5D13000 	.LVL129:
 1142 065c E1520003 		stmfd	sp!, {r4, r5, lr}
 1143 0660 0A000004 	.LCFI7:
 1144 0664 EA000008 		.loc 4 15 0
 1145              		mov	r4, r1, asl #1
 1146              		cmp	r4, #0
 1147 0668 E5F02001 		.loc 4 11 0
 1148              		mov	r5, r0
 1149 066c E5F13001 		.loc 4 15 0
 1150 0670 E1520003 		movle	r0, #0
 1151 0674 1A000004 	.LVL130:
 1152              		ldmlefd	sp!, {r4, r5, pc}
 1153              		mov	r0, #0
  79:../lib/utilities.c **** _data;
  80:../lib/utilities.c **** 		else
 1154              	L131:
 1155 0678 E24C3001 	.L208:
 1156              		.loc 4 16 0
 1157 067c E213C0FF 		ldrb	r2, [r1, r5]	@ zero_extendqisi2
 1158 0680 1AFFFFF8 		sub	r3, r2, #48
 1159              		.loc 4 17 0
 1160              		add	ip, r2, r0, asl #4
 1161 0684 E3A00001 		.loc 4 16 0
 1162              		cmp	r3, #9
  81:../lib/utilities.c **** p_data < 10)
  82:../lib/utilities.c **** 			temp_char = '0' + temp_data;
  83:../lib/utilities.c **** 		else
 1163              	8 0
 1164 0688 E1A0F00E 		sub	lr, r2, #65
 1165              		.loc 4 17 0
 1166              		subls	r0, ip, #48
 1167              		.loc 4 16 0
 1168 068c E3A00000 		bls	.L211
 1169              		.loc 4 19 0
 1170 0690 E1A0F00E 		add	r3, r2, r0, asl #4
 1171              		.loc 4 18 0
 1172              		cmp	lr, #5
 1173              		.loc 4 20 0
 1174              		sub	ip, r2, #97
 1175              		.loc 4 19 0
 1176              		subls	r0, r3, #55
 1177              		.loc 4 18 0
 1178              		bls	.L211
   1:main.c        **** #include "../lib/storm_core.h"
   2:main.c        **** #include "../lib/storm_soc_basic.h"
   3:main.c        **** #include "../lib/io_driver.c"
   4:main.c        **** #include "../lib/uart.c"
   5:main.c        **** #include "../lib/utilities.c"
   6:main.c        **** 
   7:main.c        **** //#define JUMPADDRESS 0x00000000
   8:main.c        **** #define JUMPADDRESS 0x04000000
   9:main.c        **** 
  10:main.c        **** unsigned long int hex_string_to_long ( char *hexstr, int charlen )
  11:main.c        **** {
 1179              	d	r3, r2, r0, asl #4
 1180              		.loc 4 20 0
 1181              		cmp	ip, #5
 1182              		.loc 4 21 0
 1183 0694 E92D4030 		subls	r0, r3, #87
 1184              	.L211:
  12:main.c        **** ong int hexval =  0 ;
  13:main.c        **** 	int i;
  14:main.c        **** 
  15:main.c        **** 	for (i=0 ; i< (charlen*2) ; i++ ) {
 1185              	4 15 0
 1186 0698 E1A04081 		add	r1, r1, #1
 1187 069c E3540000 		cmp	r1, r4
 1188              		bne	.L208
 1189 06a0 E1A05000 	.LVL132:
 1190              		.loc 4 25 0
 1191 06a4 D3A00000 		ldmfd	sp!, {r4, r5, pc}
 1192              	.LFE32:
 1194 06ac E3A00000 		.align	2
 1195 06b0 E1A01000 		.global	qbytes_to_long
 1197              	qbytes_to_long:
  16:main.c        ****  (( hexstr[i] >= 48 ) & (hexstr[i] <= 57 )) 
 1198              	 4 28 0
 1199 06b4 E7D12005 		@ args = 0, pretend = 0, frame = 0
 1200 06b8 E2423030 		@ frame_needed = 0, uses_anonymous_args = 0
  17:main.c        **** 		hexval = (hexval <<4 ) + hexstr[i] - (int) '0';
 1201              	link register save eliminated.
 1202 06bc E082C200 	.LVL133:
 1203              		ldrb	r3, [r0, #3]	@ zero_extendqisi2
 1204 06c0 E3530009 		ldrb	r2, [r0, #2]	@ zero_extendqisi2
  18:main.c        **** 	else if (( hexstr[i] >= 65 ) & ( hexstr[i] <= 70 )) 
 1205              	b	r1, [r0, #0]	@ zero_extendqisi2
 1206 06c4 E242E041 		orr	r3, r3, r2, asl #8
 1207              		ldrb	r0, [r0, #1]	@ zero_extendqisi2
 1208 06c8 924C0030 	.LVL134:
 1209              		orr	r3, r3, r1, asl #24
 1210 06cc 9A000007 		.loc 4 38 0
  19:main.c        **** 		hexval = (hexval <<4 ) + hexstr[i] + 10 - (int) 'A';
 1211              	0, r3, r0, asl #16
 1212 06d0 E0823200 		.loc 4 28 0
 1213              		@ lr needed for prologue
 1214 06d4 E35E0005 		.loc 4 38 0
  20:main.c        **** 	else if (( hexstr[i] >= 97 ) & ( hexstr[i] <= 102)) 
 1215              		pc, lr
 1216 06d8 E242C061 	.LFE33:
 1218 06dc 92430037 		.section	.rodata.str1.4,"aMS",%progbits,1
 1219              		.align	2
 1220 06e0 9A000002 	.LC1:
  21:main.c        **** 		hexval = (hexval <<4 ) + hexstr[i] +10 - (int) 'a';
 1221              	i	" 0 - boot from core RAM (start application)\015\012"
 1222 06e4 E0823200 		.ascii	" 1 - program core RAM via UART_0\015\012 2 - core R"
 1223              		.ascii	"AM dump\015\012\000"
 1224 06e8 E35C0005 		.align	2
 1225              	.LC2:
 1226 06ec 92430057 		.ascii	" 3 - boot from I2C EEPROM\015\012 4 - program I2C E"
 1227              		.ascii	"EPROM via UART_0\015\012 5 - show content of I2C EE"
 1228              		.ascii	"PROM\015\012\000"
 1229 06f0 E2811001 		.align	2
 1230 06f4 E1510004 	.LC3:
 1231 06f8 1AFFFFED 		.ascii	" a - automatic boot configuration\015\012 h - help\015"
 1232              		.ascii	"\012 r - restart system\015\012\015\012Select: \000"
  22:main.c        **** } //for
  23:main.c        ****  
  24:main.c        **** 	return hexval;
  25:main.c        **** }
 1233              	gn	2
 1234 06fc E8BD8030 		.global	print_intro
 1236              	print_intro:
 1237              	.LFB34:
 1238              		.loc 4 40 0
 1239              		@ args = 0, pretend = 0, frame = 0
 1240              		@ frame_needed = 0, uses_anonymous_args = 0
 1241              		str	lr, [sp, #-4]!
  26:main.c        **** igned long int qbytes_to_long ( unsigned char *buffer )
  27:main.c        **** {
  28:main.c        **** 	unsigned char d = buffer[0];
 1242              	.loc 4 43 0
 1243              		ldr	r0, .L221
 1244              		bl	uart0_printf
 1245              		.loc 4 44 0
 1246              		ldr	r0, .L221+4
 1247 0700 E5D03003 		bl	uart0_printf
 1248 0704 E5D02002 		.loc 4 45 0
 1249 0708 E5D01000 		ldr	r0, .L221+8
 1250 070c E1833402 		.loc 4 46 0
 1251 0710 E5D00001 		ldr	lr, [sp], #4
 1252              		.loc 4 45 0
 1253 0714 E1833C01 		b	uart0_printf
  29:main.c        **** signed char c = buffer[1];
  30:main.c        **** 	unsigned char b = buffer[2];
  31:main.c        **** 	unsigned char a = buffer[3];
  32:main.c        **** 	unsigned long n;
  33:main.c        **** 
  34:main.c        **** 
  35:main.c        **** 	n = a|(b<<8)|(c<<16)|(d<<24);
  36:main.c        **** 	return n;
  37:main.c        **** }
  38:main.c        **** 
 1254              	gn	2
 1255 0718 E1830800 	.L221:
 1256              		.word	.LC1
 1257              		.word	.LC2
 1258              		.word	.LC3
 1259 071c E1A0F00E 	.LFE34:
 1261              		.section	.rodata.str1.4
 1262              		.align	2
 1263              	.LC4:
 1264              		.ascii	"\015\012\015\012\015\012+--------------------------"
 1265 0000 2030202D 		.ascii	"--------------------------------------+\015\012\000"
 1265      20626F6F 
 1265      74206672 
 1265      6F6D2063 
 1265      6F726520 
 1266 002d 2031202D 		.align	2
 1266      2070726F 
 1266      6772616D 
 1266      20636F72 
 1266      65205241 
 1267 005a 414D2064 	.LC5:
 1267      756D700D 
 1267      0A00
 1268              		.ascii	"|    <<< STORM Core Processor System - By Stephan N"
 1269              		.ascii	"olting >>>    |\015\012\000"
 1270 0064 2033202D 		.align	2
 1270      20626F6F 
 1270      74206672 
 1270      6F6D2049 
 1270      32432045 
 1271 0091 4550524F 	.LC6:
 1271      4D207669 
 1271      61205541 
 1271      52545F30 
 1271      0D0A2035 
 1272 00be 50524F4D 		.ascii	"+--------------------------------------------------"
 1272      0D0A00
 1273 00c5 000000   		.ascii	"--------------+\015\012\000"
 1274              		.align	2
 1275 00c8 2061202D 	.LC7:
 1275      20617574 
 1275      6F6D6174 
 1275      69632062 
 1275      6F6F7420 
 1276 00f5 0A207220 		.ascii	"|         Bootloader for STORM SoC   Version: 20120"
 1276      2D207265 
 1276      73746172 
 1276      74207379 
 1276      7374656D 
 1277              		.ascii	"524-D         |\015\012\000"
 1278              		.align	2
 1279              	.LC8:
 1280              		.ascii	"|               Contact: stnolting@googlemail.com  "
 1281              		.ascii	"              |\015\012\000"
 1282              		.align	2
  39:main.c        **** _intro(){
  40:main.c        **** 
 1283              	-------------------------------------"
 1284              		.ascii	"--------------+\015\012\015\012\000"
 1285              		.align	2
 1286 0720 E52DE004 	.LC10:
 1287              		.ascii	" < Welcome to the STORM SoC bootloader console! >\015"
  41:main.c        **** / Console menu
  42:main.c        **** 	uart0_printf(" 0 - boot from core RAM (start application)\r\n 1 - program core RAM via UART_0\r\n 
  43:main.c        **** 	uart0_printf(" 3 - boot from I2C EEPROM\r\n 4 - program I2C EEPROM via UART_0\r\n 5 - show content
 1288              	ii	"\012 < Select an operation from the menu below or p"
 1289 0724 E59F0014 		.ascii	"ress >\015\012\000"
 1290 0728 EBFFFFFE 		.align	2
  44:main.c        **** rt0_printf(" a - automatic boot configuration\r\n h - help\r\n r - restart system\r\n\r\nSelect: ")
 1291              	11:
 1292 072c E59F0010 		.ascii	" < the boot key for immediate application start. >\015"
 1293 0730 EBFFFFFE 		.ascii	"\012\015\012\000"
  45:main.c        **** 
 1294              	lign	2
 1295 0734 E59F000C 	.LC12:
  46:main.c        **** 
 1296              	ascii	" Load Address: \000"
 1297 0738 E49DE004 		.align	2
 1298              	.LC13:
 1299 073c EAFFFFFE 		.ascii	"\012\015\000"
 1300              		.align	2
 1301              	.LC14:
 1302              		.ascii	"\015\012\015\012Application will start automaticall"
 1303 0740 00000000 		.ascii	"y after download.\015\012-> Waiting for 'storm_prog"
 1304 0744 00000064 		.ascii	"ram.bin' in byte-stream mode...\000"
 1305 0748 000000C8 		.align	2
 1306              	.LC15:
 1307              		.ascii	" ERROR! Program file too big!\015\012\015\012\000"
 1308              		.align	2
 1309 0116 0000     	.LC16:
 1310              		.ascii	" Invalid programming file!\015\012\015\012Select: \000"
 1311 0118 0D0A0D0A 		.align	2
 1311      0D0A2B2D 
 1311      2D2D2D2D 
 1311      2D2D2D2D 
 1311      2D2D2D2D 
 1312 0139 2D2D2D2D 	.LC17:
 1312      2D2D2D2D 
 1312      2D2D2D2D 
 1312      2D2D2D2D 
 1312      2D2D2D2D 
 1313 0163 00       		.ascii	"\015\012\015\012Abort dumping by pressing any key.\015"
 1314              		.ascii	"\012Press any key to continue.\015\012\015\012\000"
 1315 0164 7C202020 		.align	2
 1315      203C3C3C 
 1315      2053544F 
 1315      524D2043 
 1315      6F726520 
 1316 0197 6F6C7469 	.LC18:
 1316      6E67203E 
 1316      3E3E2020 
 1316      20207C0D 
 1316      0A00
 1317 01a9 000000   		.ascii	"\015\012\015\012Dumping completed.\015\012\015\012S"
 1318              		.ascii	"elect: \000"
 1319 01ac 2B2D2D2D 		.align	2
 1319      2D2D2D2D 
 1319      2D2D2D2D 
 1319      2D2D2D2D 
 1319      2D2D2D2D 
 1320 01df 2D2D2D2D 	.LC19:
 1320      2D2D2D2D 
 1320      2D2D2D2D 
 1320      2D2D2B0D 
 1320      0A00
 1321 01f1 000000   		.ascii	"\015\012\015\012Enter device address (2x hex_chars,"
 1322              		.ascii	" set LSB to '0'): \000"
 1323 01f4 7C202020 		.align	2
 1323      20202020 
 1323      2020426F 
 1323      6F746C6F 
 1323      61646572 
 1324 0227 3532342D 	.LC20:
 1324      44202020 
 1324      20202020 
 1324      20207C0D 
 1324      0A00
 1325 0239 000000   		.ascii	" Invalid address!\015\012\015\012Select: \000"
 1326              		.align	2
 1327 023c 7C202020 	.LC21:
 1327      20202020 
 1327      20202020 
 1327      20202020 
 1327      436F6E74 
 1328 026f 20202020 		.ascii	"\015\012Application will start automatically after "
 1328      20202020 
 1328      20202020 
 1328      20207C0D 
 1328      0A00
 1329 0281 000000   		.ascii	"upload.\015\012-> Loading boot image...\000"
 1330              		.align	2
 1331 0284 2B2D2D2D 	.LC22:
 1331      2D2D2D2D 
 1331      2D2D2D2D 
 1331      2D2D2D2D 
 1331      2D2D2D2D 
 1332 02b7 2D2D2D2D 		.ascii	" Upload complete\015\012\000"
 1332      2D2D2D2D 
 1332      2D2D2D2D 
 1332      2D2D2B0D 
 1332      0A0D0A00 
 1333 02cb 00       		.align	2
 1334              	.LC23:
 1335 02cc 203C2057 		.ascii	" Invalid boot device or file!\015\012\015\012Select"
 1335      656C636F 
 1335      6D652074 
 1335      6F207468 
 1335      65205354 
 1336 02fe 0A203C20 		.ascii	": \000"
 1336      53656C65 
 1336      63742061 
 1336      6E206F70 
 1336      65726174 
 1337 032e 72657373 		.align	2
 1337      203E0D0A 
 1337      00
 1338 0337 00       	.LC24:
 1339              		.ascii	"\015\012Invalid address!\015\012\015\012Select: \000"
 1340 0338 203C2074 		.align	2
 1340      68652062 
 1340      6F6F7420 
 1340      6B657920 
 1340      666F7220 
 1341 036b 0A0D0A00 	.LC25:
 1342 036f 00       		.ascii	"\015\012Data will overwrite RAM content!\015\012-> "
 1343              		.ascii	"Waiting for 'storm_program.bin' in byte-stream mode"
 1344 0370 204C6F61 		.ascii	"...\000"
 1344      64204164 
 1344      64726573 
 1344      733A2000 
 1345              		.align	2
 1346              	.LC26:
 1347 0380 0A0D00   		.ascii	" Download completed\015\012\000"
 1348 0383 00       		.align	2
 1349              	.LC27:
 1350 0384 0D0A0D0A 		.ascii	"Writing buffer to i2c EEPROM...\000"
 1350      4170706C 
 1350      69636174 
 1350      696F6E20 
 1350      77696C6C 
 1351 03ab 79206166 		.align	2
 1351      74657220 
 1351      646F776E 
 1351      6C6F6164 
 1351      2E0D0A2D 
 1352 03d8 72616D2E 	.LC28:
 1352      62696E27 
 1352      20696E20 
 1352      62797465 
 1352      2D737472 
 1353              		.ascii	" Completed\015\012\015\012\000"
 1354              		.align	2
 1355 03f8 20455252 	.LC29:
 1355      4F522120 
 1355      50726F67 
 1355      72616D20 
 1355      66696C65 
 1356 041a 0000     		.ascii	" Invalid boot device or file!\015\012\015\012\000"
 1357              		.align	2
 1358 041c 20496E76 	.LC30:
 1358      616C6964 
 1358      2070726F 
 1358      6772616D 
 1358      6D696E67 
 1359 0443 00       		.ascii	"Select: \000"
 1360              		.align	2
 1361 0444 0D0A0D0A 	.LC31:
 1361      41626F72 
 1361      74206475 
 1361      6D70696E 
 1361      67206279 
 1362 046b 0A507265 		.ascii	"\015\012\015\012Enter device address (2 hex-chars, "
 1362      73732061 
 1362      6E79206B 
 1362      65792074 
 1362      6F20636F 
 1363 048b 00       		.ascii	"set LSB to '0'): \000"
 1364              		.align	2
 1365 048c 0D0A0D0A 	.LC32:
 1365      44756D70 
 1365      696E6720 
 1365      636F6D70 
 1365      6C657465 
 1366 04a7 656C6563 		.ascii	"\015\012\015\012Abort dumping by pressing any key. "
 1366      743A2000 
 1367 04af 00       		.ascii	"If no data is shown,\015\012\000"
 1368              		.align	2
 1369 04b0 0D0A0D0A 	.LC33:
 1369      456E7465 
 1369      72206465 
 1369      76696365 
 1369      20616464 
 1370 04d7 20736574 		.ascii	"the selected device is not responding. Press any ke"
 1370      204C5342 
 1370      20746F20 
 1370      27302729 
 1370      3A2000
 1371 04ea 0000     		.ascii	"y to continue.\015\012\015\012\000"
 1372              		.align	2
 1373 04ec 20496E76 	.LC34:
 1373      616C6964 
 1373      20616464 
 1373      72657373 
 1373      210D0A0D 
 1374 050a 0000     		.ascii	"\015\012\015\012Automatic boot configuration for po"
 1375              		.ascii	"wer-up:\015\012\000"
 1376 050c 0D0A4170 		.align	2
 1376      706C6963 
 1376      6174696F 
 1376      6E207769 
 1376      6C6C2073 
 1377 0539 75706C6F 	.LC35:
 1377      61642E0D 
 1377      0A2D3E20 
 1377      4C6F6164 
 1377      696E6720 
 1378 055b 00       		.ascii	"[3210] configuration DIP switch\015\012 0000 - Star"
 1379              		.ascii	"t bootloader console\015\012 0001 - Automatic boot "
 1380 055c 2055706C 		.ascii	"from core RAM\015\012\000"
 1380      6F616420 
 1380      636F6D70 
 1380      6C657465 
 1380      0D0A00
 1381 056f 00       		.align	2
 1382              	.LC36:
 1383 0570 20496E76 		.ascii	" 0010 - Automatic boot from I2C EEPROM (Address 0xA"
 1383      616C6964 
 1383      20626F6F 
 1383      74206465 
 1383      76696365 
 1384 0597 3A2000   		.ascii	"0)\015\012\015\012Select: \000"
 1385 059a 0000     		.align	2
 1386              	.LC37:
 1387 059c 0D0A496E 		.ascii	"\015\012\015\012STORM SoC bootloader\015\012\000"
 1387      76616C69 
 1387      64206164 
 1387      64726573 
 1387      73210D0A 
 1388 05bb 00       		.align	2
 1389              	.LC38:
 1390 05bc 0D0A4461 		.ascii	"'0': Execute program in RAM.\015\012\000"
 1390      74612077 
 1390      696C6C20 
 1390      6F766572 
 1390      77726974 
 1391 05e3 57616974 		.align	2
 1391      696E6720 
 1391      666F7220 
 1391      2773746F 
 1391      726D5F70 
 1392 0616 2E2E2E00 	.LC39:
 1393 061a 0000     		.ascii	"'1': Write 'storm_program.bin' to the core's RAM vi"
 1394              		.ascii	"a UART.\015\012\000"
 1395 061c 20446F77 		.align	2
 1395      6E6C6F61 
 1395      6420636F 
 1395      6D706C65 
 1395      7465640D 
 1396 0632 0000     	.LC40:
 1397              		.ascii	"'2': Print current content of complete core RAM.\015"
 1398 0634 57726974 		.ascii	"\012\000"
 1398      696E6720 
 1398      62756666 
 1398      65722074 
 1398      6F206932 
 1399              		.align	2
 1400              	.LC41:
 1401 0654 20436F6D 		.ascii	"'3': Load boot image from EEPROM and start applicat"
 1401      706C6574 
 1401      65640D0A 
 1401      0D0A00
 1402 0663 00       		.ascii	"ion.\015\012\000"
 1403              		.align	2
 1404 0664 20496E76 	.LC42:
 1404      616C6964 
 1404      20626F6F 
 1404      74206465 
 1404      76696365 
 1405 0686 0000     		.ascii	"'4': Write 'storm_program.bin' to I2C EEPROM via UA"
 1406              		.ascii	"RT.\015\012\000"
 1407 0688 53656C65 		.align	2
 1407      63743A20 
 1407      00
 1408 0691 000000   	.LC43:
 1409              		.ascii	"'5': Print content of I2C EEPROM.\015\012\000"
 1410 0694 0D0A0D0A 		.align	2
 1410      456E7465 
 1410      72206465 
 1410      76696365 
 1410      20616464 
 1411 06bb 73657420 	.LC44:
 1411      4C534220 
 1411      746F2027 
 1411      3027293A 
 1411      2000
 1412 06cd 000000   		.ascii	"'a': Show DIP switch configurations for automatic b"
 1413              		.ascii	"oot.\015\012\000"
 1414 06d0 0D0A0D0A 		.align	2
 1414      41626F72 
 1414      74206475 
 1414      6D70696E 
 1414      67206279 
 1415 06f7 4966206E 	.LC45:
 1415      6F206461 
 1415      74612069 
 1415      73207368 
 1415      6F776E2C 
 1416 070e 0000     		.ascii	"'h': Show this screen.\015\012\000"
 1417              		.align	2
 1418 0710 74686520 	.LC46:
 1418      73656C65 
 1418      63746564 
 1418      20646576 
 1418      69636520 
 1419 0743 7920746F 		.ascii	"'r': Reset system.\015\012\015\012\000"
 1419      20636F6E 
 1419      74696E75 
 1419      652E0D0A 
 1419      0D0A00
 1420 0756 0000     		.align	2
 1421              	.LC47:
 1422 0758 0D0A0D0A 		.ascii	"Boot EEPROM: 24xxnnn (like 24AA64), 7 bit address +"
 1422      4175746F 
 1422      6D617469 
 1422      6320626F 
 1422      6F742063 
 1423 077f 7765722D 		.ascii	" dont-care bit,\015\012\000"
 1423      75703A0D 
 1423      0A00
 1424 0789 000000   		.align	2
 1425              	.LC48:
 1426 078c 5B333231 		.ascii	"connected to I2C_CONTROLLER_0, operating frequency "
 1426      305D2063 
 1426      6F6E6669 
 1426      67757261 
 1426      74696F6E 
 1427 07b9 7420626F 		.ascii	"is 100kHz,\015\012\000"
 1427      6F746C6F 
 1427      61646572 
 1427      20636F6E 
 1427      736F6C65 
 1428 07e6 66726F6D 		.align	2
 1428      20636F72 
 1428      65205241 
 1428      4D0D0A00 
 1429 07f6 0000     	.LC49:
 1430              		.ascii	"maximum EEPROM size = 65536 byte => 16 bit addresse"
 1431 07f8 20303031 		.ascii	"s,\015\012\000"
 1431      30202D20 
 1431      4175746F 
 1431      6D617469 
 1431      6320626F 
 1432 082b 30290D0A 		.align	2
 1432      0D0A5365 
 1432      6C656374 
 1432      3A2000
 1433 083a 0000     	.LC50:
 1434              		.ascii	"fixed boot device address: 0xA0\015\012\015\012\000"
 1435 083c 0D0A0D0A 		.align	2
 1435      53544F52 
 1435      4D20536F 
 1435      4320626F 
 1435      6F746C6F 
 1436 0857 00       	.LC51:
 1437              		.ascii	"Terminal setup: 9600 baud, 8 data bits, no parity, "
 1438 0858 2730273A 		.ascii	"1 stop bit\015\012\015\012\000"
 1438      20457865 
 1438      63757465 
 1438      2070726F 
 1438      6772616D 
 1439 0877 00       		.align	2
 1440              	.LC52:
 1441 0878 2731273A 		.ascii	"For more information see the STORM Core / STORM SoC"
 1441      20577269 
 1441      74652027 
 1441      73746F72 
 1441      6D5F7072 
 1442 08ab 61205541 		.ascii	" datasheet\015\012\000"
 1442      52542E0D 
 1442      0A00
 1443 08b5 000000   		.align	2
 1444              	.LC53:
 1445 08b8 2732273A 		.ascii	"http://opencores.org/project,storm_core\015\012\000"
 1445      20507269 
 1445      6E742063 
 1445      75727265 
 1445      6E742063 
 1446 08e9 0A00     		.align	2
 1447 08eb 00       	.LC54:
 1448              		.ascii	"http://opencores.org/project,storm_soc\015\012\000"
 1449 08ec 2733273A 		.align	2
 1449      204C6F61 
 1449      6420626F 
 1449      6F742069 
 1449      6D616765 
 1450 091f 696F6E2E 	.LC55:
 1450      0D0A00
 1451 0926 0000     		.ascii	"Contact: stnolting@googlemail.com\015\012\000"
 1452              		.align	2
 1453 0928 2734273A 	.LC56:
 1453      20577269 
 1453      74652027 
 1453      73746F72 
 1453      6D5F7072 
 1454 095b 52542E0D 		.ascii	"(c) 2012 by Stephan Nolting\015\012\015\012Select: "
 1454      0A00
 1455 0961 000000   		.ascii	"\000"
 1456              		.align	2
 1457 0964 2735273A 	.LC57:
 1457      20507269 
 1457      6E742063 
 1457      6F6E7465 
 1457      6E74206F 
 1458              		.ascii	"\015\012\015\012We'll send you back - to the future"
 1459              		.ascii	"!.\015\012\015\012\000"
 1460 0988 2761273A 		.align	2
 1460      2053686F 
 1460      77204449 
 1460      50207377 
 1460      69746368 
 1461 09bb 6F6F742E 	.LC58:
 1461      0D0A00
 1462 09c2 0000     		.ascii	" - Doctor Emmet L. Brown\015\012\015\012Select: \000"
 1463              		.align	2
 1464 09c4 2768273A 	.LC59:
 1464      2053686F 
 1464      77207468 
 1464      69732073 
 1464      63726565 
 1465 09dd 000000   		.ascii	" Invalid operation!\015\012Try again: \000"
 1466              		.align	2
 1467 09e0 2772273A 	.LC60:
 1467      20526573 
 1467      65742073 
 1467      79737465 
 1467      6D2E0D0A 
 1468 09f7 00       		.ascii	"\015\012\015\012-> Starting application...\015\012\015"
 1469              		.ascii	"\012\000"
 1470 09f8 426F6F74 		.align	2
 1470      20454550 
 1470      524F4D3A 
 1470      20323478 
 1470      786E6E6E 
 1471 0a2b 20646F6E 	.LC61:
 1471      742D6361 
 1471      72652062 
 1471      69742C0D 
 1471      0A00
 1472 0a3d 000000   		.ascii	"\015\012\015\012Aborted!\000"
 1473              		.text
 1474 0a40 636F6E6E 		.align	2
 1474      65637465 
 1474      6420746F 
 1474      20493243 
 1474      5F434F4E 
 1475 0a73 69732031 		.global	main
 1475      30306B48 
 1475      7A2C0D0A 
 1475      00
 1477              	main:
 1478 0a80 6D617869 	.LFB35:
 1478      6D756D20 
 1478      45455052 
 1478      4F4D2073 
 1478      697A6520 
 1479 0ab3 732C0D0A 		.loc 4 53 0
 1479      00
 1480              		@ args = 0, pretend = 0, frame = 16
 1481              		@ frame_needed = 0, uses_anonymous_args = 0
 1482 0ab8 66697865 		stmfd	sp!, {r4, r5, r6, r7, r8, r9, sl, lr}
 1482      6420626F 
 1482      6F742064 
 1482      65766963 
 1482      65206164 
 1483              	.LCFI9:
 1484              		.loc 4 59 0
 1485 0adc 5465726D 		mov	r0, #0
 1485      696E616C 
 1485      20736574 
 1485      75703A20 
 1485      39363030 
 1486 0b0f 31207374 		.loc 4 53 0
 1486      6F702062 
 1486      69740D0A 
 1486      0D0A00
 1487 0b1e 0000     		sub	sp, sp, #20
 1488              	.LCFI10:
 1489 0b20 466F7220 		.loc 4 59 0
 1489      6D6F7265 
 1489      20696E66 
 1489      6F726D61 
 1489      74696F6E 
 1490 0b53 20646174 		bl	io_set_gpio0_port
 1490      61736865 
 1490      65740D0A 
 1490      00
 1491              		.loc 4 60 0
 1492              		mov	r1, #13
 1493 0b60 68747470 		mov	r0, #195
 1493      3A2F2F6F 
 1493      70656E63 
 1493      6F726573 
 1493      2E6F7267 
 1494 0b8a 0000     		bl	set_syscpreg
 1495              		.loc 4 63 0
 1496 0b8c 68747470 		mov	r0, #99
 1496      3A2F2F6F 
 1496      70656E63 
 1496      6F726573 
 1496      2E6F7267 
 1497 0bb5 000000   		bl	io_i2c0_speed
 1498              		.loc 4 66 0
 1499 0bb8 436F6E74 		mov	r0, #6
 1499      6163743A 
 1499      2073746E 
 1499      6F6C7469 
 1499      6E674067 
 1500              		bl	get_syscpreg
 1501              		mov	r1, #6
 1502 0bdc 28632920 		orr	r0, r0, #8
 1502      32303132 
 1502      20627920 
 1502      53746570 
 1502      68616E20 
 1503 0c03 00       		bl	set_syscpreg
 1504              		.loc 4 69 0
 1505              		mov	r0, #13
 1506 0c04 0D0A0D0A 		bl	get_syscpreg
 1506      5765276C 
 1506      6C207365 
 1506      6E642079 
 1506      6F752062 
 1507 0c2b 212E0D0A 		.loc 4 70 0
 1507      0D0A00
 1508 0c32 0000     		mov	r0, r0, lsr #17
 1509              		mvn	r0, r0
 1510 0c34 202D2044 		and	r0, r0, #15
 1510      6F63746F 
 1510      7220456D 
 1510      6D657420 
 1510      4C2E2042 
 1511 0c59 000000   		cmp	r0, #1
 1512              		moveq	r4, #48
 1513 0c5c 20496E76 	.LVL135:
 1513      616C6964 
 1513      206F7065 
 1513      72617469 
 1513      6F6E210D 
 1514 0c7d 000000   		addeq	sl, sp, #6
 1515              		addeq	r9, sp, #15
 1516 0c80 0D0A0D0A 		beq	.L227
 1516      2D3E2053 
 1516      74617274 
 1516      696E6720 
 1516      6170706C 
 1517 0ca1 0A00     		cmp	r0, #2
 1518 0ca3 00       		beq	.L340
 1519              		.loc 4 77 0
 1520 0ca4 0D0A0D0A 		ldr	r0, .L350
 1520      41626F72 
 1520      74656421 
 1520      00
 1521 0cb1 000000   		bl	uart0_printf
 1522              		.loc 4 78 0
 1523              		ldr	r0, .L350+4
 1524              		bl	uart0_printf
 1525              		.loc 4 79 0
 1526              		ldr	r0, .L350+8
  47:main.c        **** 
  48:main.c        **** // ############################################################################################
  49:main.c        **** // STORM SoC Bootloader
  50:main.c        ****    int main(void)
  51:main.c        **** // ############################################################################################
  52:main.c        **** {
  53:main.c        **** 	int function_sel, data, i, start_app = 0;
 1527              	ldr	r0, .L350+16
 1528              		bl	uart0_printf
 1529              		.loc 4 82 0
 1530 074c E92D47F0 		ldr	r0, .L350+20
 1531              		bl	uart0_printf
  54:main.c        **** ned long *data_pointer, word_buffer, adr_buffer, cnt;
  55:main.c        **** 	unsigned char buffer[5], temp_string[9], char_tmp, *char_pointer, device_id;
  56:main.c        **** 
  57:main.c        **** 	// show reset ack
  58:main.c        **** 	io_set_gpio0_port(0);
  59:main.c        **** 	set_syscpreg(0xC3, SYS_IO);
 1532              	 4 84 0
 1533 0750 E3A00000 		ldr	r0, .L350+24
 1534              		bl	uart0_printf
 1535 0754 E24DD014 		.loc 4 85 0
 1536              		ldr	r0, .L350+28
 1537              		bl	uart0_printf
 1538 0758 EBFFFFFE 		.loc 4 87 0
  60:main.c        **** nit I²C
 1539              	, sp, #6
 1540 075c E3A0100D 		.loc 4 86 0
 1541 0760 E3A000C3 		ldr	r0, .L350+32
 1542 0764 EBFFFFFE 		bl	uart0_printf
  61:main.c        **** io_i2c0_speed(0x0063); // 100kHz
  62:main.c        **** 
  63:main.c        **** 	// enable write-through strategy
 1543              	c 4 87 0
 1544 0768 E3A00063 		mov	r1, sl
 1545 076c EBFFFFFE 		mov	r2, #8
  64:main.c        **** t_syscpreg(get_syscpreg(SYS_CTRL_0) | (1<<DC_WTHRU), SYS_CTRL_0);
  65:main.c        **** 
  66:main.c        **** 	// Check config switches for immediate boot-config
 1546              	v	r0, #67108864
 1547 0770 E3A00006 		bl	long_to_hex_string
 1548 0774 EBFFFFFE 		.loc 4 88 0
 1549 0778 E3A01006 		mov	r0, sl
 1550 077c E3800008 		bl	uart0_printf
 1551 0780 EBFFFFFE 		.loc 4 89 0
  67:main.c        **** nction_sel = (int)((~(get_syscpreg(SYS_IO) >> 17)) & 0x0F);
  68:main.c        **** 	switch(function_sel){
  69:main.c        **** 		case 1: function_sel = '0'; goto main_menu; break; // auto start application from RAM
 1552              	0, .L350+36
 1553 0784 E3A0000D 		bl	uart0_printf
 1554 0788 EBFFFFFE 		.loc 4 90 0
  70:main.c        **** ase 2: function_sel = '3'; goto main_menu; start_app = 1; device_id = 0xA0; break; // auto boot fro
 1555              		print_intro
 1556 078c E1A008A0 		add	r9, sp, #15
 1557 0790 E1E00000 	.LVL136:
 1558 0794 E200000F 	.L228:
 1559 0798 E3500001 		.loc 4 95 0
 1560 079c 03A04030 		bl	io_uart0_read_byte
 1561              		mov	r4, r0
 1562 07a0 028DA006 	.LVL137:
 1563 07a4 028D900F 	.L227:
 1564 07a8 0A000020 		.loc 4 100 0
 1565 07ac E3500002 		mov	r0, #13
 1566 07b0 0A00007E 		bl	get_syscpreg
  71:main.c        **** 	default: break;
  72:main.c        **** 	}
  73:main.c        **** 
  74:main.c        **** 	// Intro screen
  75:main.c        **** 		uart0_printf("\r\n\r\n\r\n+----------------------------------------------------------------+\r\n"
  76:main.c        **** 	uart0_printf(            "|    <<< STORM Core Processor System - By Stephan Nolting >>>    |\r\n")
  77:main.c        **** 	uart0_printf(            "+----------------------------------------------------------------+\r\n")
 1567              	536
 1568 07b4 E59F085C 		.loc 4 180 0
 1569 07b8 EBFFFFFE 		moveq	r6, #1
  78:main.c        **** printf(            "|         Bootloader for STORM SoC   Version: 20120524-D         |\r\n");
 1570              	L138:
 1571 07bc E59F0858 		moveq	r5, #160
 1572 07c0 EBFFFFFE 	.LVL139:
  79:main.c        **** uart0_printf(            "|               Contact: stnolting@googlemail.com                |\r\n");
 1573              	oc 4 100 0
 1574 07c4 E59F0854 		bne	.L341
 1575 07c8 EBFFFFFE 	.LVL140:
  80:main.c        **** uart0_printf(            "+----------------------------------------------------------------+\r\n\r\
 1576              	68:
 1577 07cc E59F0850 		.loc 4 187 0
 1578 07d0 EBFFFFFE 		mov	r4, #0
  81:main.c        **** 	uart0_printf(            " < Welcome to the STORM SoC bootloader console! >\r\n < Select an operat
 1579              	L141:
 1580 07d4 E59F084C 		.loc 4 185 0
 1581 07d8 EBFFFFFE 		ldr	r0, .L350+40
  82:main.c        **** uart0_printf(            " < the boot key for immediate application start. >\r\n\r\n");
 1582              		uart0_printf
 1583 07dc E59F0848 	.LVL142:
 1584 07e0 EBFFFFFE 		.loc 4 187 0
  83:main.c        **** uart0_printf(" Load Address: ");
  84:main.c        **** 	long_to_hex_string(JUMPADDRESS, temp_string, 8);
 1585              	v	r1, r5
 1586 07e4 E59F0844 		mov	r2, r4
 1587 07e8 EBFFFFFE 		mov	r3, #2
  85:main.c        **** art0_printf(temp_string);
 1588              	v	r0, #114
 1589 07ec E59F0840 		str	r4, [sp, #0]
 1590 07f0 EBFFFFFE 		bl	io_i2c0_byte_transfer
  86:main.c        **** uart0_printf("\n\r");
  87:main.c        **** 	print_intro();
 1591              	oc 4 188 0
 1592 07f4 E28DA006 		mov	r1, r5
 1593              		.loc 4 187 0
 1594 07f8 E59F0838 		strb	r0, [sp, #15]
 1595 07fc EBFFFFFE 		.loc 4 188 0
 1596              		mov	r2, #1
 1597 0800 E1A0100A 		mov	r3, #2
 1598 0804 E3A02008 		mov	r0, #114
 1599 0808 E3A00301 		str	r4, [sp, #0]
 1600 080c EBFFFFFE 		bl	io_i2c0_byte_transfer
  88:main.c        **** 	while(1){
 1601              	9 0
 1602 0810 E1A0000A 		mov	r2, #2
 1603 0814 EBFFFFFE 		mov	r3, r2
  89:main.c        **** 		// console input
 1604              	oc 4 188 0
 1605 0818 E59F081C 		strb	r0, [sp, #16]
 1606 081c EBFFFFFE 		.loc 4 189 0
  90:main.c        **** 	function_sel = io_uart0_read_byte();
 1607              	v	r1, r5
 1608 0820 EBFFFFFE 		mov	r0, #114
 1609 0824 E28D900F 		str	r4, [sp, #0]
 1610              		bl	io_i2c0_byte_transfer
 1611              		.loc 4 190 0
  91:main.c        **** main_menu:
  92:main.c        **** 
  93:main.c        **** 		// boot button
  94:main.c        **** 		if (((get_syscpreg(SYS_IO) >> 16) & 0x01) == 0){
  95:main.c        **** 			function_sel = '3';
 1612              	r3, #2
 1613 0828 EBFFFFFE 		.loc 4 189 0
 1614 082c E1A04000 		strb	r0, [sp, #17]
 1615              		.loc 4 190 0
 1616              		mov	r1, r5
  96:main.c        **** art_app    = 1;
  97:main.c        **** 			device_id    = 0xA0;
  98:main.c        **** 		}
  99:main.c        **** 
 100:main.c        **** 		// main functions
 1617              	r0, #114
 1618 0830 E3A0000D 		mov	r2, #3
 1619 0834 EBFFFFFE 		str	r4, [sp, #0]
 1620 0838 E3100801 		bl	io_i2c0_byte_transfer
 101:main.c        **** tch(function_sel){
 102:main.c        **** 
 103:main.c        **** 			// boot from RAM (start application)
 104:main.c        **** 			// +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 105:main.c        **** 			case '0':
 106:main.c        **** 				io_uart0_send_byte((char)function_sel);
 107:main.c        **** 				start_app = 1;
 108:main.c        **** 				break;
 109:main.c        **** 
 110:main.c        **** 			// load ram via UART0
 111:main.c        **** 			// +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 112:main.c        **** 			case '1':
 113:main.c        **** 				io_uart0_send_byte((char)function_sel);
 114:main.c        **** 				uart0_printf("\r\n\r\nApplication will start automatically after download.\r\n-> Waiting for 's
 115:main.c        **** 				uart0_scanf(buffer,4,0); // get storm master boot record code
 116:main.c        **** 				if((buffer[0] == 'S') && (buffer[1] == 'M') && (buffer[2] == 'B') && (buffer[3] == 'R')){
 117:main.c        **** 					uart0_scanf(buffer,4,0); // get image size
 118:main.c        **** 					adr_buffer = qbytes_to_long(buffer);
 119:main.c        **** 					if (adr_buffer > RAM_SIZE-8){
 120:main.c        **** 						uart0_printf(" ERROR! Program file too big!\r\n\r\n");
 121:main.c        **** 						break;
 122:main.c        **** 					}
 123:main.c        **** //					data_pointer = 0;
 124:main.c        **** 					data_pointer = (volatile unsigned long *)JUMPADDRESS;
 125:main.c        **** 					while(data_pointer != JUMPADDRESS+(adr_buffer+4) ){
 126:main.c        **** 						uart0_scanf(buffer,4,0); // get word
 127:main.c        **** 						*data_pointer = qbytes_to_long(buffer); // store memory entry
 128:main.c        **** 						data_pointer = data_pointer + 1;
 129:main.c        **** 					}
 130:main.c        **** 					uart0_printf("\n\r");
 131:main.c        **** 					print_intro();
 132:main.c        **** 					//start_app = 1;
 133:main.c        **** 				}
 134:main.c        **** 				else
 135:main.c        **** 					uart0_printf(" Invalid programming file!\r\n\r\nSelect: ");
 136:main.c        **** 				break;
 137:main.c        **** 
 138:main.c        **** 			// ram memory dump
 139:main.c        **** 			// +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 140:main.c        **** 			case '2':
 141:main.c        **** 				io_uart0_send_byte((char)function_sel);
 142:main.c        **** 				uart0_printf("\r\n\r\nAbort dumping by pressing any key.\r\nPress any key to continue.\r\n\r\n"
 143:main.c        **** 				while(io_uart0_read_byte() == -1);
 144:main.c        **** 				while(io_uart0_read_byte() != -1);
 145:main.c        **** 				data_pointer = (volatile unsigned long *)JUMPADDRESS;
 146:main.c        **** 				
 147:main.c        **** 				while(data_pointer < JUMPADDRESS +2532){
 148:main.c        **** 					word_buffer = *data_pointer;
 149:main.c        **** 					long_to_hex_string(word_buffer, temp_string,8);
 150:main.c        **** 					i=0;
 151:main.c        **** 					while (temp_string[i] != 0) {
 152:main.c        **** 						io_uart0_send_byte(temp_string[i]);
 153:main.c        **** 						i++;
 154:main.c        **** 					}
 155:main.c        **** 					io_uart0_send_byte(' ');
 156:main.c        **** 					data_pointer++;
 157:main.c        **** 					if(io_uart0_read_byte() != -1){
 158:main.c        **** 						break;
 159:main.c        **** 						uart0_printf("\r\n\r\nAborted!");
 160:main.c        **** 					}
 161:main.c        **** 				}
 162:main.c        **** 				uart0_printf("\r\n\r\nDumping completed.\r\n\r\nSelect: ");
 163:main.c        **** 				break;
 164:main.c        **** 
 165:main.c        **** 			// boot from I²C EEPROM
 166:main.c        **** 			// +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 167:main.c        **** 			case '3':
 168:main.c        **** 				if(start_app == 0){
 169:main.c        **** 					io_uart0_send_byte((char)function_sel);
 170:main.c        **** 					uart0_printf("\r\n\r\nEnter device address (2x hex_chars, set LSB to '0'): ");
 171:main.c        **** 					uart0_scanf(buffer,2,1);
 172:main.c        **** 					device_id = (unsigned char)hex_string_to_long(buffer, 2);
 173:main.c        **** 					if(device_id == 0){
 174:main.c        **** 						uart0_printf(" Invalid address!\r\n\r\nSelect: ");
 175:main.c        **** 						break;
 176:main.c        **** 					}
 177:main.c        **** 				}
 178:main.c        **** 
 179:main.c        **** 				uart0_printf("\r\nApplication will start automatically after upload.\r\n-> Loading boot image..
 180:main.c        **** 				cnt = 0;
 1621              	c 4 191 0
 1622 083c 03A06001 		ldrb	r3, [sp, #15]	@ zero_extendqisi2
 1623              		.loc 4 190 0
 1624 0840 03A050A0 		and	r0, r0, #255
 1625              		.loc 4 191 0
 1626              		cmp	r3, #83
 1627 0844 1A00003D 		.loc 4 190 0
 1628              		strb	r0, [sp, #18]
 1629              		.loc 4 191 0
 181:main.c        **** ;
 182:main.c        **** 				buffer[1] = (unsigned char)io_i2c0_byte_transfer('r',device_id,cnt++,2,0x00);
 183:main.c        **** 				buffer[2] = (unsigned char)io_i2c0_byte_transfer('r',device_id,cnt++,2,0x00);
 184:main.c        **** 				buffer[3] = (unsigned char)io_i2c0_byte_transfer('r',device_id,cnt++,2,0x00);
 185:main.c        **** 				if((buffer[0] == 'S') && (buffer[1] == 'M') && (buffer[2] == 'B') && (buffer[3] == 'R')){
 186:main.c        **** 					buffer[0] = (unsigned char)io_i2c0_byte_transfer('r',device_id,cnt++,2,0x00);
 187:main.c        **** 					buffer[1] = (unsigned char)io_i2c0_byte_transfer('r',device_id,cnt++,2,0x00);
 1630              	9
 1631 0848 E3A04000 		ldrb	r3, [sp, #16]	@ zero_extendqisi2
 1632              		cmp	r3, #77
 1633              		beq	.L342
 1634 084c E59F07EC 	.L269:
 1635 0850 EBFFFFFE 		.loc 4 210 0
 1636              		ldr	r0, .L350+44
 1637              		bl	uart0_printf
 1638 0854 E1A01005 		.loc 4 365 0
 1639 0858 E1A02004 		cmp	r6, #0
 1640 085c E3A03002 		beq	.L228
 1641 0860 E3A00072 	.LVL143:
 1642 0864 E58D4000 	.L246:
 1643 0868 EBFFFFFE 		.loc 4 371 0
 188:main.c        **** ffer[2] = (unsigned char)io_i2c0_byte_transfer('r',device_id,cnt++,2,0x00);
 1644              	+48
 1645 086c E1A01005 		bl	uart0_printf
 1646              		.loc 4 372 0
 1647 0870 E5CD000F 		mov	r1, #13
 1648              		mov	r0, #0
 1649 0874 E3A02001 		bl	set_syscpreg
 1650 0878 E3A03002 		.loc 4 375 0
 1651 087c E3A00072 		mov	r0, #6
 1652 0880 E58D4000 		bl	get_syscpreg
 1653 0884 EBFFFFFE 		mov	r1, #6
 189:main.c        **** 				buffer[3] = (unsigned char)io_i2c0_byte_transfer('r',device_id,cnt++,2,0x00);
 1654              	0, #8
 1655 0888 E3A02002 		bl	set_syscpreg
 1656 088c E1A03002 		.loc 4 378 0
 1657              		mov	r0, #6
 1658 0890 E5CD0010 		bl	get_syscpreg
 1659              		mvn	r0, r0
 1660 0894 E1A01005 		and	r0, r0, #2
 1661 0898 E3A00072 		mvn	r0, r0
 1662 089c E58D4000 		mov	r1, #6
 1663 08a0 EBFFFFFE 		bl	set_syscpreg
 190:main.c        **** 				adr_buffer = qbytes_to_long(buffer);
 1664              	6 0
 1665 08a4 E3A03002 		mov	r0, #67108864
 1666              		bl	_jump_to_program
 1667 08a8 E5CD0011 	.L310:
 1668              		b	.L310
 1669 08ac E1A01005 	.LVL144:
 1670 08b0 E3A00072 	.L341:
 1671 08b4 E3A02003 		.loc 4 107 0
 1672 08b8 E58D4000 		cmp	r4, #52
 1673 08bc EBFFFFFE 		beq	.L237
 191:main.c        **** 				data_pointer = 0;
 1674              	
 1675 08c0 E5DD300F 		cmp	r4, #49
 1676              		beq	.L234
 1677 08c4 E20000FF 		ble	.L343
 1678              		cmp	r4, #50
 1679 08c8 E3530053 		beq	.L235
 1680              		cmp	r4, #51
 1681 08cc E5CD0012 		bne	.L231
 1682              		.loc 4 175 0
 1683 08d0 1A000002 		mov	r0, r4
 1684 08d4 E5DD3010 		bl	io_uart0_send_byte
 1685 08d8 E353004D 		.loc 4 176 0
 1686 08dc 0A00006B 		ldr	r0, .L350+52
 1687              		bl	uart0_printf
 192:main.c        **** 				while((data_pointer != adr_buffer+4) && (data_pointer < IRAM_SIZE)){
 193:main.c        **** 						buffer[0] = (unsigned char)io_i2c0_byte_transfer('r',device_id,cnt++,2,0x00);
 194:main.c        **** 						buffer[1] = (unsigned char)io_i2c0_byte_transfer('r',device_id,cnt++,2,0x00);
 195:main.c        **** 						buffer[2] = (unsigned char)io_i2c0_byte_transfer('r',device_id,cnt++,2,0x00);
 196:main.c        **** 						buffer[3] = (unsigned char)io_i2c0_byte_transfer('r',device_id,cnt++,2,0x00);
 197:main.c        **** 						*data_pointer = qbytes_to_long(buffer); // store memory entry
 198:main.c        **** 						data_pointer = data_pointer + 1;
 199:main.c        **** 					}
 200:main.c        **** 					uart0_printf(" Upload complete\r\n");
 201:main.c        **** 					start_app = 1;
 202:main.c        **** 				}
 203:main.c        **** 				else
 204:main.c        **** 					uart0_printf(" Invalid boot device or file!\r\n\r\nSelect: ");
 205:main.c        **** 				break;
 206:main.c        **** 
 207:main.c        **** 			// program I²C EEPROM
 208:main.c        **** 			// +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 209:main.c        **** 			case '4':
 210:main.c        **** 				io_uart0_send_byte((char)function_sel);
 1688              	
 1689 08e0 E59F075C 		mov	r0, r9
 1690 08e4 EBFFFFFE 		mov	r1, #2
 211:main.c        **** r\n\r\nEnter device address (2x hex_chars, set LSB to '0'): ");
 212:main.c        **** 				uart0_scanf(buffer,2,1);
 213:main.c        **** 				device_id = (unsigned char)hex_string_to_long(buffer, 2);
 214:main.c        **** 				if(device_id == 0){
 215:main.c        **** 					uart0_printf("\r\nInvalid address!\r\n\r\nSelect: ");
 216:main.c        **** 					break;
 217:main.c        **** 				}
 218:main.c        **** 
 219:main.c        **** 				uart0_printf("\r\nData will overwrite RAM content!\r\n-> Waiting for 'storm_program.bin' in byt
 220:main.c        **** 				uart0_scanf(buffer,4,0);
 221:main.c        **** 				if((buffer[0]=='S') && (buffer[1]=='M') && (buffer[2]=='B') && (buffer[3]=='R')){
 222:main.c        **** 					char_pointer = 0; // beginning of RAM
 223:main.c        **** 					*char_pointer++ = 'S'; asm volatile ("NOP");
 224:main.c        **** 					*char_pointer++ = 'M'; asm volatile ("NOP");
 225:main.c        **** 					*char_pointer++ = 'B'; asm volatile ("NOP");
 226:main.c        **** 					*char_pointer++ = 'R'; asm volatile ("NOP");
 227:main.c        **** 					uart0_scanf(buffer,4,0);
 228:main.c        **** 					*char_pointer++ = buffer[0];
 229:main.c        **** 					*char_pointer++ = buffer[1];
 230:main.c        **** 					*char_pointer++ = buffer[2];
 231:main.c        **** 					*char_pointer++ = buffer[3];
 232:main.c        **** 					cnt = qbytes_to_long(buffer);
 233:main.c        **** 					if(cnt > 0xFFFC){
 234:main.c        **** 						uart0_printf(" ERROR! Program file too big!\r\n\r\n");
 235:main.c        **** 						break;
 236:main.c        **** 					}
 237:main.c        **** 
 238:main.c        **** 					for(i=0; i<cnt+4; i++){
 239:main.c        **** 						data = -1;
 240:main.c        **** 						while(data == -1)
 241:main.c        **** 							data = io_uart0_read_byte();
 242:main.c        **** 						*char_pointer++ = (unsigned char)data;
 243:main.c        **** 					}
 244:main.c        **** 					uart0_printf(" Download completed\r\n");
 245:main.c        **** 
 246:main.c        **** 					uart0_printf("Writing buffer to i2c EEPROM...");
 247:main.c        **** 					char_pointer = 0; // beginning of RAM
 248:main.c        **** 					for(i=0; i<cnt+12; i++){
 249:main.c        **** 						char_tmp = *char_pointer++;
 250:main.c        **** 						while(io_i2c0_byte_transfer('w', device_id, i, 2, char_tmp) != 0);
 251:main.c        **** 					}
 252:main.c        **** 					uart0_printf(" Completed\r\n\r\n");
 253:main.c        **** 				}
 254:main.c        **** 				else
 255:main.c        **** 					uart0_printf(" Invalid boot device or file!\r\n\r\n");
 256:main.c        **** 				uart0_printf("Select: ");
 257:main.c        **** 				break;
 258:main.c        **** 
 259:main.c        **** 			// show content of I2C EEPROM
 260:main.c        **** 			// +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 261:main.c        **** 			case '5':
 262:main.c        **** 				io_uart0_send_byte((char)function_sel);
 263:main.c        **** 				uart0_printf("\r\n\r\nEnter device address (2 hex-chars, set LSB to '0'): ");
 264:main.c        **** 				uart0_scanf(buffer,2,1);
 265:main.c        **** 				device_id = (unsigned char)hex_string_to_long(buffer, 2);
 266:main.c        **** 				if(device_id == 0){
 267:main.c        **** 					uart0_printf(" Invalid address!\r\n\r\nSelect: ");
 268:main.c        **** 					break;
 269:main.c        **** 				}
 270:main.c        **** 				uart0_printf("\r\n\r\nAbort dumping by pressing any key. If no data is shown,\r\n");
 271:main.c        **** 				uart0_printf("the selected device is not responding. Press any key to continue.\r\n\r\n");
 272:main.c        **** 				while(io_uart0_read_byte() == -1);
 273:main.c        **** 				while(io_uart0_read_byte() != -1);
 274:main.c        **** 				for(i=0; i<0xFFFF; i++){
 275:main.c        **** 						data = -1;
 276:main.c        **** 						while(data < 0){
 277:main.c        **** 							data = io_i2c0_byte_transfer('r', device_id, i, 2, 0x00);
 278:main.c        **** 							if(io_uart0_read_byte() != -1){
 279:main.c        **** 								function_sel = 'X';
 280:main.c        **** 								break;
 281:main.c        **** 							}
 282:main.c        **** 						}
 283:main.c        **** 						if(function_sel == 'X'){
 284:main.c        **** 							uart0_printf("\r\n\r\nAborted!");
 285:main.c        **** 							break;
 286:main.c        **** 						}
 287:main.c        **** 						io_uart0_send_byte(data);
 288:main.c        **** 				}
 289:main.c        **** 				uart0_printf("\r\n\r\nDumping completed.\r\n\r\nSelect: ");
 290:main.c        **** 				break;
 291:main.c        **** 
 292:main.c        **** 			// Automatic boot configuration
 293:main.c        **** 			// +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 294:main.c        **** 			case 'a':
 295:main.c        **** 				io_uart0_send_byte((char)function_sel);
 296:main.c        **** 				uart0_printf("\r\n\r\nAutomatic boot configuration for power-up:\r\n");
 297:main.c        **** 				uart0_printf("[3210] configuration DIP switch\r\n 0000 - Start bootloader console\r\n 0001 - Au
 298:main.c        **** 				uart0_printf(" 0010 - Automatic boot from I2C EEPROM (Address 0xA0)\r\n\r\nSelect: ");
 299:main.c        **** 				break;
 300:main.c        **** 
 301:main.c        **** 			// Help screen
 302:main.c        **** 			// +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 303:main.c        **** 			case 'h':
 304:main.c        **** 				io_uart0_send_byte((char)function_sel);
 305:main.c        **** 				uart0_printf("\r\n\r\nSTORM SoC bootloader\r\n");
 306:main.c        **** 				uart0_printf("'0': Execute program in RAM.\r\n");
 307:main.c        **** 				uart0_printf("'1': Write 'storm_program.bin' to the core's RAM via UART.\r\n");
 308:main.c        **** 				uart0_printf("'2': Print current content of complete core RAM.\r\n");
 309:main.c        **** 				uart0_printf("'3': Load boot image from EEPROM and start application.\r\n");
 310:main.c        **** 				uart0_printf("'4': Write 'storm_program.bin' to I2C EEPROM via UART.\r\n");
 311:main.c        **** 				uart0_printf("'5': Print content of I2C EEPROM.\r\n");
 312:main.c        **** 				uart0_printf("'a': Show DIP switch configurations for automatic boot.\r\n");
 313:main.c        **** 				uart0_printf("'h': Show this screen.\r\n");
 314:main.c        **** 				uart0_printf("'r': Reset system.\r\n\r\n");
 315:main.c        **** 				uart0_printf("Boot EEPROM: 24xxnnn (like 24AA64), 7 bit address + dont-care bit,\r\n");
 316:main.c        **** 				uart0_printf("connected to I2C_CONTROLLER_0, operating frequency is 100kHz,\r\n");
 317:main.c        **** 				uart0_printf("maximum EEPROM size = 65536 byte => 16 bit addresses,\r\n");
 318:main.c        **** 				uart0_printf("fixed boot device address: 0xA0\r\n\r\n");
 319:main.c        **** 				uart0_printf("Terminal setup: 9600 baud, 8 data bits, no parity, 1 stop bit\r\n\r\n");
 320:main.c        **** 				uart0_printf("For more information see the STORM Core / STORM SoC datasheet\r\n");
 321:main.c        **** 				uart0_printf("http://opencores.org/project,storm_core\r\n");
 322:main.c        **** 				uart0_printf("http://opencores.org/project,storm_soc\r\n");
 323:main.c        **** 				uart0_printf("Contact: stnolting@googlemail.com\r\n");
 324:main.c        **** 				uart0_printf("(c) 2012 by Stephan Nolting\r\n\r\nSelect: ");
 325:main.c        **** 				break;
 326:main.c        **** 
 327:main.c        **** 			// back to the future
 328:main.c        **** 			// +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 329:main.c        **** 			case 'f':
 330:main.c        **** 				io_uart0_send_byte((char)function_sel);
 331:main.c        **** 				uart0_printf("\r\n\r\nWe'll send you back - to the future!.\r\n\r\n");
 332:main.c        **** 				uart0_printf(" - Doctor Emmet L. Brown\r\n\r\nSelect: ");
 333:main.c        **** 				break;
 334:main.c        **** 
 335:main.c        **** 			// restart system
 336:main.c        **** 			// +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 337:main.c        **** 			case 'r':
 338:main.c        **** 				io_uart0_send_byte((char)function_sel);
 339:main.c        **** 				asm volatile ("mov r0,     #0x0FF00000");
 340:main.c        **** 				asm volatile ("add pc, r0, #0xF0000000"); // jump to bootloader
 341:main.c        **** 				while(1);
 342:main.c        **** 				break;
 343:main.c        **** 
 344:main.c        **** 			// no input
 345:main.c        **** 			// +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 346:main.c        **** 			case -1:
 347:main.c        **** 				break;
 348:main.c        **** 
 349:main.c        **** 			// invalid selection
 350:main.c        **** 			// +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 351:main.c        **** 			default:
 352:main.c        **** 				io_uart0_send_byte((char)function_sel);
 353:main.c        **** 				uart0_printf(" Invalid operation!\r\nTry again: ");
 354:main.c        **** 				break;
 355:main.c        **** 
 356:main.c        **** 		}
 357:main.c        **** 
 358:main.c        **** 		// start application request
 359:main.c        **** 		if(start_app != 0)
 360:main.c        **** 			break;
 361:main.c        **** 
 362:main.c        **** 	}
 363:main.c        **** 
 364:main.c        **** 	// start application
 365:main.c        **** 	uart0_printf("\r\n\r\n-> Starting application...\r\n\r\n");
 1691              	ov	r2, #1
 1692 08e8 E3560000 		bl	uart0_scanf
 1693 08ec 0AFFFFCD 		.loc 4 178 0
 1694              		mov	r1, #2
 1695              		mov	r0, r9
 366:main.c        **** on...\r\n\r\n");
 367:main.c        **** 	set_syscpreg(0x00, SYS_IO);  // set System IO ouputs to low.
 368:main.c        **** 
 369:main.c        **** 	// disable write-through strategy
 370:main.c        **** 	set_syscpreg(get_syscpreg(SYS_CTRL_0) & ~(1<<DC_WTHRU), SYS_CTRL_0);
 371:main.c        **** 
 1696              	ex_string_to_long
 1697 08f0 E59F0750 		.loc 4 179 0
 1698 08f4 EBFFFFFE 		ands	r1, r0, #255
 372:main.c        **** S_CTRL_0);
 1699              	L145:
 1700 08f8 E3A0100D 		movne	r5, r1
 1701 08fc E3A00000 		movne	r6, #0
 1702 0900 EBFFFFFE 		bne	.L268
 373:main.c        **** SYS_CTRL_0);
 374:main.c        **** 
 375:main.c        **** 	// clear D-cache
 1703              	146:
 1704 0904 E3A00006 	.L337:
 1705 0908 EBFFFFFE 		.loc 4 273 0
 1706 090c E3A01006 		ldr	r0, .L350+56
 1707 0910 E3C00008 		bl	uart0_printf
 1708 0914 EBFFFFFE 	.LVL147:
 376:main.c        **** ar D-cache
 377:main.c        **** 	set_syscpreg(get_syscpreg(SYS_CTRL_0) | ~(1<<DC_CLEAR), SYS_CTRL_0);
 378:main.c        **** 	
 1709              	28
 1710 0918 E3A00006 	.LVL148:
 1711 091c EBFFFFFE 	.L340:
 1712 0920 E1E00000 		.loc 4 70 0
 1713 0924 E2000002 		mov	r4, #51
 1714 0928 E1E00000 		add	sl, sp, #6
 1715 092c E3A01006 		add	r9, sp, #15
 1716 0930 EBFFFFFE 		b	.L227
 379:main.c        **** RL_0);
 380:main.c        **** 	
 381:main.c        **** 	// clear I-cache
 382:main.c        **** //	set_syscpreg(get_syscpreg(SYS_CTRL_0) | ~(1<<IC_CLEAR), SYS_CTRL_0);
 383:main.c        **** 
 384:main.c        **** //	set_syscpreg(((get_syscpreg(SYS_CTRL_0) & (0x0000FFFF)) | (0x00080000)) , SYS_CTRL_0);
 385:main.c        **** 	// jump to application
 386:main.c        **** 	//asm volatile ("mov pc, #0");
 1717              	
 1718 0934 E3A00301 	.L243:
 1719 0938 EBFFFFFE 		.loc 4 107 0
 1720              		cmp	r4, #102
 1721 093c EAFFFFFE 		beq	.L240
 1722              		ble	.L344
 1723              		cmp	r4, #104
 1724              		beq	.L241
 1725 0940 E3540034 		cmp	r4, #114
 1726 0944 0A000029 		bne	.L231
 1727 0948 CA00001C 		.loc 4 344 0
 1728 094c E3540031 		mov	r0, r4
 1729 0950 0A000036 		bl	io_uart0_send_byte
 1730 0954 DA000098 		.loc 4 345 0
 1731 0958 E3540032 		mov r0,     #0x0FF00000
 1732 095c 0A0000A2 		.loc 4 346 0
 1733 0960 E3540033 		add pc, r0, #0xF0000000
 1734 0964 1A000098 	.L309:
 1735              		b	.L309
 1736 0968 E1A00004 	.L237:
 1737 096c EBFFFFFE 		.loc 4 216 0
 1738              		mov	r0, r4
 1739 0970 E59F06D4 		bl	io_uart0_send_byte
 1740 0974 EBFFFFFE 		.loc 4 217 0
 1741              		ldr	r0, .L350+52
 1742 0978 E1A00009 		bl	uart0_printf
 1743 097c E3A01002 		.loc 4 218 0
 1744 0980 E3A02001 		mov	r0, r9
 1745 0984 EBFFFFFE 		mov	r1, #2
 1746              		mov	r2, #1
 1747 0988 E3A01002 		bl	uart0_scanf
 1748 098c E1A00009 		.loc 4 219 0
 1749 0990 EBFFFFFE 		mov	r0, r9
 1750              		mov	r1, #2
 1751 0994 E21010FF 		bl	hex_string_to_long
 1752              		.loc 4 220 0
 1753 0998 11A05001 		ands	r8, r0, #255
 1754 099c 13A06000 		bne	.L278
 1755 09a0 1AFFFFA8 		.loc 4 221 0
 1756              		ldr	r0, .L350+60
 1757              		bl	uart0_printf
 1758              		b	.L228
 1759 09a4 E59F06A4 	.L234:
 1760 09a8 EBFFFFFE 		.loc 4 119 0
 1761              		mov	r0, r4
 1762 09ac EAFFFF9D 		bl	io_uart0_send_byte
 1763              		.loc 4 120 0
 1764              		ldr	r0, .L350+64
 1765              		bl	uart0_printf
 1766 09b0 E3A04033 		.loc 4 121 0
 1767 09b4 E28DA006 		mov	r0, r9
 1768 09b8 E28D900F 		mov	r1, #4
 1769 09bc EAFFFF9B 		mov	r2, #0
 1770              		bl	uart0_scanf
 1771              		.loc 4 122 0
 1772              		ldrb	r3, [sp, #15]	@ zero_extendqisi2
 1773 09c0 E3540066 		cmp	r3, #83
 1774 09c4 0A00002A 		bne	.L247
 1775 09c8 DA0000AD 		ldrb	r3, [sp, #16]	@ zero_extendqisi2
 1776 09cc E3540068 		cmp	r3, #77
 1777 09d0 0A00010F 		beq	.L345
 1778 09d4 E3540072 	.L247:
 1779 09d8 1A00007B 		.loc 4 141 0
 1780              		ldr	r0, .L350+68
 1781 09dc E1A00004 		bl	uart0_printf
 1782 09e0 EBFFFFFE 		b	.L228
 1783              	.L240:
 1784 09e4 E3A006FF 		.loc 4 336 0
 1785              		mov	r0, r4
 1786 09e8 E280F20F 		bl	io_uart0_send_byte
 1787              		.loc 4 337 0
 1788 09ec EAFFFFFE 		ldr	r0, .L350+72
 1789              		bl	uart0_printf
 1790              		.loc 4 338 0
 1791 09f0 E1A00004 		ldr	r0, .L350+76
 1792 09f4 EBFFFFFE 		bl	uart0_printf
 1793              		b	.L228
 1794 09f8 E59F064C 	.LVL150:
 1795 09fc EBFFFFFE 	.L342:
 1796              		.loc 4 191 0
 1797 0a00 E1A00009 		ldrb	r3, [sp, #17]	@ zero_extendqisi2
 1798 0a04 E3A01002 		cmp	r3, #66
 1799 0a08 E3A02001 		bne	.L269
 1800 0a0c EBFFFFFE 		cmp	r0, #82
 1801              		bne	.L269
 1802 0a10 E1A00009 		.loc 4 192 0
 1803 0a14 E3A01002 		mov	r1, r5
 1804 0a18 EBFFFFFE 		mov	r2, #4
 1805              		sub	r3, r3, #64
 1806 0a1c E21080FF 		add	r0, r0, #32
 1807 0a20 1A0000A4 		str	r4, [sp, #0]
 1808              		bl	io_i2c0_byte_transfer
 1809 0a24 E59F0628 		.loc 4 193 0
 1810 0a28 EBFFFFFE 		mov	r1, r5
 1811 0a2c EAFFFF7D 		.loc 4 192 0
 1812              		strb	r0, [sp, #15]
 1813              		.loc 4 193 0
 1814 0a30 E1A00004 		mov	r2, #5
 1815 0a34 EBFFFFFE 		mov	r3, #2
 1816              		mov	r0, #114
 1817 0a38 E59F0618 		str	r4, [sp, #0]
 1818 0a3c EBFFFFFE 		bl	io_i2c0_byte_transfer
 1819              		.loc 4 194 0
 1820 0a40 E1A00009 		mov	r1, r5
 1821 0a44 E3A01004 		.loc 4 193 0
 1822 0a48 E3A02000 		strb	r0, [sp, #16]
 1823 0a4c EBFFFFFE 		.loc 4 194 0
 1824              		mov	r2, #6
 1825 0a50 E5DD300F 		mov	r3, #2
 1826 0a54 E3530053 		mov	r0, #114
 1827 0a58 1A000002 		str	r4, [sp, #0]
 1828 0a5c E5DD3010 		bl	io_i2c0_byte_transfer
 1829 0a60 E353004D 		.loc 4 195 0
 1830 0a64 0A000115 		mov	r1, r5
 1831              		.loc 4 194 0
 1832              		strb	r0, [sp, #17]
 1833 0a68 E59F05EC 		.loc 4 195 0
 1834 0a6c EBFFFFFE 		mov	r2, #7
 1835 0a70 EAFFFF6C 		mov	r3, #2
 1836              		mov	r0, #114
 1837              		str	r4, [sp, #0]
 1838 0a74 E1A00004 		bl	io_i2c0_byte_transfer
 1839 0a78 EBFFFFFE 		strb	r0, [sp, #18]
 1840              		.loc 4 196 0
 1841 0a7c E59F05DC 		mov	r0, r9
 1842 0a80 EBFFFFFE 		bl	qbytes_to_long
 1843              		.loc 4 198 0
 1844 0a84 E59F05D8 		adds	r7, r0, #4
 1845 0a88 EBFFFFFE 		beq	.L274
 1846 0a8c EAFFFF65 	.LVL151:
 1847              		mov	r6, r4
 1848              	.LVL152:
 1849              	.LVL153:
 1850 0a90 E5DD3011 	.L276:
 1851 0a94 E3530042 		.loc 4 199 0
 1852 0a98 1AFFFF90 		add	r2, r4, #8
 1853 0a9c E3500052 		mov	r1, r5
 1854 0aa0 1AFFFF8E 		mov	r3, #2
 1855              		mov	r0, #114
 1856 0aa4 E1A01005 		str	r6, [sp, #0]
 1857 0aa8 E3A02004 		bl	io_i2c0_byte_transfer
 1858 0aac E2433040 		.loc 4 200 0
 1859 0ab0 E2800020 		add	r2, r4, #9
 1860 0ab4 E58D4000 		.loc 4 199 0
 1861 0ab8 EBFFFFFE 		strb	r0, [sp, #15]
 1862              		.loc 4 200 0
 1863 0abc E1A01005 		mov	r1, r5
 1864              		mov	r3, #2
 1865 0ac0 E5CD000F 		mov	r0, #114
 1866              		str	r6, [sp, #0]
 1867 0ac4 E3A02005 		bl	io_i2c0_byte_transfer
 1868 0ac8 E3A03002 		.loc 4 201 0
 1869 0acc E3A00072 		add	r2, r4, #10
 1870 0ad0 E58D4000 		.loc 4 200 0
 1871 0ad4 EBFFFFFE 		strb	r0, [sp, #16]
 1872              		.loc 4 201 0
 1873 0ad8 E1A01005 		mov	r1, r5
 1874              		mov	r3, #2
 1875 0adc E5CD0010 		mov	r0, #114
 1876              		str	r6, [sp, #0]
 1877 0ae0 E3A02006 		bl	io_i2c0_byte_transfer
 1878 0ae4 E3A03002 		.loc 4 202 0
 1879 0ae8 E3A00072 		add	r2, r4, #11
 1880 0aec E58D4000 		.loc 4 201 0
 1881 0af0 EBFFFFFE 		strb	r0, [sp, #17]
 1882              		.loc 4 202 0
 1883 0af4 E1A01005 		mov	r1, r5
 1884              		mov	r3, #2
 1885 0af8 E5CD0011 		mov	r0, #114
 1886              		str	r6, [sp, #0]
 1887 0afc E3A02007 		bl	io_i2c0_byte_transfer
 1888 0b00 E3A03002 		strb	r0, [sp, #18]
 1889 0b04 E3A00072 		.loc 4 203 0
 1890 0b08 E58D4000 		mov	r0, r9
 1891 0b0c EBFFFFFE 		bl	qbytes_to_long
 1892 0b10 E5CD0012 		str	r0, [r4], #4
 1893              		.loc 4 198 0
 1894 0b14 E1A00009 		cmp	r4, r7
 1895 0b18 EBFFFFFE 		cmpne	r4, #32768
 1896              		bcc	.L276
 1897 0b1c E2907004 	.LVL154:
 1898 0b20 0A000022 	.L274:
 1899              		.loc 4 206 0
 1900 0b24 E1A06004 		ldr	r0, .L350+80
 1901              		bl	uart0_printf
 1902              		b	.L246
 1903              	.LVL155:
 1904              	.L343:
 1905 0b28 E2842008 		.loc 4 107 0
 1906 0b2c E1A01005 		cmn	r4, #1
 1907 0b30 E3A03002 		beq	.L228
 1908 0b34 E3A00072 		cmp	r4, #48
 1909 0b38 E58D6000 		beq	.L346
 1910 0b3c EBFFFFFE 	.L231:
 1911              		.loc 4 358 0
 1912 0b40 E2842009 		and	r0, r4, #255
 1913              		bl	io_uart0_send_byte
 1914 0b44 E5CD000F 		.loc 4 359 0
 1915              		ldr	r0, .L350+84
 1916 0b48 E1A01005 		bl	uart0_printf
 1917 0b4c E3A03002 		b	.L228
 1918 0b50 E3A00072 	.L346:
 1919 0b54 E58D6000 		.loc 4 112 0
 1920 0b58 EBFFFFFE 		mov	r0, r4
 1921              		bl	io_uart0_send_byte
 1922 0b5c E284200A 		b	.L246
 1923              	.L235:
 1924 0b60 E5CD0010 		.loc 4 147 0
 1925              		mov	r0, r4
 1926 0b64 E1A01005 		bl	io_uart0_send_byte
 1927 0b68 E3A03002 		.loc 4 148 0
 1928 0b6c E3A00072 		ldr	r0, .L350+88
 1929 0b70 E58D6000 		bl	uart0_printf
 1930 0b74 EBFFFFFE 	.L257:
 1931              		.loc 4 149 0
 1932 0b78 E284200B 		bl	io_uart0_read_byte
 1933              		cmn	r0, #1
 1934 0b7c E5CD0011 		beq	.L257
 1935              	.L317:
 1936 0b80 E1A01005 		.loc 4 150 0
 1937 0b84 E3A03002 		bl	io_uart0_read_byte
 1938 0b88 E3A00072 		cmn	r0, #1
 1939 0b8c E58D6000 		bne	.L317
 1940 0b90 EBFFFFFE 		mov	r5, #67108864
 1941 0b94 E5CD0012 	.LVL156:
 1942              	.LVL157:
 1943 0b98 E1A00009 	.L260:
 1944 0b9c EBFFFFFE 		.loc 4 155 0
 1945 0ba0 E4840004 		ldr	r0, [r5, #0]
 1946              		mov	r1, sl
 1947 0ba4 E1540007 		mov	r2, #8
 1948 0ba8 13540902 		bl	long_to_hex_string
 1949 0bac 3AFFFFDD 		.loc 4 157 0
 1950              		ldrb	r0, [sp, #6]	@ zero_extendqisi2
 1951              		cmp	r0, #0
 1952              		beq	.L261
 1953 0bb0 E59F04B0 		mov	r4, #0
 1954 0bb4 EBFFFFFE 	.LVL158:
 1955 0bb8 EAFFFF4C 	.L263:
 1956              		.loc 4 159 0
 1957              		add	r4, r4, #1
 1958              		.loc 4 158 0
 1959 0bbc E3740001 		bl	io_uart0_send_byte
 1960 0bc0 0AFFFF18 		.loc 4 157 0
 1961 0bc4 E3540030 		ldrb	r0, [r4, sl]	@ zero_extendqisi2
 1962 0bc8 0A000004 		cmp	r0, #0
 1963              		bne	.L263
 1964              	.LVL159:
 1965 0bcc E20400FF 	.L261:
 1966 0bd0 EBFFFFFE 		.loc 4 161 0
 1967              		mov	r0, #32
 1968 0bd4 E59F0490 		bl	io_uart0_send_byte
 1969 0bd8 EBFFFFFE 		.loc 4 163 0
 1970 0bdc EAFFFF11 		bl	io_uart0_read_byte
 1971              		cmn	r0, #1
 1972              		bne	.L308
 1973 0be0 E1A00004 		.loc 4 153 0
 1974 0be4 EBFFFFFE 		mov	r3, #67108864
 1975 0be8 EAFFFF40 		add	r3, r3, #2528
 1976              		.loc 4 162 0
 1977              		add	r5, r5, #4
 1978 0bec E1A00004 		.loc 4 153 0
 1979 0bf0 EBFFFFFE 		add	r3, r3, #4
 1980              		cmp	r5, r3
 1981 0bf4 E59F0474 		bne	.L260
 1982 0bf8 EBFFFFFE 	.LVL160:
 1983              	.L308:
 1984              		.loc 4 295 0
 1985 0bfc EBFFFFFE 		ldr	r0, .L350+92
 1986 0c00 E3700001 		bl	uart0_printf
 1987 0c04 0AFFFFFC 		b	.L228
 1988              	.LVL161:
 1989              	.L344:
 1990 0c08 EBFFFFFE 		.loc 4 107 0
 1991 0c0c E3700001 		cmp	r4, #53
 1992 0c10 1AFFFFFC 		beq	.L238
 1993 0c14 E3A05301 		cmp	r4, #97
 1994              		bne	.L231
 1995              		.loc 4 301 0
 1996              		mov	r0, r4
 1997              		bl	io_uart0_send_byte
 1998 0c18 E5950000 		.loc 4 302 0
 1999 0c1c E1A0100A 		ldr	r0, .L350+96
 2000 0c20 E3A02008 		bl	uart0_printf
 2001 0c24 EBFFFFFE 		.loc 4 303 0
 2002              		ldr	r0, .L350+100
 2003 0c28 E5DD0006 		bl	uart0_printf
 2004 0c2c E3500000 		.loc 4 304 0
 2005 0c30 0A000005 		ldr	r0, .L350+104
 2006 0c34 E3A04000 		bl	uart0_printf
 2007              		b	.L228
 2008              	.L278:
 2009              		.loc 4 225 0
 2010 0c38 E2844001 		ldr	r0, .L350+108
 2011              		bl	uart0_printf
 2012 0c3c EBFFFFFE 		.loc 4 226 0
 2013              		mov	r0, r9
 2014 0c40 E7D4000A 		mov	r1, #4
 2015 0c44 E3500000 		mov	r2, #0
 2016 0c48 1AFFFFFA 		bl	uart0_scanf
 2017              		.loc 4 227 0
 2018              		ldrb	r3, [sp, #15]	@ zero_extendqisi2
 2019              		cmp	r3, #83
 2020 0c4c E3A00020 		bne	.L280
 2021 0c50 EBFFFFFE 		ldrb	r2, [sp, #16]	@ zero_extendqisi2
 2022              		cmp	r2, #77
 2023 0c54 EBFFFFFE 		beq	.L347
 2024 0c58 E3700001 	.L280:
 2025 0c5c 1A000005 		.loc 4 261 0
 2026              		ldr	r0, .L350+112
 2027 0c60 E3A03301 		bl	uart0_printf
 2028 0c64 E2833E9E 	.LVL162:
 2029              	.L297:
 2030 0c68 E2855004 		.loc 4 262 0
 2031              		ldr	r0, .L350+116
 2032 0c6c E2833004 		bl	uart0_printf
 2033 0c70 E1550003 		b	.L228
 2034 0c74 1AFFFFE7 	.LVL163:
 2035              	.L347:
 2036              		.loc 4 227 0
 2037              		ldrb	r1, [sp, #17]	@ zero_extendqisi2
 2038 0c78 E59F03F4 		cmp	r1, #66
 2039 0c7c EBFFFFFE 		bne	.L280
 2040 0c80 EAFFFEE8 		ldrb	r0, [sp, #18]	@ zero_extendqisi2
 2041              		cmp	r0, #82
 2042              		bne	.L280
 2043              		.loc 4 229 0
 2044 0c84 E3540035 		mov	r4, #0
 2045 0c88 0A0000AE 	.LVL164:
 2046 0c8c E3540061 		strb	r3, [r4, #0]
 2047 0c90 1AFFFFCD 		NOP
 2048              		.loc 4 230 0
 2049 0c94 E1A00004 		strb	r2, [r4, #1]
 2050 0c98 EBFFFFFE 		NOP
 2051              		.loc 4 231 0
 2052 0c9c E59F03D4 		strb	r1, [r4, #2]
 2053 0ca0 EBFFFFFE 		NOP
 2054              		.loc 4 232 0
 2055 0ca4 E59F03D0 		strb	r0, [r4, #3]
 2056 0ca8 EBFFFFFE 		NOP
 2057              		.loc 4 233 0
 2058 0cac E59F03CC 		sub	r1, r1, #62
 2059 0cb0 EBFFFFFE 		mov	r0, r9
 2060 0cb4 EAFFFEDB 		mov	r2, r4
 2061              		bl	uart0_scanf
 2062              		.loc 4 234 0
 2063 0cb8 E59F03C4 		ldrb	r3, [sp, #15]	@ zero_extendqisi2
 2064 0cbc EBFFFFFE 		strb	r3, [r4, #4]
 2065              		.loc 4 235 0
 2066 0cc0 E1A00009 		ldrb	r2, [sp, #16]	@ zero_extendqisi2
 2067 0cc4 E3A01004 		strb	r2, [r4, #5]
 2068 0cc8 E3A02000 		.loc 4 236 0
 2069 0ccc EBFFFFFE 		ldrb	r3, [sp, #17]	@ zero_extendqisi2
 2070              		strb	r3, [r4, #6]
 2071 0cd0 E5DD300F 		.loc 4 237 0
 2072 0cd4 E3530053 		ldrb	r2, [sp, #18]	@ zero_extendqisi2
 2073 0cd8 1A000002 		.loc 4 238 0
 2074 0cdc E5DD2010 		mov	r0, r9
 2075 0ce0 E352004D 		.loc 4 237 0
 2076 0ce4 0A000004 		strb	r2, [r4, #7]
 2077              		.loc 4 238 0
 2078              		bl	qbytes_to_long
 2079 0ce8 E59F0398 		.loc 4 239 0
 2080 0cec EBFFFFFE 		mov	r3, #65280
 2081              		add	r3, r3, #252
 2082              	.LVL165:
 2083              		cmp	r0, r3
 2084 0cf0 E59F0394 	.LVL166:
 2085 0cf4 EBFFFFFE 		.loc 4 238 0
 2086 0cf8 EAFFFECA 		mov	r5, r0
 2087              	.LVL167:
 2088              		.loc 4 239 0
 2089              		bhi	.L285
 2090 0cfc E5DD1011 		.loc 4 244 0
 2091 0d00 E3510042 		cmn	r0, #4
 2092 0d04 1AFFFFF7 	.LVL168:
 2093 0d08 E5DD0012 		addne	r4, r4, #8
 2094 0d0c E3500052 		addne	r6, r0, #11
 2095 0d10 1AFFFFF4 	.LVL169:
 2096              		beq	.L287
 2097 0d14 E3A04000 	.LVL170:
 2098              	.L338:
 2099 0d18 E5C43000 		.loc 4 247 0
 2100 0d1c E1A00000 		bl	io_uart0_read_byte
 2101              	.LVL171:
 2102 0d20 E5C42001 	.LVL172:
 2103 0d24 E1A00000 		.loc 4 246 0
 2104              		cmn	r0, #1
 2105 0d28 E5C41002 		beq	.L338
 2106 0d2c E1A00000 		.loc 4 244 0
 2107              		cmp	r6, r4
 2108 0d30 E5C40003 	.LVL173:
 2109 0d34 E1A00000 		.loc 4 248 0
 2110              		strb	r0, [r4, #0]
 2111 0d38 E241103E 		add	r4, r4, #1
 2112 0d3c E1A00009 		.loc 4 244 0
 2113 0d40 E1A02004 		bne	.L338
 2114 0d44 EBFFFFFE 	.LVL174:
 2115              	.L287:
 2116 0d48 E5DD300F 		.loc 4 250 0
 2117 0d4c E5C43004 		ldr	r0, .L350+120
 2118              	.LVL175:
 2119 0d50 E5DD2010 		bl	uart0_printf
 2120 0d54 E5C42005 		.loc 4 252 0
 2121              		ldr	r0, .L350+124
 2122 0d58 E5DD3011 		bl	uart0_printf
 2123 0d5c E5C43006 		.loc 4 254 0
 2124              		cmn	r5, #12
 2125 0d60 E5DD2012 		beq	.L292
 2126              		mov	r4, #0
 2127 0d64 E1A00009 	.LVL176:
 2128              		add	r7, r5, #12
 2129 0d68 E5C42007 		mov	r6, r4
 2130              	.L294:
 2131 0d6c EBFFFFFE 		ldrb	r5, [r4, #0]	@ zero_extendqisi2
 2132              	.LVL177:
 2133 0d70 E3A03CFF 	.L295:
 2134 0d74 E28330FC 		.loc 4 256 0
 2135              		mov	r0, #119
 2136 0d78 E1500003 		mov	r1, r8
 2137              		mov	r2, r6
 2138              		mov	r3, #2
 2139 0d7c E1A05000 		str	r5, [sp, #0]
 2140              		bl	io_i2c0_byte_transfer
 2141              		cmp	r0, #0
 2142 0d80 8A00009A 		bne	.L295
 2143              		.loc 4 254 0
 2144 0d84 E3700004 		add	r4, r4, #1
 2145              		cmp	r4, r7
 2146 0d88 12844008 		mov	r6, r4
 2147 0d8c 1280600B 		bne	.L294
 2148              	.LVL178:
 2149 0d90 0A000006 	.L292:
 2150              		.loc 4 258 0
 2151              		ldr	r0, .L350+128
 2152              		bl	uart0_printf
 2153 0d94 EBFFFFFE 		b	.L297
 2154              	.LVL179:
 2155              	.L241:
 2156              		.loc 4 310 0
 2157 0d98 E3700001 		mov	r0, r4
 2158 0d9c 0AFFFFFC 		bl	io_uart0_send_byte
 2159              		.loc 4 311 0
 2160 0da0 E1560004 		ldr	r0, .L350+132
 2161              		bl	uart0_printf
 2162              		.loc 4 312 0
 2163 0da4 E5C40000 		ldr	r0, .L350+136
 2164 0da8 E2844001 		bl	uart0_printf
 2165              		.loc 4 313 0
 2166 0dac 1AFFFFF8 		ldr	r0, .L350+140
 2167              		bl	uart0_printf
 2168              		.loc 4 314 0
 2169              		ldr	r0, .L350+144
 2170 0db0 E59F02D8 		bl	uart0_printf
 2171              		.loc 4 315 0
 2172 0db4 EBFFFFFE 		ldr	r0, .L350+148
 2173              		bl	uart0_printf
 2174 0db8 E59F02D4 		.loc 4 316 0
 2175 0dbc EBFFFFFE 		ldr	r0, .L350+152
 2176              		bl	uart0_printf
 2177 0dc0 E375000C 		.loc 4 317 0
 2178 0dc4 0A00000F 		ldr	r0, .L350+156
 2179 0dc8 E3A04000 		bl	uart0_printf
 2180              		.loc 4 318 0
 2181 0dcc E285700C 		ldr	r0, .L350+160
 2182 0dd0 E1A06004 		bl	uart0_printf
 2183              		.loc 4 319 0
 2184 0dd4 E5D45000 		ldr	r0, .L350+164
 2185              		bl	uart0_printf
 2186              		.loc 4 320 0
 2187              		ldr	r0, .L350+168
 2188 0dd8 E3A00077 		bl	uart0_printf
 2189 0ddc E1A01008 		.loc 4 321 0
 2190 0de0 E1A02006 		ldr	r0, .L350+172
 2191 0de4 E3A03002 		bl	uart0_printf
 2192 0de8 E58D5000 		.loc 4 322 0
 2193 0dec EBFFFFFE 		ldr	r0, .L350+176
 2194 0df0 E3500000 		bl	uart0_printf
 2195 0df4 1AFFFFF7 		.loc 4 323 0
 2196              		ldr	r0, .L350+180
 2197 0df8 E2844001 		bl	uart0_printf
 2198 0dfc E1540007 		.loc 4 324 0
 2199 0e00 E1A06004 		ldr	r0, .L350+184
 2200 0e04 1AFFFFF2 		bl	uart0_printf
 2201              		.loc 4 325 0
 2202              		ldr	r0, .L350+188
 2203              		bl	uart0_printf
 2204 0e08 E59F0288 		.loc 4 326 0
 2205 0e0c EBFFFFFE 		ldr	r0, .L350+192
 2206 0e10 EAFFFFB6 		bl	uart0_printf
 2207              		.loc 4 327 0
 2208              		ldr	r0, .L350+196
 2209              		bl	uart0_printf
 2210 0e14 E1A00004 		.loc 4 328 0
 2211 0e18 EBFFFFFE 		ldr	r0, .L350+200
 2212              		bl	uart0_printf
 2213 0e1c E59F0278 		.loc 4 329 0
 2214 0e20 EBFFFFFE 		ldr	r0, .L350+204
 2215              		bl	uart0_printf
 2216 0e24 E59F0274 		.loc 4 330 0
 2217 0e28 EBFFFFFE 		ldr	r0, .L350+208
 2218              		bl	uart0_printf
 2219 0e2c E59F0270 		b	.L228
 2220 0e30 EBFFFFFE 	.L345:
 2221              		.loc 4 122 0
 2222 0e34 E59F026C 		ldrb	r3, [sp, #17]	@ zero_extendqisi2
 2223 0e38 EBFFFFFE 		cmp	r3, #66
 2224              		bne	.L247
 2225 0e3c E59F0268 		ldrb	r3, [sp, #18]	@ zero_extendqisi2
 2226 0e40 EBFFFFFE 		cmp	r3, #82
 2227              		bne	.L247
 2228 0e44 E59F0264 		.loc 4 123 0
 2229 0e48 EBFFFFFE 		mov	r1, #4
 2230              		mov	r2, #0
 2231 0e4c E59F0260 		mov	r0, r9
 2232 0e50 EBFFFFFE 		bl	uart0_scanf
 2233              		.loc 4 124 0
 2234 0e54 E59F025C 		mov	r0, r9
 2235 0e58 EBFFFFFE 		bl	qbytes_to_long
 2236              		.loc 4 125 0
 2237 0e5c E59F0258 		mov	r3, #32512
 2238 0e60 EBFFFFFE 		add	r3, r3, #248
 2239              	.LVL180:
 2240 0e64 E59F0254 		cmp	r0, r3
 2241 0e68 EBFFFFFE 		bhi	.L285
 2242              		.loc 4 131 0
 2243 0e6c E59F0250 		add	r4, r0, #67108864
 2244 0e70 EBFFFFFE 	.LVL181:
 2245              		add	r4, r4, #4
 2246 0e74 E59F024C 		cmp	r4, #67108864
 2247 0e78 EBFFFFFE 		beq	.L255
 2248              		.loc 4 127 0
 2249 0e7c E59F0248 		mov	r5, #67108864
 2250 0e80 EBFFFFFE 	.LVL182:
 2251              	.L256:
 2252 0e84 E59F0244 		.loc 4 132 0
 2253 0e88 EBFFFFFE 		mov	r1, #4
 2254              		mov	r2, #0
 2255 0e8c E59F0240 		mov	r0, r9
 2256 0e90 EBFFFFFE 	.LVL183:
 2257              		bl	uart0_scanf
 2258 0e94 E59F023C 		.loc 4 133 0
 2259 0e98 EBFFFFFE 		mov	r0, r9
 2260              		bl	qbytes_to_long
 2261 0e9c E59F0238 		str	r0, [r5], #4
 2262 0ea0 EBFFFFFE 		.loc 4 131 0
 2263              		cmp	r5, r4
 2264 0ea4 E59F0234 		bne	.L256
 2265 0ea8 EBFFFFFE 	.LVL184:
 2266              	.L255:
 2267 0eac E59F0230 		.loc 4 136 0
 2268 0eb0 EBFFFFFE 		ldr	r0, .L350+36
 2269              	.LVL185:
 2270 0eb4 E59F022C 		bl	uart0_printf
 2271 0eb8 EBFFFFFE 		.loc 4 137 0
 2272 0ebc EAFFFE59 		bl	print_intro
 2273              		b	.L228
 2274              	.LVL186:
 2275 0ec0 E5DD3011 	.L238:
 2276 0ec4 E3530042 		.loc 4 268 0
 2277 0ec8 1AFFFEE6 		mov	r0, r4
 2278 0ecc E5DD3012 		bl	io_uart0_send_byte
 2279 0ed0 E3530052 		.loc 4 269 0
 2280 0ed4 1AFFFEE3 		ldr	r0, .L350+212
 2281              		bl	uart0_printf
 2282 0ed8 E3A01004 		.loc 4 270 0
 2283 0edc E3A02000 		mov	r0, r9
 2284 0ee0 E1A00009 		mov	r1, #2
 2285 0ee4 EBFFFFFE 		mov	r2, #1
 2286              		bl	uart0_scanf
 2287 0ee8 E1A00009 		.loc 4 271 0
 2288 0eec EBFFFFFE 		mov	r0, r9
 2289              		mov	r1, #2
 2290 0ef0 E3A03C7F 		bl	hex_string_to_long
 2291 0ef4 E28330F8 		.loc 4 272 0
 2292              		ands	r6, r0, #255
 2293 0ef8 E1500003 	.LVL187:
 2294 0efc 8A00003B 		beq	.L337
 2295              		.loc 4 276 0
 2296 0f00 E2804301 		ldr	r0, .L350+216
 2297              		bl	uart0_printf
 2298 0f04 E2844004 		.loc 4 277 0
 2299 0f08 E3540301 		ldr	r0, .L350+220
 2300 0f0c 0A000009 		bl	uart0_printf
 2301              	.L300:
 2302 0f10 E3A05301 		.loc 4 278 0
 2303              		bl	io_uart0_read_byte
 2304              		cmn	r0, #1
 2305              		beq	.L300
 2306 0f14 E3A01004 	.L318:
 2307 0f18 E3A02000 		.loc 4 279 0
 2308 0f1c E1A00009 		bl	io_uart0_read_byte
 2309              		cmn	r0, #1
 2310 0f20 EBFFFFFE 		bne	.L318
 2311              		.loc 4 387 0
 2312 0f24 E1A00009 		mov	r5, #0
 2313 0f28 EBFFFFFE 	.LVL188:
 2314 0f2c E4850004 		b	.L339
 2315              	.LVL189:
 2316 0f30 E1550004 	.L349:
 2317 0f34 1AFFFFF6 		.loc 4 282 0
 2318              		cmp	r4, #0
 2319              		bge	.L348
 2320              	.LVL190:
 2321 0f38 E59F00FC 	.L339:
 2322              		.loc 4 283 0
 2323 0f3c EBFFFFFE 		mov	ip, #0
 2324              		mov	r2, r5
 2325 0f40 EBFFFFFE 		mov	r1, r6
 2326 0f44 EAFFFE37 		mov	r3, #2
 2327              		mov	r0, #114
 2328              		str	ip, [sp, #0]
 2329              		bl	io_i2c0_byte_transfer
 2330 0f48 E1A00004 		mov	r4, r0
 2331 0f4c EBFFFFFE 	.LVL191:
 2332              		.loc 4 284 0
 2333 0f50 E59F0194 		bl	io_uart0_read_byte
 2334 0f54 EBFFFFFE 		cmn	r0, #1
 2335              		.loc 4 293 0
 2336 0f58 E1A00009 		mov	r0, r4
 2337 0f5c E3A01002 		.loc 4 284 0
 2338 0f60 E3A02001 		beq	.L349
 2339 0f64 EBFFFFFE 	.LVL192:
 2340              		.loc 4 290 0
 2341 0f68 E1A00009 		ldr	r0, .L350+224
 2342 0f6c E3A01002 	.LVL193:
 2343 0f70 EBFFFFFE 		bl	uart0_printf
 2344              		b	.L308
 2345 0f74 E21060FF 	.LVL194:
 2346              	.L285:
 2347 0f78 0AFFFE89 		.loc 4 240 0
 2348              		ldr	r0, .L350+228
 2349 0f7c E59F016C 	.LVL195:
 2350 0f80 EBFFFFFE 		bl	uart0_printf
 2351              		b	.L228
 2352 0f84 E59F0168 	.LVL196:
 2353 0f88 EBFFFFFE 	.L348:
 2354              		.loc 4 293 0
 2355              		bl	io_uart0_send_byte
 2356 0f8c EBFFFFFE 		.loc 4 280 0
 2357 0f90 E3700001 		mov	r3, #65536
 2358 0f94 0AFFFFFC 		add	r5, r5, #1
 2359              		sub	r3, r3, #1
 2360              		cmp	r5, r3
 2361 0f98 EBFFFFFE 		bne	.L339
 2362 0f9c E3700001 		b	.L308
 2363 0fa0 1AFFFFFC 	.L351:
 387:main.c        **** );
 2364              	.LC10
 2365 0fa4 E3A05000 		.word	.LC11
 2366              		.word	.LC12
 2367 0fa8 EA000001 		.word	.LC13
 2368              		.word	.LC21
 2369              		.word	.LC23
 2370              		.word	.LC60
 2371 0fac E3540000 		.word	.LC19
 2372 0fb0 AA000011 		.word	.LC20
 2373              		.word	.LC24
 2374              		.word	.LC14
 2375              		.word	.LC16
 2376 0fb4 E3A0C000 		.word	.LC57
 2377 0fb8 E1A02005 		.word	.LC58
 2378 0fbc E1A01006 		.word	.LC22
 2379 0fc0 E3A03002 		.word	.LC59
 2380 0fc4 E3A00072 		.word	.LC17
 2381 0fc8 E58DC000 		.word	.LC18
 2382 0fcc EBFFFFFE 		.word	.LC34
 2383 0fd0 E1A04000 		.word	.LC35
 2384              		.word	.LC36
 2385              		.word	.LC25
 2386 0fd4 EBFFFFFE 		.word	.LC29
 2387 0fd8 E3700001 		.word	.LC30
 2388              		.word	.LC26
 2389 0fdc E1A00004 		.word	.LC27
 2390              		.word	.LC28
 2391 0fe0 0AFFFFF1 		.word	.LC37
 2392              		.word	.LC38
 2393              		.word	.LC39
 2394 0fe4 E59F010C 		.word	.LC40
 2395              		.word	.LC41
 2396 0fe8 EBFFFFFE 		.word	.LC42
 2397 0fec EAFFFF21 		.word	.LC43
 2398              		.word	.LC44
 2399              		.word	.LC45
 2400              		.word	.LC46
 2401 0ff0 E59F0104 		.word	.LC47
 2402              		.word	.LC48
 2403 0ff4 EBFFFFFE 		.word	.LC49
 2404 0ff8 EAFFFE0A 		.word	.LC50
 2405              		.word	.LC51
 2406              		.word	.LC52
 2407              		.word	.LC53
 2408 0ffc EBFFFFFE 		.word	.LC54
 2409              		.word	.LC55
 2410 1000 E3A03801 		.word	.LC56
 2411 1004 E2855001 		.word	.LC31
 2412 1008 E2433001 		.word	.LC32
 2413 100c E1550003 		.word	.LC33
 2414 1010 1AFFFFE7 		.word	.LC61
 2415 1014 EAFFFF17 		.word	.LC15
 2416              	.LFE35:
 2418              		.align	2
 2419 1018 00000118 		.global	io_enable_xint
 2421 1020 000001AC 	io_enable_xint:
 2422 1024 000001F4 	.LFB23:
 2423 1028 0000023C 		.loc 1 444 0
 2424 102c 00000284 		@ args = 0, pretend = 0, frame = 0
 2425 1030 000002CC 		@ frame_needed = 0, uses_anonymous_args = 0
 2426 1034 00000338 		@ link register save eliminated.
 2427 1038 00000370 		@ lr needed for prologue
 2428 103c 00000380 	.LBB6:
 2429 1040 0000050C 	.LBB7:
 2430 1044 00000570 		.loc 1 428 0
 2431 1048 00000C80 		 mrs r3, cpsr
 2432 104c 000004B0 	.LVL197:
 2433 1050 000004EC 	.LBE7:
 2434 1054 0000059C 	.LBE6:
 2435 1058 00000384 	.LBB8:
 2436 105c 0000041C 	.LBB9:
 2437 1060 00000C04 		.loc 1 437 0
 2438 1064 00000C34 		bic	r3, r3, #192
 2439 1068 0000055C 	.LVL198:
 2440 106c 00000C5C 		 msr cpsr, r3
 2441 1070 00000444 	.LBE9:
 2442 1074 0000048C 	.LBE8:
 2443 1078 00000758 		.loc 1 448 0
 2444 107c 0000078C 		mov	pc, lr
 2445 1080 000007F8 	.LFE23:
 2447 1088 00000664 		.align	2
 2448 108c 00000688 		.global	io_disable_xint
 2450 1094 00000634 	io_disable_xint:
 2451 1098 00000654 	.LFB24:
 2452 109c 0000083C 		.loc 1 454 0
 2453 10a0 00000858 		@ args = 0, pretend = 0, frame = 0
 2454 10a4 00000878 		@ frame_needed = 0, uses_anonymous_args = 0
 2455 10a8 000008B8 		@ link register save eliminated.
 2456 10ac 000008EC 		@ lr needed for prologue
 2457 10b0 00000928 	.LBB14:
 2458 10b4 00000964 	.LBB15:
 2459 10b8 00000988 		.loc 1 428 0
 2460 10bc 000009C4 		 mrs r3, cpsr
 2461 10c0 000009E0 	.LVL199:
 2462 10c4 000009F8 	.LBE15:
 2463 10c8 00000A40 	.LBE14:
 2464 10cc 00000A80 	.LBB16:
 2465 10d0 00000AB8 	.LBB17:
 2466 10d4 00000ADC 		.loc 1 437 0
 2467 10d8 00000B20 		orr	r3, r3, #192
 2468 10dc 00000B60 	.LVL200:
 2469 10e0 00000B8C 		 msr cpsr, r3
 2470 10e4 00000BB8 	.LBE17:
 2471 10e8 00000BDC 	.LBE16:
 2472 10ec 00000694 		.loc 1 458 0
 2473 10f0 000006D0 		mov	pc, lr
 2474 10f4 00000710 	.LFE24:
 2476 10fc 000003F8 		.section	.debug_frame,"",%progbits
 2477              	.Lframe0:
 2478              		.4byte	.LECIE0-.LSCIE0
 2479              	.LSCIE0:
 2480              		.4byte	0xffffffff
 2481              		.byte	0x1
 2482              		.ascii	"\000"
 2483              		.uleb128 0x1
 417:../lib/io_driver.c **** ******
 418:../lib/io_driver.c **** {
 419:../lib/io_driver.c **** 	unsigned long _cmsr;
 420:../lib/io_driver.c **** 	asm volatile (" mrs %0, cpsr" : "=r" (_cmsr) : /* no inputs */  );
 421:../lib/io_driver.c **** 	return _cmsr;
 422:../lib/io_driver.c **** }
 423:../lib/io_driver.c **** 
 424:../lib/io_driver.c **** // ******************************************************************************
 425:../lib/io_driver.c **** // write CMSR value
 426:../lib/io_driver.c ****    static inline void set_cmsr(unsigned long _cmsr)
 427:../lib/io_driver.c **** // ******************************************************************************
 428:../lib/io_driver.c **** {
 429:../lib/io_driver.c **** 	asm volatile (" msr cpsr, %0" : /* no outputs */ : "r" (_cmsr)  );
 430:../lib/io_driver.c **** }
 431:../lib/io_driver.c **** 
 432:../lib/io_driver.c **** // ******************************************************************************
 433:../lib/io_driver.c **** // Enable all external INTs
 434:../lib/io_driver.c ****    void io_enable_xint(void)
 435:../lib/io_driver.c **** // ******************************************************************************
 436:../lib/io_driver.c **** {
 437:../lib/io_driver.c **** 	unsigned long _cmsr = get_cmsr();
 438:../lib/io_driver.c **** 	_cmsr = _cmsr & ~(1<<CMSR_FIQ) &~(1<<CMSR_IRQ);
 439:../lib/io_driver.c **** 	set_cmsr(_cmsr);
 440:../lib/io_driver.c **** }
 441:../lib/io_driver.c **** 
 442:../lib/io_driver.c **** // ******************************************************************************
 443:../lib/io_driver.c **** // Disable all global IBTs
 444:../lib/io_driver.c ****    void io_disable_xint(void)
 2484              	FDE0:
 2485              		.4byte	.Lframe0
 2486              		.4byte	.LFB2
 2487              		.4byte	.LFE2-.LFB2
 2488              		.align	2
 2489              	.LEFDE0:
 2490              	.LSFDE2:
 2491              		.4byte	.LEFDE2-.LASFDE2
 2492 1100 E10F3000 	.LASFDE2:
 2493              		.4byte	.Lframe0
 2494              		.4byte	.LFB3
 2495              		.4byte	.LFE3-.LFB3
 2496              		.align	2
 2497              	.LEFDE2:
 2498              	.LSFDE4:
 2499 1104 E3C330C0 		.4byte	.LEFDE4-.LASFDE4
 2500              	.LASFDE4:
 2501 1108 E129F003 		.4byte	.Lframe0
 2502              		.4byte	.LFB4
 2503              		.4byte	.LFE4-.LFB4
 445:../lib/io_driver.c **** void)
 446:../lib/io_driver.c **** // ******************************************************************************
 447:../lib/io_driver.c **** {
 448:../lib/io_driver.c **** 	unsigned long _cmsr = get_cmsr();
 2504              	LSFDE6:
 2505 110c E1A0F00E 		.4byte	.LEFDE6-.LASFDE6
 2506              	.LASFDE6:
 2507              		.4byte	.Lframe0
 2508              		.4byte	.LFB5
 2509              		.4byte	.LFE5-.LFB5
 2510              		.align	2
 2511              	.LEFDE6:
 2512              	.LSFDE8:
 449:../lib/io_driver.c **** );
 450:../lib/io_driver.c **** 	_cmsr = _cmsr | (1<<CMSR_FIQ) | (1<<CMSR_IRQ);
 451:../lib/io_driver.c **** 	set_cmsr(_cmsr);
 452:../lib/io_driver.c **** }
 453:../lib/io_driver.c **** ...
 2513              	LEFDE8-.LASFDE8
 2514              	.LASFDE8:
 2515              		.4byte	.Lframe0
 2516              		.4byte	.LFB6
 2517              		.4byte	.LFE6-.LFB6
 2518              		.align	2
 2519              	.LEFDE8:
 2520              	.LSFDE10:
 2521 1110 E10F3000 		.4byte	.LEFDE10-.LASFDE10
 2522              	.LASFDE10:
 2523              		.4byte	.Lframe0
 2524              		.4byte	.LFB7
 2525              		.4byte	.LFE7-.LFB7
 2526              		.align	2
 2527              	.LEFDE10:
 2528 1114 E38330C0 	.LSFDE12:
 2529              		.4byte	.LEFDE12-.LASFDE12
 2530 1118 E129F003 	.LASFDE12:
 2531              		.4byte	.Lframe0
 2532              		.4byte	.LFB8
 2533              		.4byte	.LFE8-.LFB8
 2534 111c E1A0F00E 		.byte	0x4
 2535              		.4byte	.LCFI0-.LFB8
 2536              		.byte	0xe
 2913              		.4byte	0x0
DEFINED SYMBOLS
                            *ABS*:00000000 main.c
C:\Users\jh\AppData\Local\Temp/ccuEcaaa.s:13     .text:00000000 io_read_gpio0_pin
C:\Users\jh\AppData\Local\Temp/ccuEcaaa.s:22     .text:00000000 $a
C:\Users\jh\AppData\Local\Temp/ccuEcaaa.s:39     .text:00000018 io_read_gpio0_port
C:\Users\jh\AppData\Local\Temp/ccuEcaaa.s:59     .text:00000024 io_set_gpio0_pin
C:\Users\jh\AppData\Local\Temp/ccuEcaaa.s:85     .text:00000040 io_clr_gpio0_pin
C:\Users\jh\AppData\Local\Temp/ccuEcaaa.s:111    .text:00000064 io_toggle_gpio0_pin
C:\Users\jh\AppData\Local\Temp/ccuEcaaa.s:137    .text:00000080 io_set_gpio0_port
C:\Users\jh\AppData\Local\Temp/ccuEcaaa.s:157    .text:0000008c io_set_pwm
C:\Users\jh\AppData\Local\Temp/ccuEcaaa.s:229    .text:00000108 io_get_pwm
C:\Users\jh\AppData\Local\Temp/ccuEcaaa.s:282    .text:00000158 io_uart0_read_byte
C:\Users\jh\AppData\Local\Temp/ccuEcaaa.s:306    .text:00000170 io_uart0_send_byte
C:\Users\jh\AppData\Local\Temp/ccuEcaaa.s:331    .text:0000018c io_spi0_config
C:\Users\jh\AppData\Local\Temp/ccuEcaaa.s:361    .text:000001b0 io_spi0_speed
C:\Users\jh\AppData\Local\Temp/ccuEcaaa.s:381    .text:000001bc io_spi0_trans
C:\Users\jh\AppData\Local\Temp/ccuEcaaa.s:418    .text:000001f4 io_spi0_enable
C:\Users\jh\AppData\Local\Temp/ccuEcaaa.s:444    .text:00000210 io_spi0_disable
C:\Users\jh\AppData\Local\Temp/ccuEcaaa.s:470    .text:00000234 io_i2c0_speed
C:\Users\jh\AppData\Local\Temp/ccuEcaaa.s:503    .text:00000260 io_i2c0_byte_transfer
C:\Users\jh\AppData\Local\Temp/ccuEcaaa.s:647    .text:00000390 get_syscpreg
C:\Users\jh\AppData\Local\Temp/ccuEcaaa.s:662    .text:000003a0 $d
C:\Users\jh\AppData\Local\Temp/ccuEcaaa.s:679    .text:000003e0 $a
C:\Users\jh\AppData\Local\Temp/ccuEcaaa.s:785    .text:00000468 set_syscpreg
C:\Users\jh\AppData\Local\Temp/ccuEcaaa.s:804    .text:0000047c $d
C:\Users\jh\AppData\Local\Temp/ccuEcaaa.s:814    .text:0000049c $a
C:\Users\jh\AppData\Local\Temp/ccuEcaaa.s:834    .text:000004bc uart0_printf
C:\Users\jh\AppData\Local\Temp/ccuEcaaa.s:879    .text:000004f4 uart0_scanf
C:\Users\jh\AppData\Local\Temp/ccuEcaaa.s:946    .text:0000054c $d
C:\Users\jh\AppData\Local\Temp/ccuEcaaa.s:952    .text:00000550 uart0_print_buffer
C:\Users\jh\AppData\Local\Temp/ccuEcaaa.s:958    .text:00000550 $a
C:\Users\jh\AppData\Local\Temp/ccuEcaaa.s:982    .text:00000574 long_to_hex_string
C:\Users\jh\AppData\Local\Temp/ccuEcaaa.s:1052   .text:000005e4 get_adc
C:\Users\jh\AppData\Local\Temp/ccuEcaaa.s:1093   .text:00000624 delay
C:\Users\jh\AppData\Local\Temp/ccuEcaaa.s:1125   .text:0000064c string_cmpc
C:\Users\jh\AppData\Local\Temp/ccuEcaaa.s:1176   .text:00000694 hex_string_to_long
C:\Users\jh\AppData\Local\Temp/ccuEcaaa.s:1240   .text:00000700 qbytes_to_long
C:\Users\jh\AppData\Local\Temp/ccuEcaaa.s:1281   .text:00000720 print_intro
C:\Users\jh\AppData\Local\Temp/ccuEcaaa.s:1303   .text:00000740 $d
C:\Users\jh\AppData\Local\Temp/ccuEcaaa.s:1525   .text:0000074c main
C:\Users\jh\AppData\Local\Temp/ccuEcaaa.s:1530   .text:0000074c $a
C:\Users\jh\AppData\Local\Temp/ccuEcaaa.s:2419   .text:00001018 $d
C:\Users\jh\AppData\Local\Temp/ccuEcaaa.s:2482   .text:00001100 io_enable_xint
C:\Users\jh\AppData\Local\Temp/ccuEcaaa.s:2492   .text:00001100 $a
C:\Users\jh\AppData\Local\Temp/ccuEcaaa.s:2511   .text:00001110 io_disable_xint

UNDEFINED SYMBOLS
_jump_to_program
