   1              		.file	"main.c"
   9              	.Ltext0:
  10              		.align	2
  11              		.global	io_read_gpio0_pin
  13              	io_read_gpio0_pin:
  14              	.LFB2:
  15              		.file 1 "../lib/io_driver.c"
   1:../lib/io_driver.c **** #include "io_driver.h"
   2:../lib/io_driver.c **** #include "storm_core.h"
   3:../lib/io_driver.c **** #include "storm_soc_basic.h"
   4:../lib/io_driver.c **** 
   5:../lib/io_driver.c **** // ################################################################################################
   6:../lib/io_driver.c **** // General Purpose IO (GENERAL_PURPOSE_CONTROLLER_0)
   7:../lib/io_driver.c **** // ################################################################################################
   8:../lib/io_driver.c **** 
   9:../lib/io_driver.c **** // ******************************************************************************
  10:../lib/io_driver.c **** // Read general purpose IO pin
  11:../lib/io_driver.c ****    unsigned long io_read_gpio0_pin(unsigned char pin)
  12:../lib/io_driver.c **** // ******************************************************************************
  13:../lib/io_driver.c **** {
  16              	 args = 0, pretend = 0, frame = 0
  17              		@ frame_needed = 0, uses_anonymous_args = 0
  18              		@ link register save eliminated.
  19              	.LVL0:
  20              		.loc 1 17 0
  14:../lib/io_driver.c **** //	unsigned long _cmsr = get_cmsr();
  15:../lib/io_driver.c **** //	set_cmsr(_cmsr  | (1<<CMSR_IRQ) | (1<<CMSR_FIQ));
  16:../lib/io_driver.c **** 
  17:../lib/io_driver.c **** 		unsigned long temp = GPIO0_IN & (1<<pin);
  21              	r3, #61440
  22 0000 E3E03A0F 		ldr	r1, [r3, #-4091]
  23 0004 E5131FFB 		.loc 1 13 0
  24              		and	r2, r0, #255
  25 0008 E20020FF 		.loc 1 21 0
  18:../lib/io_driver.c **** 	
  19:../lib/io_driver.c **** //	set_cmsr(_cmsr);
  20:../lib/io_driver.c **** 	return temp;
  21:../lib/io_driver.c **** }
  26              	r0, #1
  27 000c E3A00001 	.LVL1:
  28              		and	r0, r1, r0, asl r2
  29 0010 E0010210 		.loc 1 13 0
  30              		@ lr needed for prologue
  31              		.loc 1 21 0
  32              		mov	pc, lr
  33 0014 E1A0F00E 	.LFE2:
  35              		.align	2
  36              		.global	io_read_gpio0_port
  38              	io_read_gpio0_port:
  39              	.LFB3:
  40              		.loc 1 27 0
  22:../lib/io_driver.c **** 
  23:../lib/io_driver.c **** // ******************************************************************************
  24:../lib/io_driver.c **** // Read general purpose IO port
  25:../lib/io_driver.c ****    unsigned long io_read_gpio0_port(void)
  26:../lib/io_driver.c **** // ******************************************************************************
  27:../lib/io_driver.c **** {
  41              	etend = 0, frame = 0
  42              		@ frame_needed = 0, uses_anonymous_args = 0
  43              		@ link register save eliminated.
  44              		.loc 1 31 0
  28:../lib/io_driver.c **** //	unsigned long _cmsr = get_cmsr();
  29:../lib/io_driver.c **** //	set_cmsr(_cmsr  | (1<<CMSR_IRQ) | (1<<CMSR_FIQ));
  30:../lib/io_driver.c **** 
  31:../lib/io_driver.c **** 		unsigned long temp = GPIO0_IN;
  45              		r3, #61440
  46 0018 E3E03A0F 		ldr	r0, [r3, #-4091]
  47 001c E5130FFB 	.LVL2:
  48              		.loc 1 27 0
  49              		@ lr needed for prologue
  50              	.LVL3:
  51              		.loc 1 35 0
  32:../lib/io_driver.c **** 
  33:../lib/io_driver.c **** //	set_cmsr(_cmsr);
  34:../lib/io_driver.c **** 	return temp;
  35:../lib/io_driver.c **** }
  52              	, lr
  53 0020 E1A0F00E 	.LFE3:
  55              		.align	2
  56              		.global	io_set_gpio0_pin
  58              	io_set_gpio0_pin:
  59              	.LFB4:
  60              		.loc 1 41 0
  36:../lib/io_driver.c **** 
  37:../lib/io_driver.c **** // ******************************************************************************
  38:../lib/io_driver.c **** // Set general purpose IO port
  39:../lib/io_driver.c ****    void io_set_gpio0_pin(unsigned char pin)
  40:../lib/io_driver.c **** // ******************************************************************************
  41:../lib/io_driver.c **** {
  61              	 0, pretend = 0, frame = 0
  62              		@ frame_needed = 0, uses_anonymous_args = 0
  63              		@ link register save eliminated.
  64              	.LVL4:
  65              		.loc 1 45 0
  42:../lib/io_driver.c **** //	unsigned long _cmsr = get_cmsr();
  43:../lib/io_driver.c **** //	set_cmsr(_cmsr  | (1<<CMSR_IRQ) | (1<<CMSR_FIQ));
  44:../lib/io_driver.c **** 
  45:../lib/io_driver.c **** 		GPIO0_OUT = GPIO0_OUT | (1<<pin);
  66              	r1, #61440
  67 0024 E3E01A0F 		ldr	r3, [r1, #-4095]
  68 0028 E5113FFF 		.loc 1 41 0
  69              		and	r0, r0, #255
  70 002c E20000FF 		.loc 1 45 0
  71              		mov	r2, #1
  72 0030 E3A02001 		orr	r3, r3, r2, asl r0
  73 0034 E1833012 		.loc 1 41 0
  74              		@ lr needed for prologue
  75              		.loc 1 45 0
  76              		str	r3, [r1, #-4095]
  77 0038 E5013FFF 		.loc 1 48 0
  46:../lib/io_driver.c **** 
  47:../lib/io_driver.c **** //	set_cmsr(_cmsr);
  48:../lib/io_driver.c **** }
  78              	.LFE4:
  80              		.align	2
  81              		.global	io_clr_gpio0_pin
  83              	io_clr_gpio0_pin:
  84              	.LFB5:
  85              		.loc 1 54 0
  86              		@ args = 0, pretend = 0, frame = 0
  49:../lib/io_driver.c **** 
  50:../lib/io_driver.c **** // ******************************************************************************
  51:../lib/io_driver.c **** // Clear general purpose IO port
  52:../lib/io_driver.c ****    void io_clr_gpio0_pin(unsigned char pin)
  53:../lib/io_driver.c **** // ******************************************************************************
  54:../lib/io_driver.c **** {
  87              	needed = 0, uses_anonymous_args = 0
  88              		@ link register save eliminated.
  89              	.LVL5:
  90              		and	r0, r0, #255
  91              		.loc 1 58 0
  92 0040 E20000FF 		mov	r2, #1
  55:../lib/io_driver.c **** //	unsigned long _cmsr = get_cmsr();
  56:../lib/io_driver.c **** //	set_cmsr(_cmsr  | (1<<CMSR_IRQ) | (1<<CMSR_FIQ));
  57:../lib/io_driver.c **** 
  58:../lib/io_driver.c **** 		GPIO0_OUT = GPIO0_OUT & ~(1<<pin);
  93              	2, r2, asl r0
  94 0044 E3A02001 		mvn	r1, #61440
  95 0048 E1A02012 		ldr	r3, [r1, #-4095]
  96 004c E3E01A0F 		mvn	r2, r2
  97 0050 E5113FFF 		and	r3, r3, r2
  98 0054 E1E02002 		.loc 1 54 0
  99 0058 E0033002 		@ lr needed for prologue
 100              		.loc 1 58 0
 101              		str	r3, [r1, #-4095]
 102              		.loc 1 61 0
 103 005c E5013FFF 		mov	pc, lr
  59:../lib/io_driver.c **** 
  60:../lib/io_driver.c **** //	set_cmsr(_cmsr);
  61:../lib/io_driver.c **** }
 104              	ze	io_clr_gpio0_pin, .-io_clr_gpio0_pin
 105 0060 E1A0F00E 		.align	2
 106              		.global	io_toggle_gpio0_pin
 108              	io_toggle_gpio0_pin:
 109              	.LFB6:
 110              		.loc 1 66 0
 111              		@ args = 0, pretend = 0, frame = 0
 112              		@ frame_needed = 0, uses_anonymous_args = 0
  62:../lib/io_driver.c **** // ******************************************************************************
  63:../lib/io_driver.c **** // Set general purpose IO port
  64:../lib/io_driver.c ****    void io_toggle_gpio0_pin(unsigned char pin)
  65:../lib/io_driver.c **** // ******************************************************************************
  66:../lib/io_driver.c **** {
 113              	egister save eliminated.
 114              	.LVL6:
 115              		.loc 1 70 0
 116              		mvn	r1, #61440
 117              		ldr	r3, [r1, #-4095]
  67:../lib/io_driver.c **** //	unsigned long _cmsr = get_cmsr();
  68:../lib/io_driver.c **** //	set_cmsr(_cmsr  | (1<<CMSR_IRQ) | (1<<CMSR_FIQ));
  69:../lib/io_driver.c **** 
  70:../lib/io_driver.c **** 		GPIO0_OUT = GPIO0_OUT ^ (1<<pin);
 118              	 1 66 0
 119 0064 E3E01A0F 		and	r0, r0, #255
 120 0068 E5113FFF 		.loc 1 70 0
 121              		mov	r2, #1
 122 006c E20000FF 		eor	r3, r3, r2, asl r0
 123              		.loc 1 66 0
 124 0070 E3A02001 		@ lr needed for prologue
 125 0074 E0233012 		.loc 1 70 0
 126              		str	r3, [r1, #-4095]
 127              		.loc 1 73 0
 128              		mov	pc, lr
 129 0078 E5013FFF 	.LFE6:
  71:../lib/io_driver.c **** 
  72:../lib/io_driver.c **** //	set_cmsr(_cmsr);
  73:../lib/io_driver.c **** }
 130              	ggle_gpio0_pin, .-io_toggle_gpio0_pin
 131 007c E1A0F00E 		.align	2
 132              		.global	io_set_gpio0_port
 134              	io_set_gpio0_port:
 135              	.LFB7:
 136              		.loc 1 79 0
 137              		@ args = 0, pretend = 0, frame = 0
 138              		@ frame_needed = 0, uses_anonymous_args = 0
  74:../lib/io_driver.c **** 
  75:../lib/io_driver.c **** // ******************************************************************************
  76:../lib/io_driver.c **** // Clear general purpose IO port
  77:../lib/io_driver.c ****    void io_set_gpio0_port(unsigned long value)
  78:../lib/io_driver.c **** // ******************************************************************************
  79:../lib/io_driver.c **** {
 139              	egister save eliminated.
 140              	.LVL7:
 141              		.loc 1 83 0
 142              		mvn	r3, #61440
 143              		.loc 1 79 0
  80:../lib/io_driver.c **** //	unsigned long _cmsr = get_cmsr();
  81:../lib/io_driver.c **** //	set_cmsr(_cmsr  | (1<<CMSR_IRQ) | (1<<CMSR_FIQ));
  82:../lib/io_driver.c **** 
  83:../lib/io_driver.c **** 		GPIO0_OUT = value;
 144              	 needed for prologue
 145 0080 E3E03A0F 		.loc 1 83 0
 146              		str	r0, [r3, #-4095]
 147              		.loc 1 86 0
 148              		mov	pc, lr
 149 0084 E5030FFF 	.LFE7:
  84:../lib/io_driver.c **** 
  85:../lib/io_driver.c **** //	set_cmsr(_cmsr);
  86:../lib/io_driver.c **** }
 150              		io_set_gpio0_port, .-io_set_gpio0_port
 151 0088 E1A0F00E 		.align	2
 152              		.global	io_set_pwm
 154              	io_set_pwm:
 155              	.LFB8:
 156              		.loc 1 98 0
 157              		@ args = 0, pretend = 0, frame = 0
 158              		@ frame_needed = 0, uses_anonymous_args = 0
  87:../lib/io_driver.c **** 
  88:../lib/io_driver.c **** 
  89:../lib/io_driver.c **** 
  90:../lib/io_driver.c **** // ################################################################################################
  91:../lib/io_driver.c **** // Pulse-Width-Modulation Controller
  92:../lib/io_driver.c **** // ################################################################################################
  93:../lib/io_driver.c **** 
  94:../lib/io_driver.c **** // ******************************************************************************
  95:../lib/io_driver.c **** // Set pwm value
  96:../lib/io_driver.c ****    void io_set_pwm(unsigned char port, unsigned char data)
  97:../lib/io_driver.c **** // ******************************************************************************
  98:../lib/io_driver.c **** {
 159              	nd	r0, r0, #255
 160              		.loc 1 105 0
 161              		cmp	r0, #7
 162              		.loc 1 98 0
 163 008c E20000FF 		stmfd	sp!, {r4, lr}
  99:../lib/io_driver.c **** //	unsigned long _cmsr = get_cmsr();
 100:../lib/io_driver.c **** //	set_cmsr(_cmsr  | (1<<CMSR_IRQ) | (1<<CMSR_FIQ));
 101:../lib/io_driver.c **** 
 102:../lib/io_driver.c **** 	unsigned long temp = 0;
 103:../lib/io_driver.c **** 
 104:../lib/io_driver.c **** 	// value adjustment
 105:../lib/io_driver.c **** 	if(port > 7)
 164              	0:
 165 0090 E3500007 		.loc 1 105 0
 166              		mov	ip, #0
 167 0094 E92D4010 		mvn	lr, #255
 168              		.loc 1 98 0
 169              		and	r1, r1, #255
 170 0098 E3A0C000 		.loc 1 105 0
 171 009c E3E0E0FF 		bhi	.L16
 172              		.loc 1 117 0
 173 00a0 E20110FF 		sub	r3, r0, #4
 174              		and	r3, r3, #255
 175 00a4 8A000011 		.loc 1 108 0
 106:../lib/io_driver.c **** 		port = 0;
 107:../lib/io_driver.c **** 
 108:../lib/io_driver.c **** 	if(port < 4){
 109:../lib/io_driver.c **** 		temp = PWM0_CONF0; // get working copy
 110:../lib/io_driver.c **** 		temp = temp & ~(0xFF << (port*8)); // clear old value
 111:../lib/io_driver.c **** 		temp = temp | (unsigned long)(data << (port*8)); // insert new value
 112:../lib/io_driver.c **** 		PWM0_CONF0 = temp;
 113:../lib/io_driver.c **** 	}
 114:../lib/io_driver.c **** 	else{
 115:../lib/io_driver.c **** 		port = port-4;
 116:../lib/io_driver.c **** 		temp = PWM0_CONF1; // get working copy
 117:../lib/io_driver.c **** 		temp = temp & ~(0xFF << (port*8)); // clear old value
 176              		.loc 1 117 0
 177 00a8 E2403004 		mov	lr, r3, asl #3
 178 00ac E20330FF 		.loc 1 116 0
 179              		mvn	r4, #61440
 180 00b0 E3500003 		.loc 1 108 0
 181              		mov	ip, r0, asl #3
 182 00b4 E1A0E183 		bls	.L22
 183              		.loc 1 117 0
 184 00b8 E3E04A0F 		mov	r3, #255
 185              		mov	r3, r3, asl lr
 186 00bc E1A0C180 		.loc 1 116 0
 187 00c0 9A000007 		ldr	r2, [r4, #-3979]
 188              	.LVL9:
 189 00c4 E3A030FF 		.loc 1 117 0
 190 00c8 E1A03E13 		mvn	r3, r3
 191              		and	r2, r2, r3
 192 00cc E5142F8B 	.LVL10:
 193              		.loc 1 118 0
 194              		orr	r2, r2, r1, asl lr
 195 00d0 E1E03003 	.LVL11:
 196 00d4 E0022003 		.loc 1 119 0
 197              		str	r2, [r4, #-3979]
 118:../lib/io_driver.c **** 		temp = temp | (unsigned long)(data << (port*8)); // insert new value
 198              	LVL12:
 199 00d8 E1822E11 	.L22:
 200              		.loc 1 108 0
 119:../lib/io_driver.c **** 		PWM0_CONF1 = temp;
 201              	v	r3, #255
 202 00dc E5042F8B 		mov	r3, r3, asl ip
 203 00e0 E8BD8010 		mvn	lr, r3
 204              	.L16:
 205              		.loc 1 109 0
 206              		mvn	r2, #61440
 207 00e4 E3A030FF 		ldr	r3, [r2, #-3983]
 208 00e8 E1A03C13 	.LVL13:
 209 00ec E1E0E003 		.loc 1 110 0
 210              		and	r3, r3, lr
 211              	.LVL14:
 212 00f0 E3E02A0F 		.loc 1 111 0
 213 00f4 E5123F8F 		orr	r3, r3, r1, asl ip
 214              	.LVL15:
 215              		.loc 1 112 0
 216 00f8 E003300E 		str	r3, [r2, #-3983]
 217              		ldmfd	sp!, {r4, pc}
 218              	.LFE8:
 220              		.align	2
 221              		.global	io_get_pwm
 223 0104 E8BD8010 	io_get_pwm:
 224              	.LFB9:
 225              		.loc 1 128 0
 226              		@ args = 0, pretend = 0, frame = 0
 227              		@ frame_needed = 0, uses_anonymous_args = 0
 228              		@ link register save eliminated.
 229              	.LVL16:
 230              		and	r0, r0, #255
 120:../lib/io_driver.c **** 	}
 121:../lib/io_driver.c **** //	set_cmsr(_cmsr);
 122:../lib/io_driver.c **** }
 123:../lib/io_driver.c **** 
 124:../lib/io_driver.c **** // ******************************************************************************
 125:../lib/io_driver.c **** // Set pwm value
 126:../lib/io_driver.c ****    unsigned char io_get_pwm(unsigned char port)
 127:../lib/io_driver.c **** // ******************************************************************************
 128:../lib/io_driver.c **** {
 231              	c 1 128 0
 232              		@ lr needed for prologue
 233              		.loc 1 135 0
 234              		mov	r2, #0
 235              		bhi	.L26
 236 0108 E20000FF 		.loc 1 142 0
 129:../lib/io_driver.c **** //	unsigned long _cmsr = get_cmsr();
 130:../lib/io_driver.c **** //	set_cmsr(_cmsr  | (1<<CMSR_IRQ) | (1<<CMSR_FIQ));
 131:../lib/io_driver.c **** 
 132:../lib/io_driver.c **** 	unsigned long temp = 0;
 133:../lib/io_driver.c **** 
 134:../lib/io_driver.c **** 	// value adjustment
 135:../lib/io_driver.c **** 	if(port > 7)
 237              	3, r0, #4
 238 010c E3500007 		.loc 1 138 0
 239              		cmp	r0, #3
 240              		.loc 1 142 0
 241              		and	r2, r3, #255
 242 0110 E3A02000 		.loc 1 138 0
 243 0114 8A00000A 		bls	.L31
 136:../lib/io_driver.c **** 		port = 0;
 137:../lib/io_driver.c **** 
 138:../lib/io_driver.c **** 	if(port < 4)
 139:../lib/io_driver.c **** 		temp = PWM0_CONF0; // get config register
 140:../lib/io_driver.c **** 	else{
 141:../lib/io_driver.c **** 		port = port-4;
 142:../lib/io_driver.c **** 		temp = PWM0_CONF1; // get config register
 244              	 142 0
 245 0118 E2403004 		mvn	r3, #61440
 246              		ldr	r0, [r3, #-3979]
 247 011c E3500003 	.LVL17:
 248              		mov	r2, r2, asl #3
 249 0120 E20320FF 		mov	r0, r0, lsr r2
 250              	.LVL18:
 251 0124 9A000005 		and	r0, r0, #255
 252              		.loc 1 149 0
 253 0128 E3E03A0F 		mov	pc, lr
 254 012c E5130F8B 	.LVL19:
 255              	.L31:
 256 0130 E1A02182 		.loc 1 138 0
 257 0134 E1A00230 		mov	r2, r0, asl #3
 258              	.L26:
 259 0138 E20000FF 		.loc 1 139 0
 143:../lib/io_driver.c **** 	}
 144:../lib/io_driver.c **** 
 145:../lib/io_driver.c **** 	temp = temp >> (port*8); // only keep designated byte
 146:../lib/io_driver.c **** 
 147:../lib/io_driver.c **** //	set_cmsr(_cmsr);
 148:../lib/io_driver.c **** 	return (unsigned char)temp;
 149:../lib/io_driver.c **** }
 260              		ldr	r0, [r3, #-3983]
 261 013c E1A0F00E 	.LVL20:
 262              		.loc 1 142 0
 263              		mov	r0, r0, lsr r2
 264              	.LVL21:
 265 0140 E1A02180 		and	r0, r0, #255
 266              		.loc 1 149 0
 267              		mov	pc, lr
 268 0144 E3E03A0F 	.LFE9:
 270              		.align	2
 271              		.global	io_uart0_read_byte
 273              	io_uart0_read_byte:
 274 0150 E20000FF 	.LFB10:
 275              		.loc 1 161 0
 276 0154 E1A0F00E 		@ args = 0, pretend = 0, frame = 0
 277              		@ frame_needed = 0, uses_anonymous_args = 0
 278              		@ link register save eliminated.
 279              		.loc 1 166 0
 280              		mvn	r2, #61440
 281              		ldr	r3, [r2, #-3835]
 282              		tst	r3, #2
 283              		mvn	r0, #0
 150:../lib/io_driver.c **** 
 151:../lib/io_driver.c **** 
 152:../lib/io_driver.c **** 
 153:../lib/io_driver.c **** // ################################################################################################
 154:../lib/io_driver.c **** // General Purpose UART "miniUART" (UART_0)
 155:../lib/io_driver.c **** // ################################################################################################
 156:../lib/io_driver.c **** 
 157:../lib/io_driver.c **** // ******************************************************************************
 158:../lib/io_driver.c **** // Read one byte via UART 0
 159:../lib/io_driver.c ****    int io_uart0_read_byte(void)
 160:../lib/io_driver.c **** // ******************************************************************************
 161:../lib/io_driver.c **** {
 284              	drne	r0, [r2, #-3839]
 285              		.loc 1 161 0
 286              		@ lr needed for prologue
 287              	.LVL23:
 162:../lib/io_driver.c **** //	unsigned long _cmsr = get_cmsr();
 163:../lib/io_driver.c **** //	set_cmsr(_cmsr  | (1<<CMSR_IRQ) | (1<<CMSR_FIQ));
 164:../lib/io_driver.c **** 
 165:../lib/io_driver.c **** 	int temp;
 166:../lib/io_driver.c **** 	if ((UART0_SREG & (1<<CUART_RXD)) != 0) // byte available?
 288              	c 1 173 0
 289 0158 E3E02A0F 		mov	pc, lr
 290 015c E5123EFB 	.LFE10:
 292 0164 E3E00000 		.align	2
 293              		.global	io_uart0_send_byte
 167:../lib/io_driver.c **** 		temp = UART0_DATA;
 294              		io_uart0_send_byte, %function
 295 0168 15120EFF 	io_uart0_send_byte:
 296              	.LFB11:
 297              		.loc 1 179 0
 298              		@ args = 0, pretend = 0, frame = 0
 168:../lib/io_driver.c **** 	else
 169:../lib/io_driver.c **** 		temp = -1;
 170:../lib/io_driver.c **** 
 171:../lib/io_driver.c **** //	set_cmsr(_cmsr);
 172:../lib/io_driver.c **** 	return temp;
 173:../lib/io_driver.c **** }
 299              	ame_needed = 0, uses_anonymous_args = 0
 300 016c E1A0F00E 		@ link register save eliminated.
 301              	.LVL24:
 302              		@ lr needed for prologue
 303              		mvn	r2, #61440
 304              	.L39:
 305              		.loc 1 183 0
 306              		ldr	r3, [r2, #-3835]
 307              		tst	r3, #1
 174:../lib/io_driver.c **** 
 175:../lib/io_driver.c **** // ******************************************************************************
 176:../lib/io_driver.c **** // Write one byte via UART 0
 177:../lib/io_driver.c ****    int io_uart0_send_byte(int ch)
 178:../lib/io_driver.c **** // ******************************************************************************
 179:../lib/io_driver.c **** {
 308              	
 309              		.loc 1 184 0
 310              		and	r3, r0, #255
 311              		str	r3, [r2, #-3839]
 312              	.LVL25:
 313              		.loc 1 188 0
 314 0170 E3E02A0F 		mov	pc, lr
 315              	.LFE11:
 180:../lib/io_driver.c **** //	unsigned long _cmsr = get_cmsr();
 181:../lib/io_driver.c **** //	set_cmsr(_cmsr  | (1<<CMSR_IRQ) | (1<<CMSR_FIQ));
 182:../lib/io_driver.c **** 
 183:../lib/io_driver.c **** 	while((UART0_SREG & (1<<CUART_TXB)) == 0); // uart busy?
 316              	io_uart0_send_byte, .-io_uart0_send_byte
 317 0174 E5123EFB 		.align	2
 318 0178 E3130001 		.global	io_spi0_config
 184:../lib/io_driver.c **** 	UART0_DATA = (ch & 0x000000FF);
 320              	pi0_config:
 321 0180 E20030FF 	.LFB12:
 322 0184 E5023EFF 		.loc 1 200 0
 323              		@ args = 0, pretend = 0, frame = 0
 185:../lib/io_driver.c **** 
 186:../lib/io_driver.c **** //	set_cmsr(_cmsr);
 187:../lib/io_driver.c **** 	return ch;
 188:../lib/io_driver.c **** }
 324              	rame_needed = 0, uses_anonymous_args = 0
 325 0188 E1A0F00E 		@ link register save eliminated.
 326              	.LVL26:
 327              		and	r0, r0, #255
 328              		.loc 1 206 0
 329              		cmp	r0, #1
 330              		.loc 1 209 0
 331              		orr	r2, r1, #1024
 332              		.loc 1 207 0
 189:../lib/io_driver.c **** 
 190:../lib/io_driver.c **** 
 191:../lib/io_driver.c **** 
 192:../lib/io_driver.c **** // ################################################################################################
 193:../lib/io_driver.c **** // Serial Peripherial Interface (SPI_CONTROLLER_0)
 194:../lib/io_driver.c **** // ################################################################################################
 195:../lib/io_driver.c **** 
 196:../lib/io_driver.c **** // ******************************************************************************
 197:../lib/io_driver.c **** // Configure SPI 0
 198:../lib/io_driver.c ****    void io_spi0_config(unsigned char auto_cs, unsigned long data_size)
 199:../lib/io_driver.c **** // ******************************************************************************
 200:../lib/io_driver.c **** {
 333              	, #61440
 334              		orr	r1, r1, #9216
 335              	.LVL27:
 336              		.loc 1 209 0
 337              		mvnne	r3, #61440
 338 018c E20000FF 		.loc 1 200 0
 201:../lib/io_driver.c **** //	unsigned long _cmsr = get_cmsr();
 202:../lib/io_driver.c **** //	set_cmsr(_cmsr  | (1<<CMSR_IRQ) | (1<<CMSR_FIQ));
 203:../lib/io_driver.c **** 	// devices update their serial input on a rising edge of sclk,
 204:../lib/io_driver.c **** 	// so we need to update the mosi output of the core before
 205:../lib/io_driver.c **** 	// -> at the falling edge of sclk = set SPI_TX_NEG
 206:../lib/io_driver.c **** 	if(auto_cs == 1)
 339              	needed for prologue
 340 0190 E3500001 		.loc 1 207 0
 207:../lib/io_driver.c **** 		SPI0_CONF = (1<<SPI_ACS) | (1<<SPI_TX_NEG) | data_size; // auto assert cs
 208:../lib/io_driver.c **** 	else
 209:../lib/io_driver.c **** 		SPI0_CONF = (0<<SPI_ACS) | (1<<SPI_TX_NEG) | data_size; // manual assert cs
 341              	treq	r1, [r3, #-3327]
 342 0194 E3812B01 		.loc 1 209 0
 343              		strne	r2, [r3, #-3327]
 344 0198 03E03A0F 		mov	pc, lr
 345 019c E3811B09 	.LFE12:
 347              		.align	2
 348 01a0 13E03A0F 		.global	io_spi0_speed
 350              	io_spi0_speed:
 351              	.LFB13:
 352 01a4 05031CFF 		.loc 1 217 0
 353              		@ args = 0, pretend = 0, frame = 0
 354 01a8 15032CFF 		@ frame_needed = 0, uses_anonymous_args = 0
 355 01ac E1A0F00E 		@ link register save eliminated.
 356              	.LVL28:
 357              		.loc 1 221 0
 358              		mvn	r3, #61440
 359              		.loc 1 217 0
 360              		@ lr needed for prologue
 361              		.loc 1 221 0
 362              		str	r0, [r3, #-3323]
 210:../lib/io_driver.c **** //	set_cmsr(_cmsr);
 211:../lib/io_driver.c **** }
 212:../lib/io_driver.c **** 
 213:../lib/io_driver.c **** // ******************************************************************************
 214:../lib/io_driver.c **** // Configure SPI 0 CLK frequency -> (sys_clk/(spi_clk*2))-1
 215:../lib/io_driver.c ****    void io_spi0_speed(unsigned long clk_divider)
 216:../lib/io_driver.c **** // ******************************************************************************
 217:../lib/io_driver.c **** {
 363              	 lr
 364              	.LFE13:
 366              		.align	2
 367              		.global	io_spi0_trans
 218:../lib/io_driver.c **** //	unsigned long _cmsr = get_cmsr();
 219:../lib/io_driver.c **** //	set_cmsr(_cmsr  | (1<<CMSR_IRQ) | (1<<CMSR_FIQ));
 220:../lib/io_driver.c **** 
 221:../lib/io_driver.c **** 		SPI0_PRSC = clk_divider; // (sys_clk/(spi_clk*2))-1;
 368              	e	io_spi0_trans, %function
 369 01b0 E3E03A0F 	io_spi0_trans:
 370              	.LFB14:
 371              		.loc 1 230 0
 372              		@ args = 0, pretend = 0, frame = 0
 373 01b4 E5030CFB 		@ frame_needed = 0, uses_anonymous_args = 0
 222:../lib/io_driver.c **** 
 223:../lib/io_driver.c **** //	set_cmsr(_cmsr);
 224:../lib/io_driver.c **** }
 374              	k register save eliminated.
 375 01b8 E1A0F00E 	.LVL29:
 376              		@ lr needed for prologue
 377              		mvn	r2, #61440
 378              	.L53:
 379              		.loc 1 235 0
 380              		ldr	r3, [r2, #-3327]
 381              		tst	r3, #256
 382              		bne	.L53
 225:../lib/io_driver.c **** 
 226:../lib/io_driver.c **** // ******************************************************************************
 227:../lib/io_driver.c **** // Sends/receives max 32 bits via SPI, CS and config must be done outside
 228:../lib/io_driver.c ****    unsigned long io_spi0_trans(unsigned long data)
 229:../lib/io_driver.c **** // ******************************************************************************
 230:../lib/io_driver.c **** {
 383              	36 0
 384              		str	r0, [r2, #-3311]
 385              		.loc 1 237 0
 386              		ldr	r3, [r2, #-3327]
 387              		orr	r3, r3, #256
 388              		str	r3, [r2, #-3327]
 389 01bc E3E02A0F 		mvn	r2, #61440
 390              	.L55:
 231:../lib/io_driver.c **** //	unsigned long _cmsr = get_cmsr();
 232:../lib/io_driver.c **** //	set_cmsr(_cmsr  | (1<<CMSR_IRQ) | (1<<CMSR_FIQ));
 233:../lib/io_driver.c **** 
 234:../lib/io_driver.c **** 	// spi transmission
 235:../lib/io_driver.c **** 	while((SPI0_CONF & (1<<SPI_BUSY)) != 0); // wait for prev tx to finish
 391              	238 0
 392 01c0 E5123CFF 		ldr	r3, [r2, #-3327]
 393 01c4 E3130C01 		tst	r3, #256
 394 01c8 1AFFFFFC 		bne	.L55
 236:../lib/io_driver.c **** 	SPI0_DAT0 = data;
 395              	c 1 239 0
 396 01cc E5020CEF 		ldr	r0, [r2, #-3311]
 237:../lib/io_driver.c **** 	SPI0_CONF = SPI0_CONF | (1<<SPI_BUSY); // start transmitter
 397              	VL30:
 398 01d0 E5123CFF 	.LVL31:
 399 01d4 E3833C01 		.loc 1 243 0
 400 01d8 E5023CFF 		mov	pc, lr
 401 01dc E3E02A0F 	.LFE14:
 238:../lib/io_driver.c **** 	while((SPI0_CONF & (1<<SPI_BUSY)) != 0); // wait for rx to finish
 403              	n	2
 404 01e0 E5123CFF 		.global	io_spi0_enable
 406 01e8 1AFFFFFC 	io_spi0_enable:
 239:../lib/io_driver.c **** 	unsigned long temp = SPI0_DAT0;
 407              	15:
 408 01ec E5120CEF 		.loc 1 249 0
 409              		@ args = 0, pretend = 0, frame = 0
 410              		@ frame_needed = 0, uses_anonymous_args = 0
 240:../lib/io_driver.c **** 
 241:../lib/io_driver.c **** //	set_cmsr(_cmsr);
 242:../lib/io_driver.c **** 	return temp;
 243:../lib/io_driver.c **** }
 411              	ink register save eliminated.
 412 01f0 E1A0F00E 	.LVL32:
 413              		.loc 1 253 0
 414              		mvn	r1, #61440
 415              		ldr	r3, [r1, #-3319]
 416              		.loc 1 249 0
 417              		and	r0, r0, #255
 418              		.loc 1 253 0
 419              		mov	r2, #1
 244:../lib/io_driver.c **** 
 245:../lib/io_driver.c **** // ******************************************************************************
 246:../lib/io_driver.c **** // Controls the CS of SPI0, enables a connected CS (turns it LOW)
 247:../lib/io_driver.c ****    void io_spi0_enable(unsigned char device)
 248:../lib/io_driver.c **** // ******************************************************************************
 249:../lib/io_driver.c **** {
 420              	r3, r2, asl r0
 421              		.loc 1 249 0
 422              		@ lr needed for prologue
 423              		.loc 1 253 0
 424              		str	r3, [r1, #-3319]
 250:../lib/io_driver.c **** //	unsigned long _cmsr = get_cmsr();
 251:../lib/io_driver.c **** //	set_cmsr(_cmsr  | (1<<CMSR_IRQ) | (1<<CMSR_FIQ));
 252:../lib/io_driver.c **** 
 253:../lib/io_driver.c **** 		SPI0_SCSR = SPI0_SCSR | (1<<device);
 425              	 1 256 0
 426 01f4 E3E01A0F 		mov	pc, lr
 427 01f8 E5113CF7 	.LFE15:
 429 01fc E20000FF 		.align	2
 430              		.global	io_spi0_disable
 432 0204 E1833012 	io_spi0_disable:
 433              	.LFB16:
 434              		.loc 1 262 0
 435              		@ args = 0, pretend = 0, frame = 0
 436 0208 E5013CF7 		@ frame_needed = 0, uses_anonymous_args = 0
 254:../lib/io_driver.c **** 
 255:../lib/io_driver.c **** //	set_cmsr(_cmsr);
 256:../lib/io_driver.c **** }
 437              	ster save eliminated.
 438 020c E1A0F00E 	.LVL33:
 439              		and	r0, r0, #255
 440              		.loc 1 266 0
 441              		mov	r2, #1
 442              		mov	r2, r2, asl r0
 443              		mvn	r1, #61440
 444              		ldr	r3, [r1, #-3319]
 445              		mvn	r2, r2
 257:../lib/io_driver.c **** 
 258:../lib/io_driver.c **** // ******************************************************************************
 259:../lib/io_driver.c **** // Controls the CS of SPI0, disables a connected CS (turns it HIGH)
 260:../lib/io_driver.c ****    void io_spi0_disable(unsigned char device)
 261:../lib/io_driver.c **** // ******************************************************************************
 262:../lib/io_driver.c **** {
 446              	r3, r2
 447              		.loc 1 262 0
 448              		@ lr needed for prologue
 449              		.loc 1 266 0
 450              		str	r3, [r1, #-3319]
 451 0210 E20000FF 		.loc 1 269 0
 263:../lib/io_driver.c **** //	unsigned long _cmsr = get_cmsr();
 264:../lib/io_driver.c **** //	set_cmsr(_cmsr  | (1<<CMSR_IRQ) | (1<<CMSR_FIQ));
 265:../lib/io_driver.c **** 
 266:../lib/io_driver.c **** 		SPI0_SCSR = SPI0_SCSR & ~(1<<device);
 452              	c, lr
 453 0214 E3A02001 	.LFE16:
 455 021c E3E01A0F 		.align	2
 456 0220 E5113CF7 		.global	io_i2c0_speed
 458 0228 E0033002 	io_i2c0_speed:
 459              	.LFB17:
 460              		.loc 1 282 0
 461              		@ args = 0, pretend = 0, frame = 0
 462 022c E5013CF7 		@ frame_needed = 0, uses_anonymous_args = 0
 267:../lib/io_driver.c **** 
 268:../lib/io_driver.c **** //	set_cmsr(_cmsr);
 269:../lib/io_driver.c **** }
 463              	ister save eliminated.
 464 0230 E1A0F00E 	.LVL34:
 465              		.loc 1 285 0
 466              		mvn	r2, #61440
 467              		ldr	r3, [r2, #-3047]
 468              		.loc 1 287 0
 469              		mov	r1, r0, lsr #8
 470              		.loc 1 285 0
 471              		bic	r3, r3, #128
 270:../lib/io_driver.c **** 
 271:../lib/io_driver.c **** 
 272:../lib/io_driver.c **** 
 273:../lib/io_driver.c **** 
 274:../lib/io_driver.c **** // ################################################################################################
 275:../lib/io_driver.c **** // Inter Intergrated Circuit Interface (I²C_CONTROLLER_0)
 276:../lib/io_driver.c **** // ################################################################################################
 277:../lib/io_driver.c **** 
 278:../lib/io_driver.c **** // ******************************************************************************
 279:../lib/io_driver.c **** // Configure SPI 0 CLK frequency -> (sys_clk/(5*i2c_clock)-1
 280:../lib/io_driver.c ****    void io_i2c0_speed(unsigned long clk_divider)
 281:../lib/io_driver.c **** // ******************************************************************************
 282:../lib/io_driver.c **** {
 472              	[r2, #-3047]
 473              		.loc 1 286 0
 474              		str	r0, [r2, #-3055]
 475              		.loc 1 287 0
 476              		str	r1, [r2, #-3051]
 283:../lib/io_driver.c **** //	unsigned long _cmsr = get_cmsr();
 284:../lib/io_driver.c **** //	set_cmsr(_cmsr  | (1<<CMSR_IRQ) | (1<<CMSR_FIQ));
 285:../lib/io_driver.c **** 		I2C0_CTRL = I2C0_CTRL & ~(1<<I2C_EN); // disable i2c core
 477              	 1 288 0
 478 0234 E3E02A0F 		ldr	r3, [r2, #-3047]
 479 0238 E5123BE7 		orr	r3, r3, #128
 286:../lib/io_driver.c **** 		I2C0_PRLO = clk_divider;
 287:../lib/io_driver.c **** 		I2C0_PRHI = clk_divider >> 8;
 480              	oc 1 282 0
 481 023c E1A01420 		@ lr needed for prologue
 482              		.loc 1 288 0
 483 0240 E3C33080 		str	r3, [r2, #-3047]
 484 0244 E5023BE7 		.loc 1 290 0
 485              		mov	pc, lr
 486 0248 E5020BEF 	.LFE17:
 488 024c E5021BEB 		.align	2
 288:../lib/io_driver.c **** 		I2C0_CTRL = I2C0_CTRL | (1<<I2C_EN); // enable i2c core
 489              	io_i2c0_byte_transfer
 491 0254 E3833080 	io_i2c0_byte_transfer:
 492              	.LFB18:
 493              		.loc 1 300 0
 494              		@ args = 4, pretend = 0, frame = 0
 495 0258 E5023BE7 		@ frame_needed = 0, uses_anonymous_args = 0
 289:../lib/io_driver.c **** //	set_cmsr(_cmsr);
 290:../lib/io_driver.c **** }
 496              	
 497 025c E1A0F00E 		stmfd	sp!, {r4, r5, lr}
 498              	.LCFI1:
 499              		.loc 1 306 0
 500              		mov	ip, #144
 501              		.loc 1 305 0
 502              		and	r4, r1, #254
 503              		mvn	lr, #61440
 504              	.LVL36:
 291:../lib/io_driver.c **** 
 292:../lib/io_driver.c **** // ******************************************************************************
 293:../lib/io_driver.c **** // Read/write byte from/to I²C slave, max 2 address bytes
 294:../lib/io_driver.c ****    int io_i2c0_byte_transfer(unsigned char rw,        // 'r' read / 'w' write cycle
 295:../lib/io_driver.c ****                              unsigned char id,        // device ID
 296:../lib/io_driver.c **** 							 unsigned long data_adr,  // data address
 297:../lib/io_driver.c **** 							 unsigned char adr_bytes, // number of adr bytes
 298:../lib/io_driver.c **** 							 unsigned char data)      // data byte
 299:../lib/io_driver.c **** // ******************************************************************************
 300:../lib/io_driver.c **** {
 505              	300 0
 506              		ldrb	r5, [sp, #15]	@ zero_extendqisi2
 507              		and	r0, r0, #255
 508              		.loc 1 305 0
 509 0260 E92D4030 		str	r4, [lr, #-3043]
 510              		.loc 1 300 0
 301:../lib/io_driver.c **** //	unsigned long _cmsr = get_cmsr();
 302:../lib/io_driver.c **** //	set_cmsr(_cmsr  | (1<<CMSR_IRQ) | (1<<CMSR_FIQ));
 303:../lib/io_driver.c **** 
 304:../lib/io_driver.c **** 	// transfer slave identification address
 305:../lib/io_driver.c **** 	I2C0_DATA = id & 0xFE;                  // device id and write
 306:../lib/io_driver.c **** 	I2C0_CMD = (1<<I2C_STA) | (1<<I2C_WR);  // start condition and write cycle
 511              	1, r1, #255
 512 0264 E3A0C090 		.loc 1 306 0
 513              		str	ip, [lr, #-3071]
 514 0268 E20140FE 		.loc 1 300 0
 515 026c E3E0EA0F 		mov	r4, r2
 516              		and	ip, r3, #255
 517              	.LVL37:
 518 0270 E5DD500F 	.L69:
 519 0274 E20000FF 		.loc 1 307 0
 520              		ldr	r3, [lr, #-3071]
 521 0278 E50E4BE3 		tst	r3, #2
 522              		bne	.L69
 523 027c E20110FF 		.loc 1 308 0
 524              		ldr	r3, [lr, #-3071]
 525 0280 E50ECBFF 		tst	r3, #128
 526              		mvnne	r0, #0
 527 0284 E1A04002 	.LVL38:
 528 0288 E203C0FF 		ldmnefd	sp!, {r4, r5, pc}
 529              	.L80:
 530              		.loc 1 314 0
 307:../lib/io_driver.c **** 	while((I2C0_STAT & (1<<I2C_TIP)) != 0); // wait for transfer to finish
 531              	09
 532 028c E51E3BFF 		.loc 1 315 0
 533 0290 E3130002 		sub	r3, ip, #1
 534 0294 1AFFFFFC 		and	ip, r3, #255
 308:../lib/io_driver.c **** 	if((I2C0_STAT & (1<<I2C_RXACK)) != 0){  // ack received?
 535              	c 1 316 0
 536 0298 E51E3BFF 		cmp	ip, #1
 537 029c E3130080 		.loc 1 317 0
 538 02a0 13E00000 		moveq	r2, r4, lsr #8
 539              		mvneq	r3, #61440
 540 02a4 18BD8030 		.loc 1 319 0
 541              		mvnne	r3, #61440
 309:../lib/io_driver.c **** //		set_cmsr(_cmsr);
 310:../lib/io_driver.c **** 		return -1;
 311:../lib/io_driver.c **** 	}
 312:../lib/io_driver.c **** 
 313:../lib/io_driver.c **** 	// transfer data address
 314:../lib/io_driver.c **** 	while(adr_bytes != 0){
 542              	 317 0
 543 02a8 E35C0000 		streq	r2, [r3, #-3043]
 544 02ac 0A000012 		.loc 1 319 0
 315:../lib/io_driver.c **** 		adr_bytes--;
 545              	rne	r4, [r3, #-3043]
 546 02b0 E24C3001 		.loc 1 320 0
 547 02b4 E203C0FF 		mvn	r2, #61440
 316:../lib/io_driver.c **** 		if(adr_bytes == 1)
 548              	v	r3, #16
 549 02b8 E35C0001 		str	r3, [r2, #-3071]
 317:../lib/io_driver.c **** 			I2C0_DATA = data_adr >> 8;          // high byte
 550              	78:
 551 02bc 01A02424 		.loc 1 321 0
 552 02c0 03E03A0F 		ldr	r3, [r2, #-3071]
 318:../lib/io_driver.c **** 		else
 319:../lib/io_driver.c **** 			I2C0_DATA = data_adr;               // low byte
 553              	t	r3, #2
 554 02c4 13E03A0F 		bne	.L78
 555              		.loc 1 322 0
 556 02c8 05032BE3 		ldr	r3, [r2, #-3071]
 557              		tst	r3, #128
 558 02cc 15034BE3 		beq	.L80
 320:../lib/io_driver.c **** 		I2C0_CMD = (1<<I2C_WR);                 // write cycle
 559              	0, #1
 560 02d0 E3E02A0F 		ldmfd	sp!, {r4, r5, pc}
 561 02d4 E3A03010 	.LVL39:
 562 02d8 E5023BFF 	.L109:
 563              	.LVL40:
 321:../lib/io_driver.c **** 		while((I2C0_STAT & (1<<I2C_TIP)) != 0); // wait for transfer to finish
 564              	 1 328 0
 565 02dc E5123BFF 		cmp	r0, #119
 566 02e0 E3130002 		bne	.L83
 567 02e4 1AFFFFFC 		.loc 1 330 0
 322:../lib/io_driver.c **** 		if((I2C0_STAT & (1<<I2C_RXACK)) != 0){  // ack received?
 568              		r3, #61440
 569 02e8 E5123BFF 		.loc 1 331 0
 570 02ec E3130080 		mov	r2, #80
 571 02f0 0AFFFFEC 		.loc 1 330 0
 572 02f4 E3E00001 		str	r5, [r3, #-3043]
 573 02f8 E8BD8030 		.loc 1 331 0
 574              		str	r2, [r3, #-3071]
 575              		mov	r2, r3
 576              	.L85:
 323:../lib/io_driver.c **** //			set_cmsr(_cmsr);
 324:../lib/io_driver.c **** 			return -2;
 325:../lib/io_driver.c **** 		}
 326:../lib/io_driver.c **** 	}
 327:../lib/io_driver.c **** 
 328:../lib/io_driver.c **** 	if(rw == 'w'){
 577              	32 0
 578 02fc E3500077 		ldr	r3, [r2, #-3071]
 579 0300 1A00000C 		tst	r3, #2
 329:../lib/io_driver.c **** 		// write adressed byte
 330:../lib/io_driver.c **** 		I2C0_DATA = data;                       // send data
 580              	e	.L85
 581 0304 E3E03A0F 		.loc 1 333 0
 331:../lib/io_driver.c **** 		I2C0_CMD = (1<<I2C_STO) | (1<<I2C_WR);  // stop condition and write cycle
 582              	dr	r3, [r2, #-3071]
 583 0308 E3A02050 		ands	r0, r3, #128
 584              	.LVL41:
 585 030c E5035BE3 		ldmeqfd	sp!, {r4, r5, pc}
 586              	.L87:
 587 0310 E5032BFF 		.loc 1 355 0
 588 0314 E1A02003 		mvn	r0, #2
 589              		.loc 1 360 0
 332:../lib/io_driver.c **** 		while((I2C0_STAT & (1<<I2C_TIP)) != 0); // wait for transfer to finish
 590              	p!, {r4, r5, pc}
 591 0318 E5123BFF 	.LVL42:
 592 031c E3130002 	.L83:
 593 0320 1AFFFFFC 		.loc 1 343 0
 333:../lib/io_driver.c **** 		if((I2C0_STAT & (1<<I2C_RXACK)) != 0){  // ack received?
 594              		r0, #114
 595 0324 E5123BFF 		mvnne	r0, #3
 596 0328 E2130080 	.LVL43:
 597              		ldmnefd	sp!, {r4, r5, pc}
 598 032c 08BD8030 		.loc 1 345 0
 599              		orr	r3, r1, #1
 334:../lib/io_driver.c **** //			set_cmsr(_cmsr);
 335:../lib/io_driver.c **** 			return -3;
 336:../lib/io_driver.c **** 		}
 337:../lib/io_driver.c **** 		else{
 338:../lib/io_driver.c **** //			set_cmsr(_cmsr);
 339:../lib/io_driver.c **** 			return 0;
 340:../lib/io_driver.c **** 		}
 341:../lib/io_driver.c **** 	}
 342:../lib/io_driver.c **** 
 343:../lib/io_driver.c **** 	if(rw == 'r'){
 344:../lib/io_driver.c **** 		// re-send control byte - this time with read-bit
 345:../lib/io_driver.c **** 		I2C0_DATA = id | 0x01;                  // device id and READ
 346:../lib/io_driver.c **** 		I2C0_CMD = (1<<I2C_STA) | (1<<I2C_WR);  // start condition and write cycle
 347:../lib/io_driver.c **** 		while((I2C0_STAT & (1<<I2C_TIP)) != 0); // wait for transfer to finish
 348:../lib/io_driver.c **** 		if((I2C0_STAT & (1<<I2C_RXACK)) != 0){  // ack received?
 349:../lib/io_driver.c **** //			set_cmsr(_cmsr);
 350:../lib/io_driver.c **** 			return -3;
 351:../lib/io_driver.c **** 		}
 352:../lib/io_driver.c **** 		// read adressed byte
 353:../lib/io_driver.c **** 		I2C0_CMD = (1<<I2C_STO) | (1<<I2C_RD) | (1<<I2C_ACK);
 354:../lib/io_driver.c **** 		while((I2C0_STAT & (1<<I2C_TIP)) != 0); // wait for transfer to finish
 355:../lib/io_driver.c **** 		return I2C0_DATA;
 600              	2, #61440
 601 0330 E3E00002 		.loc 1 346 0
 356:../lib/io_driver.c **** 	}
 357:../lib/io_driver.c **** 
 358:../lib/io_driver.c **** //	set_cmsr(_cmsr);
 359:../lib/io_driver.c **** 	return -4;
 360:../lib/io_driver.c **** }
 602              	ov	r1, #144
 603 0334 E8BD8030 	.LVL44:
 604              		.loc 1 345 0
 605              		str	r3, [r2, #-3043]
 606              		.loc 1 346 0
 607 0338 E3500072 		str	r1, [r2, #-3071]
 608 033c 13E00003 	.L91:
 609              		.loc 1 347 0
 610 0340 18BD8030 		ldr	r3, [r2, #-3071]
 611              		tst	r3, #2
 612 0344 E3813001 		bne	.L91
 613 0348 E3E02A0F 		.loc 1 348 0
 614              		ldr	r3, [r2, #-3071]
 615 034c E3A01090 		tst	r3, #128
 616              		bne	.L87
 617              		.loc 1 353 0
 618 0350 E5023BE3 		mov	r3, #104
 619              		str	r3, [r2, #-3071]
 620 0354 E5021BFF 		mvn	r0, #61440
 621              	.L94:
 622              		.loc 1 354 0
 623 0358 E5123BFF 		ldr	r3, [r0, #-3071]
 624 035c E3130002 		tst	r3, #2
 625 0360 1AFFFFFC 		bne	.L94
 626              		.loc 1 355 0
 627 0364 E5123BFF 		ldr	r0, [r0, #-3043]
 628 0368 E3130080 		ldmfd	sp!, {r4, r5, pc}
 629 036c 1AFFFFEF 	.LFE18:
 631 0370 E3A03068 		.align	2
 632 0374 E5023BFF 		.global	get_syscpreg
 634              	get_syscpreg:
 635              	.LFB19:
 636 037c E5103BFF 		.loc 1 373 0
 637 0380 E3130002 		@ args = 0, pretend = 0, frame = 0
 638 0384 1AFFFFFC 		@ frame_needed = 0, uses_anonymous_args = 0
 639              		@ link register save eliminated.
 640 0388 E5100BE3 	.LVL45:
 641 038c E8BD8030 		and	r0, r0, #255
 642              		@ lr needed for prologue
 643              		.loc 1 375 0
 644              		cmp	r0, #15
 645              		ldrls	pc, [pc, r0, asl #2]
 646              		b	.L111
 647              		.p2align 2
 648              	.L128:
 361:../lib/io_driver.c **** 
 362:../lib/io_driver.c **** 
 363:../lib/io_driver.c **** 
 364:../lib/io_driver.c **** 
 365:../lib/io_driver.c **** // ################################################################################################
 366:../lib/io_driver.c **** // System
 367:../lib/io_driver.c **** // ################################################################################################
 368:../lib/io_driver.c **** 
 369:../lib/io_driver.c **** // ******************************************************************************
 370:../lib/io_driver.c **** // read system coprocessor register x
 371:../lib/io_driver.c ****    unsigned long get_syscpreg(unsigned char index)
 372:../lib/io_driver.c **** // ******************************************************************************
 373:../lib/io_driver.c **** {
 649              	L115
 650              		.word	.L116
 651              		.word	.L117
 652              		.word	.L118
 653              		.word	.L119
 654 0390 E20000FF 		.word	.L120
 655              		.word	.L121
 374:../lib/io_driver.c **** 	unsigned long _cp_val;
 375:../lib/io_driver.c **** 	switch(index){
 656              	.L122
 657 0394 E350000F 		.word	.L123
 658 0398 979FF100 		.word	.L124
 659 039c EA00000F 		.word	.L125
 660              		.word	.L126
 661              		.word	.L127
 662 03a0 00000460 	.L111:
 663 03a4 00000458 		mov	r0, #0
 664 03a8 00000450 	.LVL46:
 665 03ac 00000448 		mov	pc, lr
 666 03b0 00000440 	.LVL47:
 667 03b4 00000438 	.L127:
 668 03b8 00000430 		.loc 1 391 0
 669 03bc 00000428 		mrc p15,0,r0,c15,c15
 670 03c0 00000420 	.LVL48:
 671 03c4 00000418 	.LVL49:
 672 03c8 00000410 		.loc 1 395 0
 673 03cc 00000408 		mov	pc, lr
 674 03d0 00000400 	.LVL50:
 675 03d4 000003F8 	.L126:
 676 03d8 000003F0 		.loc 1 390 0
 677 03dc 000003E8 		mrc p15,0,r0,c14,c14
 678              	.LVL51:
 679 03e0 E3A00000 		mov	pc, lr
 680              	.LVL52:
 681 03e4 E1A0F00E 	.L125:
 682              		.loc 1 389 0
 683              		mrc p15,0,r0,c13,c13
 376:../lib/io_driver.c **** 		case ID_REG_0:   asm volatile ("mrc p15,0,%0, c0, c0" : "=r" (_cp_val) : /* no inputs */  ); brea
 377:../lib/io_driver.c **** 		case ID_REG_1:   asm volatile ("mrc p15,0,%0, c1, c1" : "=r" (_cp_val) : /* no inputs */  ); brea
 378:../lib/io_driver.c **** 		case ID_REG_2:   asm volatile ("mrc p15,0,%0, c2, c2" : "=r" (_cp_val) : /* no inputs */  ); brea
 379:../lib/io_driver.c **** 		case 3:          asm volatile ("mrc p15,0,%0, c3, c3" : "=r" (_cp_val) : /* no inputs */  ); brea
 380:../lib/io_driver.c **** 		case 4:          asm volatile ("mrc p15,0,%0, c4, c4" : "=r" (_cp_val) : /* no inputs */  ); brea
 381:../lib/io_driver.c **** 		case 5:          asm volatile ("mrc p15,0,%0, c5, c5" : "=r" (_cp_val) : /* no inputs */  ); brea
 382:../lib/io_driver.c **** 		case SYS_CTRL_0: asm volatile ("mrc p15,0,%0, c6, c6" : "=r" (_cp_val) : /* no inputs */  ); brea
 383:../lib/io_driver.c **** 		case 7:          asm volatile ("mrc p15,0,%0, c7, c7" : "=r" (_cp_val) : /* no inputs */  ); brea
 384:../lib/io_driver.c **** 		case CSTAT:      asm volatile ("mrc p15,0,%0, c8, c8" : "=r" (_cp_val) : /* no inputs */  ); brea
 385:../lib/io_driver.c **** 		case ADR_FB:     asm volatile ("mrc p15,0,%0, c9, c9" : "=r" (_cp_val) : /* no inputs */  ); brea
 386:../lib/io_driver.c **** 		case 10:         asm volatile ("mrc p15,0,%0,c10,c10" : "=r" (_cp_val) : /* no inputs */  ); brea
 387:../lib/io_driver.c **** 		case LFSR_POLY:  asm volatile ("mrc p15,0,%0,c11,c11" : "=r" (_cp_val) : /* no inputs */  ); brea
 388:../lib/io_driver.c **** 		case LFSR_DATA:  asm volatile ("mrc p15,0,%0,c12,c12" : "=r" (_cp_val) : /* no inputs */  ); brea
 389:../lib/io_driver.c **** 		case SYS_IO:     asm volatile ("mrc p15,0,%0,c13,c13" : "=r" (_cp_val) : /* no inputs */  ); brea
 390:../lib/io_driver.c **** 		case 14:         asm volatile ("mrc p15,0,%0,c14,c14" : "=r" (_cp_val) : /* no inputs */  ); brea
 391:../lib/io_driver.c **** 		case 15:         asm volatile ("mrc p15,0,%0,c15,c15" : "=r" (_cp_val) : /* no inputs */  ); brea
 684              	.L124:
 685 03e8 EE1F0F1F 		.loc 1 388 0
 686              		mrc p15,0,r0,c12,c12
 687              	.LVL55:
 392:../lib/io_driver.c **** 		default:         _cp_val = 0; break;
 393:../lib/io_driver.c **** 	}
 394:../lib/io_driver.c **** 	return _cp_val;
 395:../lib/io_driver.c **** }
 688              		pc, lr
 689 03ec E1A0F00E 	.LVL56:
 690              	.L123:
 691              		.loc 1 387 0
 692              		mrc p15,0,r0,c11,c11
 693 03f0 EE1E0F1E 	.LVL57:
 694              		mov	pc, lr
 695 03f4 E1A0F00E 	.LVL58:
 696              	.L122:
 697              		.loc 1 386 0
 698              		mrc p15,0,r0,c10,c10
 699 03f8 EE1D0F1D 	.LVL59:
 700              		mov	pc, lr
 701 03fc E1A0F00E 	.LVL60:
 702              	.L121:
 703              		.loc 1 385 0
 704              		mrc p15,0,r0, c9, c9
 705 0400 EE1C0F1C 	.LVL61:
 706              		mov	pc, lr
 707 0404 E1A0F00E 	.LVL62:
 708              	.L120:
 709              		.loc 1 384 0
 710              		mrc p15,0,r0, c8, c8
 711 0408 EE1B0F1B 	.LVL63:
 712              		mov	pc, lr
 713 040c E1A0F00E 	.LVL64:
 714              	.L119:
 715              		.loc 1 383 0
 716              		mrc p15,0,r0, c7, c7
 717 0410 EE1A0F1A 	.LVL65:
 718              		mov	pc, lr
 719 0414 E1A0F00E 	.LVL66:
 720              	.L118:
 721              		.loc 1 382 0
 722              		mrc p15,0,r0, c6, c6
 723 0418 EE190F19 	.LVL67:
 724              		mov	pc, lr
 725 041c E1A0F00E 	.LVL68:
 726              	.L117:
 727              		.loc 1 381 0
 728              		mrc p15,0,r0, c5, c5
 729 0420 EE180F18 	.LVL69:
 730              		mov	pc, lr
 731 0424 E1A0F00E 	.LVL70:
 732              	.L116:
 733              		.loc 1 380 0
 734              		mrc p15,0,r0, c4, c4
 735 0428 EE170F17 	.LVL71:
 736              		mov	pc, lr
 737 042c E1A0F00E 	.LVL72:
 738              	.L115:
 739              		.loc 1 379 0
 740              		mrc p15,0,r0, c3, c3
 741 0430 EE160F16 	.LVL73:
 742              		mov	pc, lr
 743 0434 E1A0F00E 	.LVL74:
 744              	.L114:
 745              		.loc 1 378 0
 746              		mrc p15,0,r0, c2, c2
 747 0438 EE150F15 	.LVL75:
 748              		mov	pc, lr
 749 043c E1A0F00E 	.LVL76:
 750              	.L113:
 751              		.loc 1 377 0
 752              		mrc p15,0,r0, c1, c1
 753 0440 EE140F14 	.LVL77:
 754              		mov	pc, lr
 755 0444 E1A0F00E 	.LVL78:
 756              	.L112:
 757              		.loc 1 376 0
 758              		mrc p15,0,r0, c0, c0
 759 0448 EE130F13 	.LVL79:
 760              		mov	pc, lr
 761 044c E1A0F00E 	.LFE19:
 763              		.align	2
 764              		.global	set_syscpreg
 766              	set_syscpreg:
 767 0454 E1A0F00E 	.LFB20:
 768              		.loc 1 401 0
 769              		@ args = 0, pretend = 0, frame = 0
 770              		@ frame_needed = 0, uses_anonymous_args = 0
 771 0458 EE110F11 		@ link register save eliminated.
 772              	.LVL80:
 773 045c E1A0F00E 		and	r1, r1, #255
 774              		.loc 1 402 0
 775              		sub	r1, r1, #6
 776              	.LVL81:
 777 0460 EE100F10 		.loc 1 401 0
 778              		@ lr needed for prologue
 779 0464 E1A0F00E 		.loc 1 402 0
 780              		cmp	r1, #7
 781              		ldrls	pc, [pc, r1, asl #2]
 782              		b	.L138
 783              		.p2align 2
 784              	.L137:
 785              		.word	.L133
 786              		.word	.L138
 396:../lib/io_driver.c **** 
 397:../lib/io_driver.c **** // ******************************************************************************
 398:../lib/io_driver.c **** // write system coprocessor register x
 399:../lib/io_driver.c ****    void set_syscpreg(unsigned long _cp_val, unsigned char index)
 400:../lib/io_driver.c **** // ******************************************************************************
 401:../lib/io_driver.c **** {
 787              		mcr p15,0,r0,c13,c13,0
 788              	.L138:
 789              		mov	pc, lr
 790              	.L133:
 791              		.loc 1 409 0
 792 0468 E20110FF 		mcr p15,0,r0, c6, c6,0
 402:../lib/io_driver.c **** 	switch(index){
 793              	c, lr
 794 046c E2411006 	.L134:
 795              		.loc 1 414 0
 796              		mcr p15,0,r0,c11,c11,0
 797              		mov	pc, lr
 798              	.L135:
 799 0470 E3510007 		.loc 1 415 0
 800 0474 979FF101 		mcr p15,0,r0,c12,c12,0
 801 0478 EA000008 		mov	pc, lr
 802              	.LFE20:
 804 047c 000004A4 		.align	2
 805 0480 000004A0 		.global	uart0_printf
 807 0488 000004A0 	uart0_printf:
 808 048c 000004A0 	.LFB25:
 809 0490 000004AC 		.file 2 "../lib/uart.c"
 810 0494 000004B4 		.loc 2 7 0
 811 0498 0000049C 		@ args = 0, pretend = 0, frame = 0
 812              		@ frame_needed = 0, uses_anonymous_args = 0
 403:../lib/io_driver.c **** //		case ID_REG_0:   asm volatile ("mcr p15,0,%0, c0, c0,0" : /* no outputs */ : "r" (_cp_val)); br
 404:../lib/io_driver.c **** //		case ID_REG_1:   asm volatile ("mcr p15,0,%0, c1, c1,0" : /* no outputs */ : "r" (_cp_val)); br
 405:../lib/io_driver.c **** //		case ID_REG_2:   asm volatile ("mcr p15,0,%0, c2, c2,0" : /* no outputs */ : "r" (_cp_val)); br
 406:../lib/io_driver.c **** //		case 3:          asm volatile ("mcr p15,0,%0, c3, c3,0" : /* no outputs */ : "r" (_cp_val)); br
 407:../lib/io_driver.c **** //		case 4:          asm volatile ("mcr p15,0,%0, c4, c4,0" : /* no outputs */ : "r" (_cp_val)); br
 408:../lib/io_driver.c **** //		case 5:          asm volatile ("mcr p15,0,%0, c5, c5,0" : /* no outputs */ : "r" (_cp_val)); br
 409:../lib/io_driver.c **** 		case SYS_CTRL_0: asm volatile ("mcr p15,0,%0, c6, c6,0" : /* no outputs */ : "r" (_cp_val)); brea
 410:../lib/io_driver.c **** //		case 7:          asm volatile ("mcr p15,0,%0, c7, c7,0" : /* no outputs */ : "r" (_cp_val)); br
 411:../lib/io_driver.c **** //		case CSTAT:      asm volatile ("mcr p15,0,%0, c8, c8,0" : /* no outputs */ : "r" (_cp_val)); br
 412:../lib/io_driver.c **** //		case ADR_FB:     asm volatile ("mcr p15,0,%0, c9, c9,0" : /* no outputs */ : "r" (_cp_val)); br
 413:../lib/io_driver.c **** //		case 10:         asm volatile ("mcr p15,0,%0,c10,c10,0" : /* no outputs */ : "r" (_cp_val)); br
 414:../lib/io_driver.c **** 		case LFSR_POLY:  asm volatile ("mcr p15,0,%0,c11,c11,0" : /* no outputs */ : "r" (_cp_val)); brea
 415:../lib/io_driver.c **** 		case LFSR_DATA:  asm volatile ("mcr p15,0,%0,c12,c12,0" : /* no outputs */ : "r" (_cp_val)); brea
 416:../lib/io_driver.c **** 		case SYS_IO:     asm volatile ("mcr p15,0,%0,c13,c13,0" : /* no outputs */ : "r" (_cp_val)); brea
 813              	{r4, lr}
 814 049c EE0D0F1D 	.LCFI2:
 815              		.loc 2 7 0
 816 04a0 E1A0F00E 		mov	r4, r0
 817              		.loc 2 10 0
 818              		ldrb	r0, [r0, #0]	@ zero_extendqisi2
 819 04a4 EE060F16 	.LVL83:
 820 04a8 E1A0F00E 		cmp	r0, #0
 821              		bne	.L144
 822              		b	.L140
 823 04ac EE0B0F1B 	.LVL84:
 824 04b0 E1A0F00E 	.L146:
 825              		ldrb	r0, [r4, #1]!	@ zero_extendqisi2
 826              	.LVL85:
 827 04b4 EE0C0F1C 		cmp	r0, #0
 828 04b8 E1A0F00E 		beq	.L140
 829              	.L144:
 830              		.loc 2 11 0
 831              		bl	io_uart0_send_byte
 832              	.LVL86:
 833              		cmp	r0, #0
 834              		bgt	.L146
 835              	.LVL87:
 836              	.L140:
   1:../lib/uart.c **** #include "uart.h"
   2:../lib/uart.c **** 
   3:../lib/uart.c **** // ############################################################################################
   4:../lib/uart.c **** // Print text string via UART 0
   5:../lib/uart.c ****    const char *uart0_printf(const char *string)
   6:../lib/uart.c **** // ############################################################################################
   7:../lib/uart.c **** {
 837              	
 838              	.LVL88:
 839              		ldmfd	sp!, {r4, pc}
 840              	.LFE25:
 842              		.section	.rodata
 843              		.align	2
 844 04c0 E1A04000 	.LC0:
   8:../lib/uart.c **** 	char ch;
   9:../lib/uart.c **** 
  10:../lib/uart.c **** 	while ((ch = *string)){
 845              		"\000\000"
 846 04c4 E5D00000 		.text
 847              		.align	2
 848 04c8 E3500000 		.global	uart0_scanf
 850 04d0 EA000005 	uart0_scanf:
 851              	.LFB26:
 852              		.loc 2 22 0
 853 04d4 E5F40001 		@ args = 0, pretend = 0, frame = 0
 854              		@ frame_needed = 0, uses_anonymous_args = 0
 855 04d8 E3500000 	.LVL89:
 856 04dc 0A000002 		stmfd	sp!, {r4, r5, r6, lr}
 857              	.LCFI3:
  11:../lib/uart.c **** 		if (io_uart0_send_byte(ch)<=0)
 858              		subs	r4, r1, #0
 859 04e0 EBFFFFFE 		.loc 2 22 0
 860              		mov	r5, r0
 861 04e4 E3500000 		and	r6, r2, #255
 862 04e8 CAFFFFF9 		.loc 2 25 0
 863              		ble	.L148
 864              	.LVL90:
  12:../lib/uart.c **** 			break;
  13:../lib/uart.c **** 		string++;
  14:../lib/uart.c **** 	}
  15:../lib/uart.c **** 	return string;
  16:../lib/uart.c **** }
 865              		.loc 2 26 0
 866 04ec E1A00004 		bl	io_uart0_read_byte
 867              	.LVL91:
 868 04f0 E8BD8010 	.LVL92:
 869              		.loc 2 27 0
 870              		cmn	r0, #1
 871              		.loc 2 28 0
 872              		and	r3, r0, #255
 873              	.LVL93:
 874 0000 0000     		.loc 2 27 0
 875 0002 0000     		beq	.L150
 876              		.loc 2 30 0
 877              		cmp	r6, #1
 878              	.LVL94:
 879              		.loc 2 29 0
 880              		strb	r3, [r5, #0]
  17:../lib/uart.c **** 
  18:../lib/uart.c **** // ############################################################################################
  19:../lib/uart.c **** // Read text string via UART 0
  20:../lib/uart.c ****    void uart0_scanf(unsigned char *buffer, int length, unsigned char en_echo)
  21:../lib/uart.c **** // ############################################################################################
  22:../lib/uart.c **** {
 881              	31 0
 882              		mov	r0, r3
 883              	.LVL96:
 884              		.loc 2 29 0
 885 04f4 E92D4070 		add	r5, r5, #1
 886              		.loc 2 30 0
  23:../lib/uart.c **** 	int temp = 0;
  24:../lib/uart.c **** 
  25:../lib/uart.c **** 	while(length > 0){
 887              	L157
 888 04f8 E2514000 	.LVL97:
 889              	.L152:
 890 04fc E1A05000 		.loc 2 32 0
 891 0500 E20260FF 		sub	r4, r4, #1
 892              	.LVL98:
 893 0504 DA00000B 	.L150:
 894              		.loc 2 25 0
 895              		cmp	r4, #0
  26:../lib/uart.c **** 		temp = io_uart0_read_byte();
 896              	5
 897 0508 EBFFFFFE 	.LVL99:
 898              	.L148:
 899              		.loc 2 35 0
  27:../lib/uart.c **** 		if(temp != -1){
 900              		r3, .L158
 901 050c E3700001 	.LVL100:
  28:../lib/uart.c **** 			temp = (unsigned char)(temp & 0x000000FF);
 902              	trb	r3, [r5, #0]
 903 0510 E20030FF 		.loc 2 36 0
 904              		ldmfd	sp!, {r4, r5, r6, pc}
 905              	.LVL101:
 906 0514 0A000005 	.L157:
  29:../lib/uart.c **** 			*buffer++ = temp;
  30:../lib/uart.c **** 			if(en_echo == 1)
 907              	 2 31 0
 908 0518 E3560001 		bl	io_uart0_send_byte
 909              	.LVL102:
 910              		b	.L152
 911 051c E5C53000 	.L159:
 912              		.align	2
  31:../lib/uart.c **** 				io_uart0_send_byte(temp); // echo
 913              	
 914 0520 E1A00003 		.word	.LC0
 915              	.LFE26:
 917 0524 E2855001 		.align	2
 918              		.global	uart0_print_buffer
 920              	uart0_print_buffer:
 921              	.LFB27:
  32:../lib/uart.c **** 			length--;
 922              	42 0
 923 052c E2444001 		@ args = 0, pretend = 0, frame = 0
 924              		@ frame_needed = 0, uses_anonymous_args = 0
 925              	.LVL103:
 926              		stmfd	sp!, {r4, r5, lr}
 927 0530 E3540000 	.LCFI4:
 928 0534 CAFFFFF3 		.loc 2 44 0
 929              		subs	r4, r1, #0
 930              		.loc 2 42 0
  33:../lib/uart.c **** 		}
  34:../lib/uart.c **** 	}
  35:../lib/uart.c **** 	*buffer="\0";
 931              	r0
 932 0538 E59F300C 		.loc 2 44 0
 933              		ldmlefd	sp!, {r4, r5, pc}
 934 053c E5C53000 	.LVL104:
  36:../lib/uart.c **** }
 935              	4:
 936 0540 E8BD8070 		.loc 2 46 0
 937              		ldrb	r0, [r5], #1	@ zero_extendqisi2
 938              	.LVL105:
 939              		bl	io_uart0_send_byte
 940 0544 EBFFFFFE 	.LVL106:
 941              		.loc 2 44 0
 942 0548 EAFFFFF7 		subs	r4, r4, #1
 943              		bne	.L164
 944              		ldmfd	sp!, {r4, r5, pc}
 945              	.LFE27:
 947              		.align	2
 948              		.global	long_to_hex_string
 950              	long_to_hex_string:
 951              	.LFB28:
 952              		.file 3 "../lib/utilities.c"
 953              		.loc 3 9 0
  37:../lib/uart.c **** 
  38:../lib/uart.c **** // ############################################################################################
  39:../lib/uart.c **** // Print character buffer via UART 0
  40:../lib/uart.c ****    void uart0_print_buffer(unsigned char *buffer, int size)
  41:../lib/uart.c **** // ############################################################################################
  42:../lib/uart.c **** {
 954              	d = 0, frame = 0
 955              		@ frame_needed = 0, uses_anonymous_args = 0
 956              	.LVL107:
 957              		stmfd	sp!, {r4, lr}
 958 0550 E92D4030 	.LCFI5:
 959              		.loc 3 9 0
  43:../lib/uart.c **** 	unsigned char char_buffer = 0;
  44:../lib/uart.c **** 	while(size > 0){
 960              	4, r2, #255
 961 0554 E2514000 		.loc 3 14 0
 962              		cmp	r4, #8
 963 0558 E1A05000 		movhi	r4, #8
 964              		bhi	.L169
 965 055c D8BD8030 	.LVL108:
 966              		.loc 3 16 0
 967              		cmp	r4, #0
  45:../lib/uart.c **** 		char_buffer = *buffer++;
  46:../lib/uart.c **** 		io_uart0_send_byte((int)char_buffer);
 968              	39 0
 969 0560 E4D50001 		moveq	r4, #1
 970              	.L169:
 971 0564 EBFFFFFE 		mov	r2, r1
 972              	.LVL109:
 973              		mov	lr, r4
 974 0568 E2544001 	.LVL110:
 975 056c 1AFFFFFB 	.L171:
 976 0570 E8BD8030 		.loc 3 22 0
 977              		mov	r3, lr, asl #2
 978              		.loc 3 21 0
 979              		cmp	lr, #1
 980              		.loc 3 22 0
 981              		sub	r3, r3, #4
 982              		.loc 3 21 0
 983              		mov	ip, r0
 984              	.LVL111:
   1:../lib/utilities.c **** #include "utilities.h"
   2:../lib/utilities.c **** 
   3:../lib/utilities.c **** // ############################################################################################
   4:../lib/utilities.c **** // Convert 4/8/12/16/20/24/28/32 bit hexadecimal value to ASCII string
   5:../lib/utilities.c ****    void long_to_hex_string(unsigned long data,    // max 32 bit data word
   6:../lib/utilities.c ****                            unsigned char *buffer, // buffer to store the string
   7:../lib/utilities.c **** 						   unsigned char numbers) // number of places, max 8
   8:../lib/utilities.c **** // ############################################################################################
   9:../lib/utilities.c **** {
 985              	hi	ip, r0, lsr r3
 986              		.loc 3 26 0
 987              		sub	r3, lr, #1
 988              		.loc 3 25 0
 989 0574 E92D4010 		and	ip, ip, #15
 990              	.LVL112:
 991              		.loc 3 26 0
 992 0578 E20240FF 		and	lr, r3, #255
  10:../lib/utilities.c **** 	unsigned char temp_char = 0;
  11:../lib/utilities.c **** 	unsigned long temp_data = 0;
  12:../lib/utilities.c **** 
  13:../lib/utilities.c **** 	// fit into range
  14:../lib/utilities.c **** 	if(numbers > 8)
 993              	29 0
 994 057c E3540008 		cmp	ip, #9
 995 0580 83A04008 		.loc 3 30 0
 996 0584 8A000001 		add	r3, ip, #48
 997              	.LVL113:
  15:../lib/utilities.c **** 		numbers = 8;
  16:../lib/utilities.c **** 	if(numbers < 1)
 998              	 3 32 0
 999 0588 E3540000 		addhi	r3, ip, #55
  17:../lib/utilities.c **** 		numbers = 1;
  18:../lib/utilities.c **** 
  19:../lib/utilities.c **** 	while(numbers > 0){
  20:../lib/utilities.c **** 		// isolate one 4-bit value
  21:../lib/utilities.c **** 		if(numbers > 1)
  22:../lib/utilities.c **** 			temp_data = data >> ((numbers-1)*4);
  23:../lib/utilities.c **** 		else
  24:../lib/utilities.c **** 			temp_data = data;
  25:../lib/utilities.c **** 		temp_data = temp_data & 0x0000000F;
  26:../lib/utilities.c **** 		numbers--;
  27:../lib/utilities.c **** 
  28:../lib/utilities.c **** 		// convert 4-bit value temp_data to char temp_char
  29:../lib/utilities.c **** 		if(temp_data < 10)
  30:../lib/utilities.c **** 			temp_char = '0' + temp_data;
  31:../lib/utilities.c **** 		else
  32:../lib/utilities.c **** 			temp_char = 'A' + temp_data - 10;
  33:../lib/utilities.c **** 
  34:../lib/utilities.c **** 		// save character
  35:../lib/utilities.c **** 		*buffer++ = temp_char;
  36:../lib/utilities.c **** 	}
  37:../lib/utilities.c **** 
  38:../lib/utilities.c **** 	*buffer++ = 0; // terminate string
  39:../lib/utilities.c **** }
 1000              	loc 3 19 0
 1001 058c 03A04001 		cmp	lr, #0
 1002              		.loc 3 35 0
 1003 0590 E1A02001 		strb	r3, [r2], #1
 1004              		.loc 3 19 0
 1005 0594 E1A0E004 		bne	.L171
 1006              		.loc 3 38 0
 1007              		sub	r3, r4, #1
 1008              	.LVL114:
 1009 0598 E1A0310E 		and	r3, r3, #255
 1010              		add	r3, r1, r3
 1011 059c E35E0001 		strb	lr, [r3, #1]
 1012              		.loc 3 39 0
 1013 05a0 E2433004 		ldmfd	sp!, {r4, pc}
 1014              	.LFE28:
 1016              		.align	2
 1017              		.global	get_adc
 1019              	get_adc:
 1020 05ac E24E3001 	.LFB29:
 1021              		.loc 3 45 0
 1022 05b0 E20CC00F 		@ args = 0, pretend = 0, frame = 0
 1023              		@ frame_needed = 0, uses_anonymous_args = 0
 1024              	.LVL115:
 1025 05b4 E203E0FF 		stmfd	sp!, {r4, lr}
 1026              	.LCFI6:
 1027 05b8 E35C0009 		.loc 3 45 0
 1028              		mov	r4, r0
 1029 05bc E28C3030 		.loc 3 48 0
 1030              		cmp	r4, #7
 1031              		.loc 3 52 0
 1032 05c0 828C3037 		mov	r1, #16
 1033              		mov	r0, #1
 1034 05c4 E35E0000 	.LVL116:
 1035              		.loc 3 48 0
 1036 05c8 E4C23001 		bls	.L188
 1037              		.loc 3 58 0
 1038 05cc 1AFFFFF1 		mov	r0, #0
 1039              		ldmfd	sp!, {r4, pc}
 1040 05d0 E2443001 	.L188:
 1041              		.loc 3 52 0
 1042 05d4 E20330FF 		bl	io_spi0_config
 1043 05d8 E0813003 		.loc 3 53 0
 1044 05dc E5C3E001 		mov	r0, #6
 1045              		bl	io_spi0_enable
 1046 05e0 E8BD8010 		.loc 3 56 0
 1047              		mov	r0, #0
 1048              		bl	io_spi0_trans
 1049              		.loc 3 57 0
 1050              		mov	r0, r4, asl #11
 1051              		.loc 3 58 0
 1052              		ldmfd	sp!, {r4, lr}
 1053              		.loc 3 57 0
  40:../lib/utilities.c **** 
  41:../lib/utilities.c **** // ############################################################################################
  42:../lib/utilities.c **** // read external ADC value
  43:../lib/utilities.c ****    unsigned int get_adc(int adc_index) // adc 0..7
  44:../lib/utilities.c **** // ############################################################################################
  45:../lib/utilities.c **** {
 1054              	lign	2
 1055              		.global	delay
 1057              	delay:
 1058 05e4 E92D4010 	.LFB30:
 1059              		.loc 3 64 0
 1060              		@ args = 0, pretend = 0, frame = 0
 1061 05e8 E1A04000 		@ frame_needed = 0, uses_anonymous_args = 0
  46:../lib/utilities.c **** 	unsigned long temp;
  47:../lib/utilities.c **** 
  48:../lib/utilities.c **** 	if ((adc_index < 0) || (adc_index > 7))
 1062              	register save eliminated.
 1063 05ec E3540007 	.LVL117:
  49:../lib/utilities.c **** 		return 0;
  50:../lib/utilities.c **** 
  51:../lib/utilities.c **** 	// config spi
  52:../lib/utilities.c **** 	io_spi0_config(1,16); // auto assert cs, 16 bit transfer
 1064              	loc 3 65 0
 1065 05f0 E3A01010 		rsb	r3, r0, r0, asl #5
 1066 05f4 E3A00001 		add	r0, r0, r3, asl #2
 1067              	.LVL118:
 1068              		add	r0, r0, r0, asl #2
 1069 05f8 9A000001 		mov	r0, r0, asl #4
  53:../lib/utilities.c **** 	io_spi0_enable(adc_cs);
  54:../lib/utilities.c **** 
  55:../lib/utilities.c **** 	temp = adc_index * 2048;
  56:../lib/utilities.c **** 	io_spi0_trans(0); // dummy read
  57:../lib/utilities.c **** 	return (unsigned int)io_spi0_trans(temp);
  58:../lib/utilities.c **** }
 1070              	9:
 1071 05fc E3A00000 		.loc 3 66 0
 1072 0600 E8BD8010 		cmp	r0, #0
 1073              		.loc 3 64 0
 1074              		@ lr needed for prologue
 1075 0604 EBFFFFFE 		.loc 3 66 0
 1076              		movle	pc, lr
 1077 0608 E3A00006 	.L193:
 1078 060c EBFFFFFE 		.loc 3 67 0
 1079              		NOP
 1080 0610 E3A00000 		.loc 3 66 0
 1081 0614 EBFFFFFE 		subs	r0, r0, #1
 1082              		bne	.L193
 1083 0618 E1A00584 		mov	pc, lr
 1084              	.LFE30:
 1086              		.align	2
 1087 0620 EAFFFFFE 		.global	string_cmpc
 1089              	string_cmpc:
 1090              	.LFB31:
 1091              		.loc 3 76 0
 1092              		@ args = 0, pretend = 0, frame = 0
 1093              		@ frame_needed = 0, uses_anonymous_args = 0
 1094              		@ link register save eliminated.
  59:../lib/utilities.c **** 
  60:../lib/utilities.c **** // ############################################################################################
  61:../lib/utilities.c **** // simple delay routine
  62:../lib/utilities.c ****    void delay(int time) // waits time*10000 clock ticks
  63:../lib/utilities.c **** // ############################################################################################
  64:../lib/utilities.c **** {
 1095              	ds	ip, r2, #255
 1096              		.loc 3 76 0
 1097              		@ lr needed for prologue
 1098              		.loc 3 77 0
 1099              		beq	.L196
  65:../lib/utilities.c **** 	time = time*2500*4;
 1100              	21:
 1101 0624 E0603280 		.loc 3 78 0
 1102 0628 E0800103 		ldrb	r2, [r0, #0]	@ zero_extendqisi2
 1103              		ldrb	r3, [r1, #0]	@ zero_extendqisi2
 1104 062c E0800100 		cmp	r2, r3
 1105 0630 E1A00200 		beq	.L200
 1106              		b	.L198
  66:../lib/utilities.c **** 	while(time > 0){
 1107              	.LVL122:
 1108 0634 E3500000 		ldrb	r2, [r0, #1]!	@ zero_extendqisi2
 1109              	.LVL123:
 1110              		ldrb	r3, [r1, #1]!	@ zero_extendqisi2
 1111              		cmp	r2, r3
 1112 0638 D1A0F00E 		bne	.L198
 1113              	.LVL124:
  67:../lib/utilities.c **** 		asm volatile ("NOP");
 1114              		.loc 3 80 0
 1115 063c E1A00000 		sub	r3, ip, #1
 1116              		.loc 3 77 0
 1117 0640 E2500001 		ands	ip, r3, #255
 1118 0644 1AFFFFFC 		bne	.L201
 1119 0648 E1A0F00E 	.LVL125:
 1120              	.L196:
 1121              		mov	r0, #1
 1122              	.LVL126:
 1123              		.loc 3 83 0
 1124              		mov	pc, lr
 1125              	.LVL127:
 1126              	.L198:
  68:../lib/utilities.c **** 		time--;
  69:../lib/utilities.c **** 	}
  70:../lib/utilities.c **** }
  71:../lib/utilities.c **** 
  72:../lib/utilities.c **** // ############################################################################################
  73:../lib/utilities.c **** // String compare, buffered string with immediate const char string
  74:../lib/utilities.c ****    unsigned char string_cmpc(unsigned char *string1, const char *string2, unsigned char length)
  75:../lib/utilities.c **** // ############################################################################################
  76:../lib/utilities.c **** {
 1127              		mov	r0, #0
 1128              	.LVL128:
 1129              		mov	pc, lr
 1130              	.LFE31:
  77:../lib/utilities.c **** 	while(length != 0){
 1132              	gn	2
 1133 064c E212C0FF 		.global	hex_string_to_long
 1135              	hex_string_to_long:
 1136              	.LFB32:
 1137 0650 0A00000B 		.file 4 "main.c"
 1138              		.loc 4 8 0
  78:../lib/utilities.c **** 		if(*string1++ != (unsigned char)*string2++)
 1139              	 = 0, pretend = 0, frame = 0
 1140 0654 E5D02000 		@ frame_needed = 0, uses_anonymous_args = 0
 1141 0658 E5D13000 	.LVL129:
 1142 065c E1520003 		stmfd	sp!, {r4, r5, lr}
 1143 0660 0A000004 	.LCFI7:
 1144 0664 EA000008 		.loc 4 12 0
 1145              		mov	r4, r1, asl #1
 1146              		cmp	r4, #0
 1147 0668 E5F02001 		.loc 4 8 0
 1148              		mov	r5, r0
 1149 066c E5F13001 		.loc 4 12 0
 1150 0670 E1520003 		movle	r0, #0
 1151 0674 1A000004 	.LVL130:
 1152              		ldmlefd	sp!, {r4, r5, pc}
 1153              		mov	r0, #0
  79:../lib/utilities.c **** 			return(0); // missmatch
  80:../lib/utilities.c **** 		length--;
 1154              	L131:
 1155 0678 E24C3001 	.L208:
 1156              		.loc 4 13 0
 1157 067c E213C0FF 		ldrb	r2, [r1, r5]	@ zero_extendqisi2
 1158 0680 1AFFFFF8 		sub	r3, r2, #48
 1159              		.loc 4 14 0
 1160              		add	ip, r2, r0, asl #4
 1161 0684 E3A00001 		.loc 4 13 0
 1162              		cmp	r3, #9
  81:../lib/utilities.c **** 	}
  82:../lib/utilities.c **** 	return(1); // match
  83:../lib/utilities.c **** }
 1163              	5 0
 1164 0688 E1A0F00E 		sub	lr, r2, #65
 1165              		.loc 4 14 0
 1166              		subls	r0, ip, #48
 1167              		.loc 4 13 0
 1168 068c E3A00000 		bls	.L211
 1169              		.loc 4 16 0
 1170 0690 E1A0F00E 		add	r3, r2, r0, asl #4
 1171              		.loc 4 15 0
 1172              		cmp	lr, #5
 1173              		.loc 4 17 0
 1174              		sub	ip, r2, #97
 1175              		.loc 4 16 0
 1176              		subls	r0, r3, #55
 1177              		.loc 4 15 0
 1178              		bls	.L211
   1:main.c        **** #include "../lib/storm_core.h"
   2:main.c        **** #include "../lib/storm_soc_basic.h"
   3:main.c        **** #include "../lib/io_driver.c"
   4:main.c        **** #include "../lib/uart.c"
   5:main.c        **** #include "../lib/utilities.c"
   6:main.c        **** 
   7:main.c        **** unsigned long int hex_string_to_long ( char *hexstr, int charlen )
   8:main.c        **** {
 1179              	d	r3, r2, r0, asl #4
 1180              		.loc 4 17 0
 1181              		cmp	ip, #5
 1182              		.loc 4 18 0
 1183 0694 E92D4030 		subls	r0, r3, #87
 1184              	.L211:
   9:main.c        **** 	unsigned long int hexval =  0 ;
  10:main.c        **** 	int i;
  11:main.c        **** 
  12:main.c        **** 	for (i=0 ; i< (charlen*2) ; i++ ) {
 1185              	4 12 0
 1186 0698 E1A04081 		add	r1, r1, #1
 1187 069c E3540000 		cmp	r1, r4
 1188              		bne	.L208
 1189 06a0 E1A05000 	.LVL132:
 1190              		.loc 4 22 0
 1191 06a4 D3A00000 		ldmfd	sp!, {r4, r5, pc}
 1192              	.LFE32:
 1194 06ac E3A00000 		.align	2
 1195 06b0 E1A01000 		.global	qbytes_to_long
 1197              	qbytes_to_long:
  13:main.c        **** 		if (( hexstr[i] >= 48 ) & (hexstr[i] <= 57 )) 
 1198              	 4 25 0
 1199 06b4 E7D12005 		@ args = 0, pretend = 0, frame = 0
 1200 06b8 E2423030 		@ frame_needed = 0, uses_anonymous_args = 0
  14:main.c        **** 			hexval = (hexval <<4 ) + hexstr[i] - (int) '0';
 1201              	link register save eliminated.
 1202 06bc E082C200 	.LVL133:
 1203              		ldrb	r3, [r0, #3]	@ zero_extendqisi2
 1204 06c0 E3530009 		ldrb	r2, [r0, #2]	@ zero_extendqisi2
  15:main.c        **** 		else if (( hexstr[i] >= 65 ) & ( hexstr[i] <= 70 )) 
 1205              	b	r1, [r0, #0]	@ zero_extendqisi2
 1206 06c4 E242E041 		orr	r3, r3, r2, asl #8
 1207              		ldrb	r0, [r0, #1]	@ zero_extendqisi2
 1208 06c8 924C0030 	.LVL134:
 1209              		orr	r3, r3, r1, asl #24
 1210 06cc 9A000007 		.loc 4 35 0
  16:main.c        **** 			hexval = (hexval <<4 ) + hexstr[i] + 10 - (int) 'A';
 1211              	0, r3, r0, asl #16
 1212 06d0 E0823200 		.loc 4 25 0
 1213              		@ lr needed for prologue
 1214 06d4 E35E0005 		.loc 4 35 0
  17:main.c        **** 		else if (( hexstr[i] >= 97 ) & ( hexstr[i] <= 102)) 
 1215              		pc, lr
 1216 06d8 E242C061 	.LFE33:
 1218 06dc 92430037 		.section	.rodata.str1.4,"aMS",%progbits,1
 1219              		.align	2
 1220 06e0 9A000002 	.LC1:
  18:main.c        **** 			hexval = (hexval <<4 ) + hexstr[i] +10 - (int) 'a';
 1221              	i	"\015\012\015\012\015\012+--------------------------"
 1222 06e4 E0823200 		.ascii	"--------------------------------------+\015\012\000"
 1223              		.align	2
 1224 06e8 E35C0005 	.LC2:
 1225              		.ascii	"|    <<< STORM Core Processor System - By Stephan N"
 1226 06ec 92430057 		.ascii	"olting >>>    |\015\012\000"
 1227              		.align	2
 1228              	.LC3:
 1229 06f0 E2811001 		.ascii	"+--------------------------------------------------"
 1230 06f4 E1510004 		.ascii	"--------------+\015\012\000"
 1231 06f8 1AFFFFED 		.align	2
 1232              	.LC4:
  19:main.c        **** 	} //for
  20:main.c        ****  
  21:main.c        **** 	return hexval;
  22:main.c        **** }
 1233              	       Bootloader for STORM SoC   Version: 20120"
 1234 06fc E8BD8030 		.ascii	"524-D         |\015\012\000"
 1235              		.align	2
 1236              	.LC5:
 1237              		.ascii	"|               Contact: stnolting@googlemail.com  "
 1238              		.ascii	"              |\015\012\000"
 1239              		.align	2
 1240              	.LC6:
 1241              		.ascii	"+--------------------------------------------------"
  23:main.c        **** 
  24:main.c        **** unsigned long int qbytes_to_long ( unsigned char *buffer )
  25:main.c        **** {
 1242              	--------------+\015\012\015\012\000"
 1243              		.align	2
 1244              	.LC7:
 1245              		.ascii	" < Welcome to the STORM SoC bootloader console! >\015"
 1246              		.ascii	"\012 < Select an operation from the menu below or p"
 1247 0700 E5D03003 		.ascii	"ress >\015\012\000"
 1248 0704 E5D02002 		.align	2
 1249 0708 E5D01000 	.LC8:
 1250 070c E1833402 		.ascii	" < the boot key for immediate application start. >\015"
 1251 0710 E5D00001 		.ascii	"\012\015\012\000"
 1252              		.align	2
 1253 0714 E1833C01 	.LC9:
  26:main.c        **** 	unsigned char d = buffer[0];
  27:main.c        **** 	unsigned char c = buffer[1];
  28:main.c        **** 	unsigned char b = buffer[2];
  29:main.c        **** 	unsigned char a = buffer[3];
  30:main.c        **** 	unsigned long n;
  31:main.c        **** 
  32:main.c        **** 
  33:main.c        **** 	n = a|(b<<8)|(c<<16)|(d<<24);
  34:main.c        **** 	return n;
  35:main.c        **** }
 1254              	- boot from core RAM (start application)\015\012"
 1255 0718 E1830800 		.ascii	" 1 - program core RAM via UART_0\015\012 2 - core R"
 1256              		.ascii	"AM dump\015\012\000"
 1257              		.align	2
 1258              	.LC10:
 1259 071c E1A0F00E 		.ascii	" 3 - boot from I2C EEPROM\015\012 4 - program I2C E"
 1260              		.ascii	"EPROM via UART_0\015\012 5 - show content of I2C EE"
 1261              		.ascii	"PROM\015\012\000"
 1262              		.align	2
 1263              	.LC11:
 1264              		.ascii	" a - automatic boot configuration\015\012 h - help\015"
 1265 0000 0D0A0D0A 		.ascii	"\012 r - restart system\015\012\015\012Select: \000"
 1265      0D0A2B2D 
 1265      2D2D2D2D 
 1265      2D2D2D2D 
 1265      2D2D2D2D 
 1266 0021 2D2D2D2D 		.align	2
 1266      2D2D2D2D 
 1266      2D2D2D2D 
 1266      2D2D2D2D 
 1266      2D2D2D2D 
 1267 004b 00       	.LC12:
 1268              		.ascii	"\015\012\015\012Application will start automaticall"
 1269 004c 7C202020 		.ascii	"y after download.\015\012-> Waiting for 'storm_prog"
 1269      203C3C3C 
 1269      2053544F 
 1269      524D2043 
 1269      6F726520 
 1270 007f 6F6C7469 		.ascii	"ram.bin' in byte-stream mode...\000"
 1270      6E67203E 
 1270      3E3E2020 
 1270      20207C0D 
 1270      0A00
 1271 0091 000000   		.align	2
 1272              	.LC13:
 1273 0094 2B2D2D2D 		.ascii	" ERROR! Program file too big!\015\012\015\012\000"
 1273      2D2D2D2D 
 1273      2D2D2D2D 
 1273      2D2D2D2D 
 1273      2D2D2D2D 
 1274 00c7 2D2D2D2D 		.align	2
 1274      2D2D2D2D 
 1274      2D2D2D2D 
 1274      2D2D2B0D 
 1274      0A00
 1275 00d9 000000   	.LC14:
 1276              		.ascii	" Invalid programming file!\015\012\015\012Select: \000"
 1277 00dc 7C202020 		.align	2
 1277      20202020 
 1277      2020426F 
 1277      6F746C6F 
 1277      61646572 
 1278 010f 3532342D 	.LC15:
 1278      44202020 
 1278      20202020 
 1278      20207C0D 
 1278      0A00
 1279 0121 000000   		.ascii	"\015\012\015\012Abort dumping by pressing any key.\015"
 1280              		.ascii	"\012Press any key to continue.\015\012\015\012\000"
 1281 0124 7C202020 		.align	2
 1281      20202020 
 1281      20202020 
 1281      20202020 
 1281      436F6E74 
 1282 0157 20202020 	.LC16:
 1282      20202020 
 1282      20202020 
 1282      20207C0D 
 1282      0A00
 1283 0169 000000   		.ascii	"\015\012\015\012Dumping completed.\015\012\015\012S"
 1284              		.ascii	"elect: \000"
 1285 016c 2B2D2D2D 		.align	2
 1285      2D2D2D2D 
 1285      2D2D2D2D 
 1285      2D2D2D2D 
 1285      2D2D2D2D 
 1286 019f 2D2D2D2D 	.LC17:
 1286      2D2D2D2D 
 1286      2D2D2D2D 
 1286      2D2D2B0D 
 1286      0A0D0A00 
 1287 01b3 00       		.ascii	"\015\012\015\012Enter device address (2x hex_chars,"
 1288              		.ascii	" set LSB to '0'): \000"
 1289 01b4 203C2057 		.align	2
 1289      656C636F 
 1289      6D652074 
 1289      6F207468 
 1289      65205354 
 1290 01e6 0A203C20 	.LC18:
 1290      53656C65 
 1290      63742061 
 1290      6E206F70 
 1290      65726174 
 1291 0216 72657373 		.ascii	" Invalid address!\015\012\015\012Select: \000"
 1291      203E0D0A 
 1291      00
 1292 021f 00       		.align	2
 1293              	.LC19:
 1294 0220 203C2074 		.ascii	"\015\012Application will start automatically after "
 1294      68652062 
 1294      6F6F7420 
 1294      6B657920 
 1294      666F7220 
 1295 0253 0A0D0A00 		.ascii	"upload.\015\012-> Loading boot image...\000"
 1296 0257 00       		.align	2
 1297              	.LC20:
 1298 0258 2030202D 		.ascii	" Upload complete\015\012\000"
 1298      20626F6F 
 1298      74206672 
 1298      6F6D2063 
 1298      6F726520 
 1299 0285 2031202D 		.align	2
 1299      2070726F 
 1299      6772616D 
 1299      20636F72 
 1299      65205241 
 1300 02b2 414D2064 	.LC21:
 1300      756D700D 
 1300      0A00
 1301              		.ascii	" Invalid boot device or file!\015\012\015\012Select"
 1302              		.ascii	": \000"
 1303 02bc 2033202D 		.align	2
 1303      20626F6F 
 1303      74206672 
 1303      6F6D2049 
 1303      32432045 
 1304 02e9 4550524F 	.LC22:
 1304      4D207669 
 1304      61205541 
 1304      52545F30 
 1304      0D0A2035 
 1305 0316 50524F4D 		.ascii	"\015\012Invalid address!\015\012\015\012Select: \000"
 1305      0D0A00
 1306 031d 000000   		.align	2
 1307              	.LC23:
 1308 0320 2061202D 		.ascii	"\015\012Data will overwrite RAM content!\015\012-> "
 1308      20617574 
 1308      6F6D6174 
 1308      69632062 
 1308      6F6F7420 
 1309 034d 0A207220 		.ascii	"Waiting for 'storm_program.bin' in byte-stream mode"
 1309      2D207265 
 1309      73746172 
 1309      74207379 
 1309      7374656D 
 1310 036e 0000     		.ascii	"...\000"
 1311              		.align	2
 1312 0370 0D0A0D0A 	.LC24:
 1312      4170706C 
 1312      69636174 
 1312      696F6E20 
 1312      77696C6C 
 1313 0397 79206166 		.ascii	" Download completed\015\012\000"
 1313      74657220 
 1313      646F776E 
 1313      6C6F6164 
 1313      2E0D0A2D 
 1314 03c4 72616D2E 		.align	2
 1314      62696E27 
 1314      20696E20 
 1314      62797465 
 1314      2D737472 
 1315              	.LC25:
 1316              		.ascii	"Writing buffer to i2c EEPROM...\000"
 1317 03e4 20455252 		.align	2
 1317      4F522120 
 1317      50726F67 
 1317      72616D20 
 1317      66696C65 
 1318 0406 0000     	.LC26:
 1319              		.ascii	" Completed\015\012\015\012\000"
 1320 0408 20496E76 		.align	2
 1320      616C6964 
 1320      2070726F 
 1320      6772616D 
 1320      6D696E67 
 1321 042f 00       	.LC27:
 1322              		.ascii	" Invalid boot device or file!\015\012\015\012\000"
 1323 0430 0D0A0D0A 		.align	2
 1323      41626F72 
 1323      74206475 
 1323      6D70696E 
 1323      67206279 
 1324 0457 0A507265 	.LC28:
 1324      73732061 
 1324      6E79206B 
 1324      65792074 
 1324      6F20636F 
 1325 0477 00       		.ascii	"Select: \000"
 1326              		.align	2
 1327 0478 0D0A0D0A 	.LC29:
 1327      44756D70 
 1327      696E6720 
 1327      636F6D70 
 1327      6C657465 
 1328 0493 656C6563 		.ascii	"\015\012\015\012Enter device address (2 hex-chars, "
 1328      743A2000 
 1329 049b 00       		.ascii	"set LSB to '0'): \000"
 1330              		.align	2
 1331 049c 0D0A0D0A 	.LC30:
 1331      456E7465 
 1331      72206465 
 1331      76696365 
 1331      20616464 
 1332 04c3 20736574 		.ascii	"\015\012\015\012Abort dumping by pressing any key. "
 1332      204C5342 
 1332      20746F20 
 1332      27302729 
 1332      3A2000
 1333 04d6 0000     		.ascii	"If no data is shown,\015\012\000"
 1334              		.align	2
 1335 04d8 20496E76 	.LC31:
 1335      616C6964 
 1335      20616464 
 1335      72657373 
 1335      210D0A0D 
 1336 04f6 0000     		.ascii	"the selected device is not responding. Press any ke"
 1337              		.ascii	"y to continue.\015\012\015\012\000"
 1338 04f8 0D0A4170 		.align	2
 1338      706C6963 
 1338      6174696F 
 1338      6E207769 
 1338      6C6C2073 
 1339 0525 75706C6F 	.LC32:
 1339      61642E0D 
 1339      0A2D3E20 
 1339      4C6F6164 
 1339      696E6720 
 1340 0547 00       		.ascii	"\015\012\015\012Automatic boot configuration for po"
 1341              		.ascii	"wer-up:\015\012\000"
 1342 0548 2055706C 		.align	2
 1342      6F616420 
 1342      636F6D70 
 1342      6C657465 
 1342      0D0A00
 1343 055b 00       	.LC33:
 1344              		.ascii	"[3210] configuration DIP switch\015\012 0000 - Star"
 1345 055c 20496E76 		.ascii	"t bootloader console\015\012 0001 - Automatic boot "
 1345      616C6964 
 1345      20626F6F 
 1345      74206465 
 1345      76696365 
 1346 0583 3A2000   		.ascii	"from core RAM\015\012\000"
 1347 0586 0000     		.align	2
 1348              	.LC34:
 1349 0588 0D0A496E 		.ascii	" 0010 - Automatic boot from I2C EEPROM (Address 0xA"
 1349      76616C69 
 1349      64206164 
 1349      64726573 
 1349      73210D0A 
 1350 05a7 00       		.ascii	"0)\015\012\015\012Select: \000"
 1351              		.align	2
 1352 05a8 0D0A4461 	.LC35:
 1352      74612077 
 1352      696C6C20 
 1352      6F766572 
 1352      77726974 
 1353 05cf 57616974 		.ascii	"\015\012\015\012STORM SoC bootloader\015\012\000"
 1353      696E6720 
 1353      666F7220 
 1353      2773746F 
 1353      726D5F70 
 1354 0602 2E2E2E00 		.align	2
 1355 0606 0000     	.LC36:
 1356              		.ascii	"'0': Execute program in RAM.\015\012\000"
 1357 0608 20446F77 		.align	2
 1357      6E6C6F61 
 1357      6420636F 
 1357      6D706C65 
 1357      7465640D 
 1358 061e 0000     	.LC37:
 1359              		.ascii	"'1': Write 'storm_program.bin' to the core's RAM vi"
 1360 0620 57726974 		.ascii	"a UART.\015\012\000"
 1360      696E6720 
 1360      62756666 
 1360      65722074 
 1360      6F206932 
 1361              		.align	2
 1362              	.LC38:
 1363 0640 20436F6D 		.ascii	"'2': Print current content of complete core RAM.\015"
 1363      706C6574 
 1363      65640D0A 
 1363      0D0A00
 1364 064f 00       		.ascii	"\012\000"
 1365              		.align	2
 1366 0650 20496E76 	.LC39:
 1366      616C6964 
 1366      20626F6F 
 1366      74206465 
 1366      76696365 
 1367 0672 0000     		.ascii	"'3': Load boot image from EEPROM and start applicat"
 1368              		.ascii	"ion.\015\012\000"
 1369 0674 53656C65 		.align	2
 1369      63743A20 
 1369      00
 1370 067d 000000   	.LC40:
 1371              		.ascii	"'4': Write 'storm_program.bin' to I2C EEPROM via UA"
 1372 0680 0D0A0D0A 		.ascii	"RT.\015\012\000"
 1372      456E7465 
 1372      72206465 
 1372      76696365 
 1372      20616464 
 1373 06a7 73657420 		.align	2
 1373      4C534220 
 1373      746F2027 
 1373      3027293A 
 1373      2000
 1374 06b9 000000   	.LC41:
 1375              		.ascii	"'5': Print content of I2C EEPROM.\015\012\000"
 1376 06bc 0D0A0D0A 		.align	2
 1376      41626F72 
 1376      74206475 
 1376      6D70696E 
 1376      67206279 
 1377 06e3 4966206E 	.LC42:
 1377      6F206461 
 1377      74612069 
 1377      73207368 
 1377      6F776E2C 
 1378 06fa 0000     		.ascii	"'a': Show DIP switch configurations for automatic b"
 1379              		.ascii	"oot.\015\012\000"
 1380 06fc 74686520 		.align	2
 1380      73656C65 
 1380      63746564 
 1380      20646576 
 1380      69636520 
 1381 072f 7920746F 	.LC43:
 1381      20636F6E 
 1381      74696E75 
 1381      652E0D0A 
 1381      0D0A00
 1382 0742 0000     		.ascii	"'h': Show this screen.\015\012\000"
 1383              		.align	2
 1384 0744 0D0A0D0A 	.LC44:
 1384      4175746F 
 1384      6D617469 
 1384      6320626F 
 1384      6F742063 
 1385 076b 7765722D 		.ascii	"'r': Reset system.\015\012\015\012\000"
 1385      75703A0D 
 1385      0A00
 1386 0775 000000   		.align	2
 1387              	.LC45:
 1388 0778 5B333231 		.ascii	"Boot EEPROM: 24xxnnn (like 24AA64), 7 bit address +"
 1388      305D2063 
 1388      6F6E6669 
 1388      67757261 
 1388      74696F6E 
 1389 07a5 7420626F 		.ascii	" dont-care bit,\015\012\000"
 1389      6F746C6F 
 1389      61646572 
 1389      20636F6E 
 1389      736F6C65 
 1390 07d2 66726F6D 		.align	2
 1390      20636F72 
 1390      65205241 
 1390      4D0D0A00 
 1391 07e2 0000     	.LC46:
 1392              		.ascii	"connected to I2C_CONTROLLER_0, operating frequency "
 1393 07e4 20303031 		.ascii	"is 100kHz,\015\012\000"
 1393      30202D20 
 1393      4175746F 
 1393      6D617469 
 1393      6320626F 
 1394 0817 30290D0A 		.align	2
 1394      0D0A5365 
 1394      6C656374 
 1394      3A2000
 1395 0826 0000     	.LC47:
 1396              		.ascii	"maximum EEPROM size = 65536 byte => 16 bit addresse"
 1397 0828 0D0A0D0A 		.ascii	"s,\015\012\000"
 1397      53544F52 
 1397      4D20536F 
 1397      4320626F 
 1397      6F746C6F 
 1398 0843 00       		.align	2
 1399              	.LC48:
 1400 0844 2730273A 		.ascii	"fixed boot device address: 0xA0\015\012\015\012\000"
 1400      20457865 
 1400      63757465 
 1400      2070726F 
 1400      6772616D 
 1401 0863 00       		.align	2
 1402              	.LC49:
 1403 0864 2731273A 		.ascii	"Terminal setup: 9600 baud, 8 data bits, no parity, "
 1403      20577269 
 1403      74652027 
 1403      73746F72 
 1403      6D5F7072 
 1404 0897 61205541 		.ascii	"1 stop bit\015\012\015\012\000"
 1404      52542E0D 
 1404      0A00
 1405 08a1 000000   		.align	2
 1406              	.LC50:
 1407 08a4 2732273A 		.ascii	"For more information see the STORM Core / STORM SoC"
 1407      20507269 
 1407      6E742063 
 1407      75727265 
 1407      6E742063 
 1408 08d5 0A00     		.ascii	" datasheet\015\012\000"
 1409 08d7 00       		.align	2
 1410              	.LC51:
 1411 08d8 2733273A 		.ascii	"http://opencores.org/project,storm_core\015\012\000"
 1411      204C6F61 
 1411      6420626F 
 1411      6F742069 
 1411      6D616765 
 1412 090b 696F6E2E 		.align	2
 1412      0D0A00
 1413 0912 0000     	.LC52:
 1414              		.ascii	"http://opencores.org/project,storm_soc\015\012\000"
 1415 0914 2734273A 		.align	2
 1415      20577269 
 1415      74652027 
 1415      73746F72 
 1415      6D5F7072 
 1416 0947 52542E0D 	.LC53:
 1416      0A00
 1417 094d 000000   		.ascii	"Contact: stnolting@googlemail.com\015\012\000"
 1418              		.align	2
 1419 0950 2735273A 	.LC54:
 1419      20507269 
 1419      6E742063 
 1419      6F6E7465 
 1419      6E74206F 
 1420              		.ascii	"(c) 2012 by Stephan Nolting\015\012\015\012Select: "
 1421              		.ascii	"\000"
 1422 0974 2761273A 		.align	2
 1422      2053686F 
 1422      77204449 
 1422      50207377 
 1422      69746368 
 1423 09a7 6F6F742E 	.LC55:
 1423      0D0A00
 1424 09ae 0000     		.ascii	"\015\012\015\012We'll send you back - to the future"
 1425              		.ascii	"!.\015\012\015\012\000"
 1426 09b0 2768273A 		.align	2
 1426      2053686F 
 1426      77207468 
 1426      69732073 
 1426      63726565 
 1427 09c9 000000   	.LC56:
 1428              		.ascii	" - Doctor Emmet L. Brown\015\012\015\012Select: \000"
 1429 09cc 2772273A 		.align	2
 1429      20526573 
 1429      65742073 
 1429      79737465 
 1429      6D2E0D0A 
 1430 09e3 00       	.LC57:
 1431              		.ascii	" Invalid operation!\015\012Try again: \000"
 1432 09e4 426F6F74 		.align	2
 1432      20454550 
 1432      524F4D3A 
 1432      20323478 
 1432      786E6E6E 
 1433 0a17 20646F6E 	.LC58:
 1433      742D6361 
 1433      72652062 
 1433      69742C0D 
 1433      0A00
 1434 0a29 000000   		.ascii	"\015\012\015\012-> Starting application...\015\012\015"
 1435              		.ascii	"\012\000"
 1436 0a2c 636F6E6E 		.align	2
 1436      65637465 
 1436      6420746F 
 1436      20493243 
 1436      5F434F4E 
 1437 0a5f 69732031 	.LC59:
 1437      30306B48 
 1437      7A2C0D0A 
 1437      00
 1438              		.ascii	"\015\012\015\012Aborted!\000"
 1439              		.text
 1440 0a6c 6D617869 		.align	2
 1440      6D756D20 
 1440      45455052 
 1440      4F4D2073 
 1440      697A6520 
 1441 0a9f 732C0D0A 		.global	main
 1441      00
 1443              	main:
 1444 0aa4 66697865 	.LFB34:
 1444      6420626F 
 1444      6F742064 
 1444      65766963 
 1444      65206164 
 1445              		.loc 4 41 0
 1446              		@ args = 0, pretend = 0, frame = 8
 1447 0ac8 5465726D 		@ frame_needed = 0, uses_anonymous_args = 0
 1447      696E616C 
 1447      20736574 
 1447      75703A20 
 1447      39363030 
 1448 0afb 31207374 		stmfd	sp!, {r4, r5, r6, r7, r8, sl, lr}
 1448      6F702062 
 1448      69740D0A 
 1448      0D0A00
 1449 0b0a 0000     	.LCFI8:
 1450              		.loc 4 47 0
 1451 0b0c 466F7220 		mov	r0, #0
 1451      6D6F7265 
 1451      20696E66 
 1451      6F726D61 
 1451      74696F6E 
 1452 0b3f 20646174 		.loc 4 41 0
 1452      61736865 
 1452      65740D0A 
 1452      00
 1453              		sub	sp, sp, #12
 1454              	.LCFI9:
 1455 0b4c 68747470 		.loc 4 47 0
 1455      3A2F2F6F 
 1455      70656E63 
 1455      6F726573 
 1455      2E6F7267 
 1456 0b76 0000     		bl	io_set_gpio0_port
 1457              		.loc 4 48 0
 1458 0b78 68747470 		mov	r1, #13
 1458      3A2F2F6F 
 1458      70656E63 
 1458      6F726573 
 1458      2E6F7267 
 1459 0ba1 000000   		mov	r0, #195
 1460              		bl	set_syscpreg
 1461 0ba4 436F6E74 		.loc 4 51 0
 1461      6163743A 
 1461      2073746E 
 1461      6F6C7469 
 1461      6E674067 
 1462              		mov	r0, #99
 1463              		bl	io_i2c0_speed
 1464 0bc8 28632920 		.loc 4 54 0
 1464      32303132 
 1464      20627920 
 1464      53746570 
 1464      68616E20 
 1465 0bef 00       		mov	r0, #6
 1466              		bl	get_syscpreg
 1467              		mov	r1, #6
 1468 0bf0 0D0A0D0A 		orr	r0, r0, #8
 1468      5765276C 
 1468      6C207365 
 1468      6E642079 
 1468      6F752062 
 1469 0c17 212E0D0A 		bl	set_syscpreg
 1469      0D0A00
 1470 0c1e 0000     		.loc 4 57 0
 1471              		mov	r0, #13
 1472 0c20 202D2044 		bl	get_syscpreg
 1472      6F63746F 
 1472      7220456D 
 1472      6D657420 
 1472      4C2E2042 
 1473 0c45 000000   		.loc 4 58 0
 1474              		mov	r0, r0, lsr #17
 1475 0c48 20496E76 		mvn	r0, r0
 1475      616C6964 
 1475      206F7065 
 1475      72617469 
 1475      6F6E210D 
 1476 0c69 000000   		and	r0, r0, #15
 1477              		cmp	r0, #1
 1478 0c6c 0D0A0D0A 		moveq	r4, #48
 1478      2D3E2053 
 1478      74617274 
 1478      696E6720 
 1478      6170706C 
 1479 0c8d 0A00     	.LVL135:
 1480 0c8f 00       		addeq	sl, sp, #7
 1481              		beq	.L223
 1482 0c90 0D0A0D0A 		cmp	r0, #2
 1482      41626F72 
 1482      74656421 
 1482      00
 1483 0c9d 000000   		beq	.L332
 1484              		.loc 4 65 0
 1485              		ldr	r0, .L343
 1486              		bl	uart0_printf
 1487              		.loc 4 66 0
 1488              		ldr	r0, .L343+4
  36:main.c        **** 
  37:main.c        **** // ############################################################################################
  38:main.c        **** // STORM SoC Bootloader
  39:main.c        ****    int main(void)
  40:main.c        **** // ############################################################################################
  41:main.c        **** {
 1489              	343+12
 1490              		bl	uart0_printf
 1491              		.loc 4 69 0
 1492 0720 E92D45F0 		ldr	r0, .L343+16
 1493              		bl	uart0_printf
  42:main.c        **** 	int function_sel, data, i, start_app = 0;
  43:main.c        **** 	unsigned long *data_pointer, word_buffer, adr_buffer, cnt;
  44:main.c        **** 	unsigned char buffer[5], char_tmp, *char_pointer, device_id;
  45:main.c        **** 
  46:main.c        **** 	// show reset ack
  47:main.c        **** 	io_set_gpio0_port(0);
 1494              	 4 70 0
 1495 0724 E3A00000 		ldr	r0, .L343+20
 1496              		bl	uart0_printf
 1497 0728 E24DD00C 		.loc 4 72 0
 1498              		ldr	r0, .L343+24
 1499              		bl	uart0_printf
 1500 072c EBFFFFFE 		.loc 4 73 0
  48:main.c        **** 	set_syscpreg(0xC3, SYS_IO);
 1501              	, .L343+28
 1502 0730 E3A0100D 		bl	uart0_printf
 1503 0734 E3A000C3 		.loc 4 76 0
 1504 0738 EBFFFFFE 		ldr	r0, .L343+32
  49:main.c        **** 
  50:main.c        **** 	// init I²C
  51:main.c        **** 	io_i2c0_speed(0x0063); // 100kHz
 1505              	uart0_printf
 1506 073c E3A00063 		.loc 4 77 0
 1507 0740 EBFFFFFE 		ldr	r0, .L343+36
  52:main.c        **** 
  53:main.c        **** 	// enable write-through strategy
  54:main.c        **** 	set_syscpreg(get_syscpreg(SYS_CTRL_0) | (1<<DC_WTHRU), SYS_CTRL_0);
 1508              		uart0_printf
 1509 0744 E3A00006 		.loc 4 78 0
 1510 0748 EBFFFFFE 		ldr	r0, .L343+40
 1511 074c E3A01006 		bl	uart0_printf
 1512 0750 E3800008 		add	sl, sp, #7
 1513 0754 EBFFFFFE 	.LVL136:
  55:main.c        **** 
  56:main.c        **** 	// Check config switches for immediate boot-config
  57:main.c        **** 	function_sel = (int)((~(get_syscpreg(SYS_IO) >> 17)) & 0x0F);
 1514              	
 1515 0758 E3A0000D 		.loc 4 83 0
 1516 075c EBFFFFFE 		bl	io_uart0_read_byte
  58:main.c        **** 	switch(function_sel){
 1517              	ov	r4, r0
 1518 0760 E1A008A0 	.LVL137:
 1519 0764 E1E00000 	.L223:
 1520 0768 E200000F 		.loc 4 88 0
 1521 076c E3500001 		mov	r0, #13
 1522 0770 03A04030 		bl	get_syscpreg
 1523              		tst	r0, #65536
 1524 0774 028DA007 		.loc 4 165 0
 1525 0778 0A00001A 		moveq	r6, #1
 1526 077c E3500002 	.LVL138:
 1527 0780 0A000070 		moveq	r5, #160
  59:main.c        **** 		case 1: function_sel = '0'; goto main_menu; break; // auto start application from RAM
  60:main.c        **** 		case 2: function_sel = '3'; goto main_menu; start_app = 1; device_id = 0xA0; break; // auto boot 
  61:main.c        **** 		default: break;
  62:main.c        **** 	}
  63:main.c        **** 
  64:main.c        **** 	// Intro screen
  65:main.c        **** 	uart0_printf("\r\n\r\n\r\n+----------------------------------------------------------------+\r\n")
 1528              	loc 4 88 0
 1529 0784 E59F07F8 		bne	.L333
 1530 0788 EBFFFFFE 	.LVL140:
  66:main.c        **** 	uart0_printf(            "|    <<< STORM Core Processor System - By Stephan Nolting >>>    |\r\n")
 1531              	61:
 1532 078c E59F07F4 		.loc 4 172 0
 1533 0790 EBFFFFFE 		mov	r4, #0
  67:main.c        **** 	uart0_printf(            "+----------------------------------------------------------------+\r\n")
 1534              	L141:
 1535 0794 E59F07F0 		.loc 4 170 0
 1536 0798 EBFFFFFE 		ldr	r0, .L343+44
  68:main.c        **** 	uart0_printf(            "|         Bootloader for STORM SoC   Version: 20120524-D         |\r\n")
 1537              		uart0_printf
 1538 079c E59F07EC 	.LVL142:
 1539 07a0 EBFFFFFE 		.loc 4 172 0
  69:main.c        **** 	uart0_printf(            "|               Contact: stnolting@googlemail.com                |\r\n")
 1540              	v	r1, r5
 1541 07a4 E59F07E8 		mov	r2, r4
 1542 07a8 EBFFFFFE 		mov	r3, #2
  70:main.c        **** 	uart0_printf(            "+----------------------------------------------------------------+\r\n\r
 1543              	v	r0, #114
 1544 07ac E59F07E4 		str	r4, [sp, #0]
 1545 07b0 EBFFFFFE 		bl	io_i2c0_byte_transfer
  71:main.c        **** 
  72:main.c        **** 	uart0_printf(            " < Welcome to the STORM SoC bootloader console! >\r\n < Select an operat
 1546              	oc 4 173 0
 1547 07b4 E59F07E0 		mov	r1, r5
 1548 07b8 EBFFFFFE 		.loc 4 172 0
  73:main.c        **** 	uart0_printf(            " < the boot key for immediate application start. >\r\n\r\n");
 1549              	rb	r0, [sp, #7]
 1550 07bc E59F07DC 		.loc 4 173 0
 1551 07c0 EBFFFFFE 		mov	r2, #1
  74:main.c        **** 
  75:main.c        **** 	// Console menu
  76:main.c        **** 	uart0_printf(" 0 - boot from core RAM (start application)\r\n 1 - program core RAM via UART_0\r\n 
 1552              	v	r3, #2
 1553 07c4 E59F07D8 		mov	r0, #114
 1554 07c8 EBFFFFFE 		str	r4, [sp, #0]
  77:main.c        **** 	uart0_printf(" 3 - boot from I2C EEPROM\r\n 4 - program I2C EEPROM via UART_0\r\n 5 - show content
 1555              		io_i2c0_byte_transfer
 1556 07cc E59F07D4 		.loc 4 174 0
 1557 07d0 EBFFFFFE 		mov	r2, #2
  78:main.c        **** 	uart0_printf(" a - automatic boot configuration\r\n h - help\r\n r - restart system\r\n\r\nSelect:
 1558              	v	r3, r2
 1559 07d4 E59F07D0 		.loc 4 173 0
 1560 07d8 EBFFFFFE 		strb	r0, [sp, #8]
 1561 07dc E28DA007 		.loc 4 174 0
 1562              		mov	r1, r5
 1563              		mov	r0, #114
  79:main.c        **** 
  80:main.c        **** 	while(1){
  81:main.c        **** 
  82:main.c        **** 		// console input
  83:main.c        **** 		function_sel = io_uart0_read_byte();
 1564              	4, [sp, #0]
 1565 07e0 EBFFFFFE 		bl	io_i2c0_byte_transfer
 1566 07e4 E1A04000 		.loc 4 175 0
 1567              		mov	r3, #2
 1568              		.loc 4 174 0
  84:main.c        **** 
  85:main.c        **** main_menu:
  86:main.c        **** 
  87:main.c        **** 		// boot button
  88:main.c        **** 		if (((get_syscpreg(SYS_IO) >> 16) & 0x01) == 0){
 1569              		r0, [sp, #9]
 1570 07e8 E3A0000D 		.loc 4 175 0
 1571 07ec EBFFFFFE 		mov	r1, r5
 1572 07f0 E3100801 		mov	r0, #114
  89:main.c        **** 			function_sel = '3';
  90:main.c        **** 			start_app    = 1;
  91:main.c        **** 			device_id    = 0xA0;
  92:main.c        **** 		}
  93:main.c        **** 
  94:main.c        **** 		// main functions
  95:main.c        **** 		switch(function_sel){
  96:main.c        **** 
  97:main.c        **** 			// boot from RAM (start application)
  98:main.c        **** 			// +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
  99:main.c        **** 			case '0':
 100:main.c        **** 				io_uart0_send_byte((char)function_sel);
 101:main.c        **** 				start_app = 1;
 102:main.c        **** 				break;
 103:main.c        **** 
 104:main.c        **** 			// load ram via UART0
 105:main.c        **** 			// +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 106:main.c        **** 			case '1':
 107:main.c        **** 				io_uart0_send_byte((char)function_sel);
 108:main.c        **** 				uart0_printf("\r\n\r\nApplication will start automatically after download.\r\n-> Waiting for 's
 109:main.c        **** 				uart0_scanf(buffer,4,0); // get storm master boot record code
 110:main.c        **** 				if((buffer[0] == 'S') && (buffer[1] == 'M') && (buffer[2] == 'B') && (buffer[3] == 'R')){
 111:main.c        **** 					uart0_scanf(buffer,4,0); // get image size
 112:main.c        **** 					adr_buffer = qbytes_to_long(buffer);
 113:main.c        **** 					if (adr_buffer > RAM_SIZE-8){
 114:main.c        **** 						uart0_printf(" ERROR! Program file too big!\r\n\r\n");
 115:main.c        **** 						break;
 116:main.c        **** 					}
 117:main.c        **** 					data_pointer = 0;
 118:main.c        **** 					while(data_pointer != adr_buffer+4){
 119:main.c        **** 						uart0_scanf(buffer,4,0); // get word
 120:main.c        **** 						*data_pointer = qbytes_to_long(buffer); // store memory entry
 121:main.c        **** 						data_pointer = data_pointer + 1;
 122:main.c        **** 					}
 123:main.c        **** 	asm volatile ("nop");
 124:main.c        **** 	asm volatile ("nop");
 125:main.c        **** 	asm volatile ("nop");
 126:main.c        **** 
 127:main.c        **** 					start_app = 1;
 128:main.c        **** 				}
 129:main.c        **** 				else
 130:main.c        **** 					uart0_printf(" Invalid programming file!\r\n\r\nSelect: ");
 131:main.c        **** 				break;
 132:main.c        **** 
 133:main.c        **** 			// ram memory dump
 134:main.c        **** 			// +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 135:main.c        **** 			case '2':
 136:main.c        **** 				io_uart0_send_byte((char)function_sel);
 137:main.c        **** 				uart0_printf("\r\n\r\nAbort dumping by pressing any key.\r\nPress any key to continue.\r\n\r\n"
 138:main.c        **** 				while(io_uart0_read_byte() == -1);
 139:main.c        **** 				while(io_uart0_read_byte() != -1);
 140:main.c        **** 				data_pointer = 0;
 141:main.c        **** 				while(data_pointer != RAM_SIZE){
 142:main.c        **** 					word_buffer = *data_pointer;
 143:main.c        **** 					io_uart0_send_byte(word_buffer >> 24);
 144:main.c        **** 					io_uart0_send_byte(word_buffer >> 16);
 145:main.c        **** 					io_uart0_send_byte(word_buffer >>  8);
 146:main.c        **** 					io_uart0_send_byte(word_buffer >>  0);
 147:main.c        **** 					data_pointer++;
 148:main.c        **** 					if(io_uart0_read_byte() != -1){
 149:main.c        **** 						break;
 150:main.c        **** 						uart0_printf("\r\n\r\nAborted!");
 151:main.c        **** 					}
 152:main.c        **** 				}
 153:main.c        **** 				uart0_printf("\r\n\r\nDumping completed.\r\n\r\nSelect: ");
 154:main.c        **** 				break;
 155:main.c        **** 
 156:main.c        **** 			// boot from I²C EEPROM
 157:main.c        **** 			// +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 158:main.c        **** 			case '3':
 159:main.c        **** 				if(start_app == 0){
 160:main.c        **** 					io_uart0_send_byte((char)function_sel);
 161:main.c        **** 					uart0_printf("\r\n\r\nEnter device address (2x hex_chars, set LSB to '0'): ");
 162:main.c        **** 					uart0_scanf(buffer,2,1);
 163:main.c        **** 					device_id = (unsigned char)hex_string_to_long(buffer, 2);
 164:main.c        **** 					if(device_id == 0){
 165:main.c        **** 						uart0_printf(" Invalid address!\r\n\r\nSelect: ");
 1573              		r2, #3
 1574 07f4 03A06001 		str	r4, [sp, #0]
 1575              		bl	io_i2c0_byte_transfer
 1576 07f8 03A050A0 		.loc 4 176 0
 1577              		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 1578              		.loc 4 175 0
 1579 07fc 1A000035 		and	r0, r0, #255
 1580              		.loc 4 176 0
 1581              		cmp	r3, #83
 166:main.c        **** 						break;
 167:main.c        **** 					}
 168:main.c        **** 				}
 169:main.c        **** 
 170:main.c        **** 				uart0_printf("\r\nApplication will start automatically after upload.\r\n-> Loading boot image..
 171:main.c        **** 				cnt = 0;
 172:main.c        **** 				buffer[0] = (unsigned char)io_i2c0_byte_transfer('r',device_id,cnt++,2,0x00);
 1582              	75 0
 1583 0800 E3A04000 		strb	r0, [sp, #10]
 1584              		.loc 4 176 0
 1585              		bne	.L262
 1586 0804 E59F07A4 		ldrb	r3, [sp, #8]	@ zero_extendqisi2
 1587 0808 EBFFFFFE 		cmp	r3, #77
 1588              		beq	.L334
 1589              	.L262:
 1590 080c E1A01005 		.loc 4 195 0
 1591 0810 E1A02004 		ldr	r0, .L343+48
 1592 0814 E3A03002 		bl	uart0_printf
 1593 0818 E3A00072 		.loc 4 350 0
 1594 081c E58D4000 		cmp	r6, #0
 1595 0820 EBFFFFFE 		beq	.L224
 173:main.c        **** 				buffer[1] = (unsigned char)io_i2c0_byte_transfer('r',device_id,cnt++,2,0x00);
 1596              	:
 1597 0824 E1A01005 		.loc 4 356 0
 1598              		ldr	r0, .L343+52
 1599 0828 E5CD0007 	.LVL144:
 1600              		bl	uart0_printf
 1601 082c E3A02001 		.loc 4 357 0
 1602 0830 E3A03002 		mov	r1, #13
 1603 0834 E3A00072 		mov	r0, #0
 1604 0838 E58D4000 		bl	set_syscpreg
 1605 083c EBFFFFFE 		.loc 4 360 0
 174:main.c        **** 				buffer[2] = (unsigned char)io_i2c0_byte_transfer('r',device_id,cnt++,2,0x00);
 1606              	6
 1607 0840 E3A02002 		bl	get_syscpreg
 1608 0844 E1A03002 		mov	r1, #6
 1609              		bic	r0, r0, #8
 1610 0848 E5CD0008 		bl	set_syscpreg
 1611              		.loc 4 363 0
 1612 084c E1A01005 		mov pc, #0
 1613 0850 E3A00072 	.L303:
 1614 0854 E58D4000 		b	.L303
 1615 0858 EBFFFFFE 	.LVL145:
 175:main.c        **** 				buffer[3] = (unsigned char)io_i2c0_byte_transfer('r',device_id,cnt++,2,0x00);
 1616              	oc 4 95 0
 1617 085c E3A03002 		cmp	r4, #52
 1618              		beq	.L233
 1619 0860 E5CD0009 		bgt	.L239
 1620              		cmp	r4, #49
 1621 0864 E1A01005 		beq	.L230
 1622 0868 E3A00072 		ble	.L335
 1623 086c E3A02003 		cmp	r4, #50
 1624 0870 E58D4000 		beq	.L231
 1625 0874 EBFFFFFE 		cmp	r4, #51
 176:main.c        **** 				if((buffer[0] == 'S') && (buffer[1] == 'M') && (buffer[2] == 'B') && (buffer[3] == 'R')){
 1626              	
 1627 0878 E5DD3007 		.loc 4 160 0
 1628              		mov	r0, r4
 1629 087c E20000FF 		bl	io_uart0_send_byte
 1630              		.loc 4 161 0
 1631 0880 E3530053 		ldr	r0, .L343+56
 1632              		bl	uart0_printf
 1633 0884 E5CD000A 		.loc 4 162 0
 1634              		mov	r0, sl
 1635 0888 1A000002 		mov	r1, #2
 1636 088c E5DD3008 		mov	r2, #1
 1637 0890 E353004D 		bl	uart0_scanf
 1638 0894 0A000062 		.loc 4 163 0
 1639              		mov	r1, #2
 177:main.c        **** 					buffer[0] = (unsigned char)io_i2c0_byte_transfer('r',device_id,cnt++,2,0x00);
 178:main.c        **** 					buffer[1] = (unsigned char)io_i2c0_byte_transfer('r',device_id,cnt++,2,0x00);
 179:main.c        **** 					buffer[2] = (unsigned char)io_i2c0_byte_transfer('r',device_id,cnt++,2,0x00);
 180:main.c        **** 					buffer[3] = (unsigned char)io_i2c0_byte_transfer('r',device_id,cnt++,2,0x00);
 181:main.c        **** 					adr_buffer = qbytes_to_long(buffer);
 182:main.c        **** 					data_pointer = 0;
 183:main.c        **** 					while((data_pointer != adr_buffer+4) && (data_pointer < IRAM_SIZE)){
 184:main.c        **** 						buffer[0] = (unsigned char)io_i2c0_byte_transfer('r',device_id,cnt++,2,0x00);
 185:main.c        **** 						buffer[1] = (unsigned char)io_i2c0_byte_transfer('r',device_id,cnt++,2,0x00);
 186:main.c        **** 						buffer[2] = (unsigned char)io_i2c0_byte_transfer('r',device_id,cnt++,2,0x00);
 187:main.c        **** 						buffer[3] = (unsigned char)io_i2c0_byte_transfer('r',device_id,cnt++,2,0x00);
 188:main.c        **** 						*data_pointer = qbytes_to_long(buffer); // store memory entry
 189:main.c        **** 						data_pointer = data_pointer + 1;
 190:main.c        **** 					}
 191:main.c        **** 					uart0_printf(" Upload complete\r\n");
 192:main.c        **** 					start_app = 1;
 193:main.c        **** 				}
 194:main.c        **** 				else
 195:main.c        **** 					uart0_printf(" Invalid boot device or file!\r\n\r\nSelect: ");
 1640              	bl	hex_string_to_long
 1641 0898 E59F0714 		.loc 4 164 0
 1642 089c EBFFFFFE 		ands	r1, r0, #255
 196:main.c        **** 				break;
 197:main.c        **** 
 198:main.c        **** 			// program I²C EEPROM
 199:main.c        **** 			// +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 200:main.c        **** 			case '4':
 201:main.c        **** 				io_uart0_send_byte((char)function_sel);
 202:main.c        **** 				uart0_printf("\r\n\r\nEnter device address (2x hex_chars, set LSB to '0'): ");
 203:main.c        **** 				uart0_scanf(buffer,2,1);
 204:main.c        **** 				device_id = (unsigned char)hex_string_to_long(buffer, 2);
 205:main.c        **** 				if(device_id == 0){
 206:main.c        **** 					uart0_printf("\r\nInvalid address!\r\n\r\nSelect: ");
 207:main.c        **** 					break;
 208:main.c        **** 				}
 209:main.c        **** 
 210:main.c        **** 				uart0_printf("\r\nData will overwrite RAM content!\r\n-> Waiting for 'storm_program.bin' in byt
 211:main.c        **** 				uart0_scanf(buffer,4,0);
 212:main.c        **** 				if((buffer[0]=='S') && (buffer[1]=='M') && (buffer[2]=='B') && (buffer[3]=='R')){
 213:main.c        **** 					char_pointer = 0; // beginning of RAM
 214:main.c        **** 					*char_pointer++ = 'S'; asm volatile ("NOP");
 215:main.c        **** 					*char_pointer++ = 'M'; asm volatile ("NOP");
 216:main.c        **** 					*char_pointer++ = 'B'; asm volatile ("NOP");
 217:main.c        **** 					*char_pointer++ = 'R'; asm volatile ("NOP");
 218:main.c        **** 					uart0_scanf(buffer,4,0);
 219:main.c        **** 					*char_pointer++ = buffer[0];
 220:main.c        **** 					*char_pointer++ = buffer[1];
 221:main.c        **** 					*char_pointer++ = buffer[2];
 222:main.c        **** 					*char_pointer++ = buffer[3];
 223:main.c        **** 					cnt = qbytes_to_long(buffer);
 224:main.c        **** 					if(cnt > 0xFFFC){
 225:main.c        **** 						uart0_printf(" ERROR! Program file too big!\r\n\r\n");
 226:main.c        **** 						break;
 227:main.c        **** 					}
 228:main.c        **** 
 229:main.c        **** 					for(i=0; i<cnt+4; i++){
 230:main.c        **** 						data = -1;
 231:main.c        **** 						while(data == -1)
 232:main.c        **** 							data = io_uart0_read_byte();
 233:main.c        **** 						*char_pointer++ = (unsigned char)data;
 234:main.c        **** 					}
 235:main.c        **** 					uart0_printf(" Download completed\r\n");
 236:main.c        **** 
 237:main.c        **** 					uart0_printf("Writing buffer to i2c EEPROM...");
 238:main.c        **** 					char_pointer = 0; // beginning of RAM
 239:main.c        **** 					for(i=0; i<cnt+12; i++){
 240:main.c        **** 						char_tmp = *char_pointer++;
 241:main.c        **** 						while(io_i2c0_byte_transfer('w', device_id, i, 2, char_tmp) != 0);
 242:main.c        **** 					}
 243:main.c        **** 					uart0_printf(" Completed\r\n\r\n");
 244:main.c        **** 				}
 245:main.c        **** 				else
 246:main.c        **** 					uart0_printf(" Invalid boot device or file!\r\n\r\n");
 247:main.c        **** 				uart0_printf("Select: ");
 248:main.c        **** 				break;
 249:main.c        **** 
 250:main.c        **** 			// show content of I2C EEPROM
 251:main.c        **** 			// +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 252:main.c        **** 			case '5':
 253:main.c        **** 				io_uart0_send_byte((char)function_sel);
 254:main.c        **** 				uart0_printf("\r\n\r\nEnter device address (2 hex-chars, set LSB to '0'): ");
 255:main.c        **** 				uart0_scanf(buffer,2,1);
 256:main.c        **** 				device_id = (unsigned char)hex_string_to_long(buffer, 2);
 257:main.c        **** 				if(device_id == 0){
 258:main.c        **** 					uart0_printf(" Invalid address!\r\n\r\nSelect: ");
 259:main.c        **** 					break;
 260:main.c        **** 				}
 261:main.c        **** 				uart0_printf("\r\n\r\nAbort dumping by pressing any key. If no data is shown,\r\n");
 262:main.c        **** 				uart0_printf("the selected device is not responding. Press any key to continue.\r\n\r\n");
 263:main.c        **** 				while(io_uart0_read_byte() == -1);
 264:main.c        **** 				while(io_uart0_read_byte() != -1);
 265:main.c        **** 				for(i=0; i<0xFFFF; i++){
 266:main.c        **** 						data = -1;
 267:main.c        **** 						while(data < 0){
 268:main.c        **** 							data = io_i2c0_byte_transfer('r', device_id, i, 2, 0x00);
 269:main.c        **** 							if(io_uart0_read_byte() != -1){
 270:main.c        **** 								function_sel = 'X';
 271:main.c        **** 								break;
 272:main.c        **** 							}
 273:main.c        **** 						}
 274:main.c        **** 						if(function_sel == 'X'){
 275:main.c        **** 							uart0_printf("\r\n\r\nAborted!");
 276:main.c        **** 							break;
 277:main.c        **** 						}
 278:main.c        **** 						io_uart0_send_byte(data);
 279:main.c        **** 				}
 280:main.c        **** 				uart0_printf("\r\n\r\nDumping completed.\r\n\r\nSelect: ");
 281:main.c        **** 				break;
 282:main.c        **** 
 283:main.c        **** 			// Automatic boot configuration
 284:main.c        **** 			// +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 285:main.c        **** 			case 'a':
 286:main.c        **** 				io_uart0_send_byte((char)function_sel);
 287:main.c        **** 				uart0_printf("\r\n\r\nAutomatic boot configuration for power-up:\r\n");
 288:main.c        **** 				uart0_printf("[3210] configuration DIP switch\r\n 0000 - Start bootloader console\r\n 0001 - Au
 289:main.c        **** 				uart0_printf(" 0010 - Automatic boot from I2C EEPROM (Address 0xA0)\r\n\r\nSelect: ");
 290:main.c        **** 				break;
 291:main.c        **** 
 292:main.c        **** 			// Help screen
 293:main.c        **** 			// +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 294:main.c        **** 			case 'h':
 295:main.c        **** 				io_uart0_send_byte((char)function_sel);
 296:main.c        **** 				uart0_printf("\r\n\r\nSTORM SoC bootloader\r\n");
 297:main.c        **** 				uart0_printf("'0': Execute program in RAM.\r\n");
 298:main.c        **** 				uart0_printf("'1': Write 'storm_program.bin' to the core's RAM via UART.\r\n");
 299:main.c        **** 				uart0_printf("'2': Print current content of complete core RAM.\r\n");
 300:main.c        **** 				uart0_printf("'3': Load boot image from EEPROM and start application.\r\n");
 301:main.c        **** 				uart0_printf("'4': Write 'storm_program.bin' to I2C EEPROM via UART.\r\n");
 302:main.c        **** 				uart0_printf("'5': Print content of I2C EEPROM.\r\n");
 303:main.c        **** 				uart0_printf("'a': Show DIP switch configurations for automatic boot.\r\n");
 304:main.c        **** 				uart0_printf("'h': Show this screen.\r\n");
 305:main.c        **** 				uart0_printf("'r': Reset system.\r\n\r\n");
 306:main.c        **** 				uart0_printf("Boot EEPROM: 24xxnnn (like 24AA64), 7 bit address + dont-care bit,\r\n");
 307:main.c        **** 				uart0_printf("connected to I2C_CONTROLLER_0, operating frequency is 100kHz,\r\n");
 308:main.c        **** 				uart0_printf("maximum EEPROM size = 65536 byte => 16 bit addresses,\r\n");
 309:main.c        **** 				uart0_printf("fixed boot device address: 0xA0\r\n\r\n");
 310:main.c        **** 				uart0_printf("Terminal setup: 9600 baud, 8 data bits, no parity, 1 stop bit\r\n\r\n");
 311:main.c        **** 				uart0_printf("For more information see the STORM Core / STORM SoC datasheet\r\n");
 312:main.c        **** 				uart0_printf("http://opencores.org/project,storm_core\r\n");
 313:main.c        **** 				uart0_printf("http://opencores.org/project,storm_soc\r\n");
 314:main.c        **** 				uart0_printf("Contact: stnolting@googlemail.com\r\n");
 315:main.c        **** 				uart0_printf("(c) 2012 by Stephan Nolting\r\n\r\nSelect: ");
 316:main.c        **** 				break;
 317:main.c        **** 
 318:main.c        **** 			// back to the future
 319:main.c        **** 			// +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 320:main.c        **** 			case 'f':
 321:main.c        **** 				io_uart0_send_byte((char)function_sel);
 322:main.c        **** 				uart0_printf("\r\n\r\nWe'll send you back - to the future!.\r\n\r\n");
 323:main.c        **** 				uart0_printf(" - Doctor Emmet L. Brown\r\n\r\nSelect: ");
 324:main.c        **** 				break;
 325:main.c        **** 
 326:main.c        **** 			// restart system
 327:main.c        **** 			// +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 328:main.c        **** 			case 'r':
 329:main.c        **** 				io_uart0_send_byte((char)function_sel);
 330:main.c        **** 				asm volatile ("mov r0,     #0x0FF00000");
 331:main.c        **** 				asm volatile ("add pc, r0, #0xF0000000"); // jump to bootloader
 332:main.c        **** 				while(1);
 333:main.c        **** 				break;
 334:main.c        **** 
 335:main.c        **** 			// no input
 336:main.c        **** 			// +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 337:main.c        **** 			case -1:
 338:main.c        **** 				break;
 339:main.c        **** 
 340:main.c        **** 			// invalid selection
 341:main.c        **** 			// +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 342:main.c        **** 			default:
 343:main.c        **** 				io_uart0_send_byte((char)function_sel);
 344:main.c        **** 				uart0_printf(" Invalid operation!\r\nTry again: ");
 345:main.c        **** 				break;
 346:main.c        **** 
 347:main.c        **** 		}
 348:main.c        **** 
 349:main.c        **** 		// start application request
 350:main.c        **** 		if(start_app != 0)
 1643              	L146:
 1644 08a0 E3560000 		movne	r5, r1
 1645 08a4 0AFFFFCD 		movne	r6, #0
 1646              		bne	.L261
 1647              	.LVL147:
 351:main.c        **** 			break;
 352:main.c        **** 
 353:main.c        **** 	}
 354:main.c        **** 
 355:main.c        **** 	// start application
 356:main.c        **** 	uart0_printf("\r\n\r\n-> Starting application...\r\n\r\n");
 1648              	:
 1649 08a8 E59F0708 		.loc 4 258 0
 1650              		ldr	r0, .L343+60
 1651 08ac EBFFFFFE 		bl	uart0_printf
 357:main.c        **** 	set_syscpreg(0x00, SYS_IO);
 1652              	148:
 1653 08b0 E3A0100D 		b	.L224
 1654 08b4 E3A00000 	.LVL149:
 1655 08b8 EBFFFFFE 	.L332:
 358:main.c        **** 
 359:main.c        **** 	// disable write-through strategy
 360:main.c        **** 	set_syscpreg(get_syscpreg(SYS_CTRL_0) & ~(1<<DC_WTHRU), SYS_CTRL_0);
 1656              	c 4 58 0
 1657 08bc E3A00006 		mov	r4, #51
 1658 08c0 EBFFFFFE 		add	sl, sp, #7
 1659 08c4 E3A01006 		b	.L223
 1660 08c8 E3C00008 	.LVL150:
 1661 08cc EBFFFFFE 	.L239:
 361:main.c        **** 
 362:main.c        **** 	// jump to application
 363:main.c        **** 	asm volatile ("mov pc, #0");
 1662              	4 95 0
 1663 08d0 E3A0F000 		cmp	r4, #102
 1664              		beq	.L236
 1665 08d4 EAFFFFFE 		ble	.L336
 1666              		cmp	r4, #104
 1667              		beq	.L237
 1668              		cmp	r4, #114
 1669 08d8 E3540034 		bne	.L227
 1670 08dc 0A000028 		.loc 4 329 0
 1671 08e0 CA00001B 		mov	r0, r4
 1672 08e4 E3540031 		bl	io_uart0_send_byte
 1673 08e8 0A000035 		.loc 4 330 0
 1674 08ec DA000097 		mov r0,     #0x0FF00000
 1675 08f0 E3540032 		.loc 4 331 0
 1676 08f4 0A0000A1 		add pc, r0, #0xF0000000
 1677 08f8 E3540033 	.L302:
 1678 08fc 1A000097 		b	.L302
 1679              	.L233:
 1680 0900 E1A00004 		.loc 4 201 0
 1681 0904 EBFFFFFE 		mov	r0, r4
 1682              		bl	io_uart0_send_byte
 1683 0908 E59F06AC 		.loc 4 202 0
 1684 090c EBFFFFFE 		ldr	r0, .L343+56
 1685              		bl	uart0_printf
 1686 0910 E1A0000A 		.loc 4 203 0
 1687 0914 E3A01002 		mov	r0, sl
 1688 0918 E3A02001 		mov	r1, #2
 1689 091c EBFFFFFE 		mov	r2, #1
 1690              		bl	uart0_scanf
 1691 0920 E3A01002 		.loc 4 204 0
 1692 0924 E1A0000A 		mov	r0, sl
 1693 0928 EBFFFFFE 		mov	r1, #2
 1694              		bl	hex_string_to_long
 1695 092c E21010FF 		.loc 4 205 0
 1696              		ands	r8, r0, #255
 1697 0930 11A05001 		bne	.L271
 1698 0934 13A06000 		.loc 4 206 0
 1699 0938 1AFFFFB0 		ldr	r0, .L343+64
 1700              		bl	uart0_printf
 1701              		b	.L224
 1702              	.L230:
 1703 093c E59F067C 		.loc 4 107 0
 1704 0940 EBFFFFFE 		mov	r0, r4
 1705              		bl	io_uart0_send_byte
 1706 0944 EAFFFFA5 		.loc 4 108 0
 1707              		ldr	r0, .L343+68
 1708              		bl	uart0_printf
 1709              		.loc 4 109 0
 1710 0948 E3A04033 		mov	r0, sl
 1711 094c E28DA007 		mov	r1, #4
 1712 0950 EAFFFFA4 		mov	r2, #0
 1713              		bl	uart0_scanf
 1714              		.loc 4 110 0
 1715              		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 1716 0954 E3540066 		cmp	r3, #83
 1717 0958 0A00002A 		bne	.L243
 1718 095c DA0000A5 		ldrb	r3, [sp, #8]	@ zero_extendqisi2
 1719 0960 E3540068 		cmp	r3, #77
 1720 0964 0A000107 		beq	.L337
 1721 0968 E3540072 	.L243:
 1722 096c 1A00007B 		.loc 4 130 0
 1723              		ldr	r0, .L343+72
 1724 0970 E1A00004 		bl	uart0_printf
 1725 0974 EBFFFFFE 		b	.L224
 1726              	.L236:
 1727 0978 E3A006FF 		.loc 4 321 0
 1728              		mov	r0, r4
 1729 097c E280F20F 		bl	io_uart0_send_byte
 1730              		.loc 4 322 0
 1731 0980 EAFFFFFE 		ldr	r0, .L343+76
 1732              		bl	uart0_printf
 1733              		.loc 4 323 0
 1734 0984 E1A00004 		ldr	r0, .L343+80
 1735 0988 EBFFFFFE 		bl	uart0_printf
 1736              		b	.L224
 1737 098c E59F0628 	.LVL151:
 1738 0990 EBFFFFFE 	.L334:
 1739              		.loc 4 176 0
 1740 0994 E1A0000A 		ldrb	r3, [sp, #9]	@ zero_extendqisi2
 1741 0998 E3A01002 		cmp	r3, #66
 1742 099c E3A02001 		bne	.L262
 1743 09a0 EBFFFFFE 		cmp	r0, #82
 1744              		bne	.L262
 1745 09a4 E1A0000A 		.loc 4 177 0
 1746 09a8 E3A01002 		mov	r1, r5
 1747 09ac EBFFFFFE 		mov	r2, #4
 1748              		sub	r3, r3, #64
 1749 09b0 E21080FF 		add	r0, r0, #32
 1750 09b4 1A00009C 		str	r4, [sp, #0]
 1751              		bl	io_i2c0_byte_transfer
 1752 09b8 E59F0604 		.loc 4 178 0
 1753 09bc EBFFFFFE 		mov	r1, r5
 1754 09c0 EAFFFF86 		.loc 4 177 0
 1755              		strb	r0, [sp, #7]
 1756              		.loc 4 178 0
 1757 09c4 E1A00004 		mov	r2, #5
 1758 09c8 EBFFFFFE 		mov	r3, #2
 1759              		mov	r0, #114
 1760 09cc E59F05F4 		str	r4, [sp, #0]
 1761 09d0 EBFFFFFE 		bl	io_i2c0_byte_transfer
 1762              		.loc 4 179 0
 1763 09d4 E1A0000A 		mov	r1, r5
 1764 09d8 E3A01004 		.loc 4 178 0
 1765 09dc E3A02000 		strb	r0, [sp, #8]
 1766 09e0 EBFFFFFE 		.loc 4 179 0
 1767              		mov	r2, #6
 1768 09e4 E5DD3007 		mov	r3, #2
 1769 09e8 E3530053 		mov	r0, #114
 1770 09ec 1A000002 		str	r4, [sp, #0]
 1771 09f0 E5DD3008 		bl	io_i2c0_byte_transfer
 1772 09f4 E353004D 		.loc 4 180 0
 1773 09f8 0A00010D 		mov	r1, r5
 1774              		.loc 4 179 0
 1775              		strb	r0, [sp, #9]
 1776 09fc E59F05C8 		.loc 4 180 0
 1777 0a00 EBFFFFFE 		mov	r2, #7
 1778 0a04 EAFFFF75 		mov	r3, #2
 1779              		mov	r0, #114
 1780              		str	r4, [sp, #0]
 1781 0a08 E1A00004 		bl	io_i2c0_byte_transfer
 1782 0a0c EBFFFFFE 		strb	r0, [sp, #10]
 1783              		.loc 4 181 0
 1784 0a10 E59F05B8 		mov	r0, sl
 1785 0a14 EBFFFFFE 		bl	qbytes_to_long
 1786              		.loc 4 183 0
 1787 0a18 E59F05B4 		adds	r7, r0, #4
 1788 0a1c EBFFFFFE 		beq	.L267
 1789 0a20 EAFFFF6E 	.LVL152:
 1790              		mov	r6, r4
 1791              	.LVL153:
 1792              	.LVL154:
 1793 0a24 E5DD3009 	.L269:
 1794 0a28 E3530042 		.loc 4 184 0
 1795 0a2c 1AFFFF99 		add	r2, r4, #8
 1796 0a30 E3500052 		mov	r1, r5
 1797 0a34 1AFFFF97 		mov	r3, #2
 1798              		mov	r0, #114
 1799 0a38 E1A01005 		str	r6, [sp, #0]
 1800 0a3c E3A02004 		bl	io_i2c0_byte_transfer
 1801 0a40 E2433040 		.loc 4 185 0
 1802 0a44 E2800020 		add	r2, r4, #9
 1803 0a48 E58D4000 		.loc 4 184 0
 1804 0a4c EBFFFFFE 		strb	r0, [sp, #7]
 1805              		.loc 4 185 0
 1806 0a50 E1A01005 		mov	r1, r5
 1807              		mov	r3, #2
 1808 0a54 E5CD0007 		mov	r0, #114
 1809              		str	r6, [sp, #0]
 1810 0a58 E3A02005 		bl	io_i2c0_byte_transfer
 1811 0a5c E3A03002 		.loc 4 186 0
 1812 0a60 E3A00072 		add	r2, r4, #10
 1813 0a64 E58D4000 		.loc 4 185 0
 1814 0a68 EBFFFFFE 		strb	r0, [sp, #8]
 1815              		.loc 4 186 0
 1816 0a6c E1A01005 		mov	r1, r5
 1817              		mov	r3, #2
 1818 0a70 E5CD0008 		mov	r0, #114
 1819              		str	r6, [sp, #0]
 1820 0a74 E3A02006 		bl	io_i2c0_byte_transfer
 1821 0a78 E3A03002 		.loc 4 187 0
 1822 0a7c E3A00072 		add	r2, r4, #11
 1823 0a80 E58D4000 		.loc 4 186 0
 1824 0a84 EBFFFFFE 		strb	r0, [sp, #9]
 1825              		.loc 4 187 0
 1826 0a88 E1A01005 		mov	r1, r5
 1827              		mov	r3, #2
 1828 0a8c E5CD0009 		mov	r0, #114
 1829              		str	r6, [sp, #0]
 1830 0a90 E3A02007 		bl	io_i2c0_byte_transfer
 1831 0a94 E3A03002 		strb	r0, [sp, #10]
 1832 0a98 E3A00072 		.loc 4 188 0
 1833 0a9c E58D4000 		mov	r0, sl
 1834 0aa0 EBFFFFFE 		bl	qbytes_to_long
 1835 0aa4 E5CD000A 		str	r0, [r4], #4
 1836              		.loc 4 183 0
 1837 0aa8 E1A0000A 		cmp	r4, r7
 1838 0aac EBFFFFFE 		cmpne	r4, #32768
 1839              		bcc	.L269
 1840 0ab0 E2907004 	.LVL155:
 1841 0ab4 0A000022 	.L267:
 1842              		.loc 4 191 0
 1843 0ab8 E1A06004 		ldr	r0, .L343+84
 1844              		bl	uart0_printf
 1845              		b	.L242
 1846              	.LVL156:
 1847              	.L335:
 1848 0abc E2842008 		.loc 4 95 0
 1849 0ac0 E1A01005 		cmn	r4, #1
 1850 0ac4 E3A03002 		beq	.L224
 1851 0ac8 E3A00072 		cmp	r4, #48
 1852 0acc E58D6000 		beq	.L338
 1853 0ad0 EBFFFFFE 	.L227:
 1854              		.loc 4 343 0
 1855 0ad4 E2842009 		and	r0, r4, #255
 1856              		bl	io_uart0_send_byte
 1857 0ad8 E5CD0007 		.loc 4 344 0
 1858              		ldr	r0, .L343+88
 1859 0adc E1A01005 		bl	uart0_printf
 1860 0ae0 E3A03002 		b	.L224
 1861 0ae4 E3A00072 	.L338:
 1862 0ae8 E58D6000 		.loc 4 100 0
 1863 0aec EBFFFFFE 		mov	r0, r4
 1864              		bl	io_uart0_send_byte
 1865 0af0 E284200A 		b	.L242
 1866              	.L231:
 1867 0af4 E5CD0008 		.loc 4 136 0
 1868              		mov	r0, r4
 1869 0af8 E1A01005 		bl	io_uart0_send_byte
 1870 0afc E3A03002 		.loc 4 137 0
 1871 0b00 E3A00072 		ldr	r0, .L343+92
 1872 0b04 E58D6000 		bl	uart0_printf
 1873 0b08 EBFFFFFE 	.L253:
 1874              		.loc 4 138 0
 1875 0b0c E284200B 		bl	io_uart0_read_byte
 1876              		cmn	r0, #1
 1877 0b10 E5CD0009 		beq	.L253
 1878              	.L310:
 1879 0b14 E1A01005 		.loc 4 139 0
 1880 0b18 E3A03002 		bl	io_uart0_read_byte
 1881 0b1c E3A00072 		cmn	r0, #1
 1882 0b20 E58D6000 		bne	.L310
 1883 0b24 EBFFFFFE 		mov	r5, #0
 1884 0b28 E5CD000A 	.LVL157:
 1885              		b	.L256
 1886 0b2c E1A0000A 	.LVL158:
 1887 0b30 EBFFFFFE 	.L339:
 1888 0b34 E4840004 		.loc 4 141 0
 1889              		cmp	r5, #32768
 1890 0b38 E1540007 		beq	.L301
 1891 0b3c 13540902 	.LVL159:
 1892 0b40 3AFFFFDD 	.L256:
 1893              		.loc 4 142 0
 1894              		ldr	r4, [r5, #0]
 1895              	.LVL160:
 1896 0b44 E59F048C 		.loc 4 143 0
 1897 0b48 EBFFFFFE 		mov	r0, r4, lsr #24
 1898 0b4c EAFFFF55 		bl	io_uart0_send_byte
 1899              		.loc 4 144 0
 1900              		mov	r0, r4, lsr #16
 1901              		bl	io_uart0_send_byte
 1902 0b50 E3740001 		.loc 4 145 0
 1903 0b54 0AFFFF21 		mov	r0, r4, lsr #8
 1904 0b58 E3540030 		bl	io_uart0_send_byte
 1905 0b5c 0A000004 		.loc 4 146 0
 1906              		mov	r0, r4
 1907              		bl	io_uart0_send_byte
 1908 0b60 E20400FF 		.loc 4 148 0
 1909 0b64 EBFFFFFE 		bl	io_uart0_read_byte
 1910              		cmn	r0, #1
 1911 0b68 E59F046C 		.loc 4 147 0
 1912 0b6c EBFFFFFE 		add	r5, r5, #4
 1913 0b70 EAFFFF1A 		.loc 4 148 0
 1914              		beq	.L339
 1915              	.LVL161:
 1916 0b74 E1A00004 	.L301:
 1917 0b78 EBFFFFFE 		.loc 4 280 0
 1918 0b7c EAFFFF49 		ldr	r0, .L343+96
 1919              		bl	uart0_printf
 1920              		b	.L224
 1921 0b80 E1A00004 	.LVL162:
 1922 0b84 EBFFFFFE 	.L336:
 1923              		.loc 4 95 0
 1924 0b88 E59F0450 		cmp	r4, #53
 1925 0b8c EBFFFFFE 		beq	.L234
 1926              		cmp	r4, #97
 1927              		bne	.L227
 1928 0b90 EBFFFFFE 		.loc 4 286 0
 1929 0b94 E3700001 		mov	r0, r4
 1930 0b98 0AFFFFFC 		bl	io_uart0_send_byte
 1931              		.loc 4 287 0
 1932              		ldr	r0, .L343+100
 1933 0b9c EBFFFFFE 		bl	uart0_printf
 1934 0ba0 E3700001 		.loc 4 288 0
 1935 0ba4 1AFFFFFC 		ldr	r0, .L343+104
 1936 0ba8 E3A05000 		bl	uart0_printf
 1937              		.loc 4 289 0
 1938 0bac EA000001 		ldr	r0, .L343+108
 1939              		bl	uart0_printf
 1940              		b	.L224
 1941              	.L271:
 1942 0bb0 E3550902 		.loc 4 210 0
 1943 0bb4 0A00000C 		ldr	r0, .L343+112
 1944              		bl	uart0_printf
 1945              		.loc 4 211 0
 1946              		mov	r0, sl
 1947 0bb8 E5954000 		mov	r1, #4
 1948              		mov	r2, #0
 1949              		bl	uart0_scanf
 1950 0bbc E1A00C24 		.loc 4 212 0
 1951 0bc0 EBFFFFFE 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 1952              		cmp	r3, #83
 1953 0bc4 E1A00824 		bne	.L273
 1954 0bc8 EBFFFFFE 		ldrb	r2, [sp, #8]	@ zero_extendqisi2
 1955              		cmp	r2, #77
 1956 0bcc E1A00424 		beq	.L340
 1957 0bd0 EBFFFFFE 	.L273:
 1958              		.loc 4 246 0
 1959 0bd4 E1A00004 		ldr	r0, .L343+116
 1960 0bd8 EBFFFFFE 		bl	uart0_printf
 1961              	.LVL163:
 1962 0bdc EBFFFFFE 	.L290:
 1963 0be0 E3700001 		.loc 4 247 0
 1964              		ldr	r0, .L343+120
 1965 0be4 E2855004 		bl	uart0_printf
 1966              		b	.L224
 1967 0be8 0AFFFFF0 	.LVL164:
 1968              	.L340:
 1969              		.loc 4 212 0
 1970              		ldrb	r1, [sp, #9]	@ zero_extendqisi2
 1971 0bec E59F03F0 		cmp	r1, #66
 1972 0bf0 EBFFFFFE 		bne	.L273
 1973 0bf4 EAFFFEF9 		ldrb	r0, [sp, #10]	@ zero_extendqisi2
 1974              		cmp	r0, #82
 1975              		bne	.L273
 1976              		.loc 4 214 0
 1977 0bf8 E3540035 		mov	r4, #0
 1978 0bfc 0A0000AC 	.LVL165:
 1979 0c00 E3540061 		strb	r3, [r4, #0]
 1980 0c04 1AFFFFD5 		NOP
 1981              		.loc 4 215 0
 1982 0c08 E1A00004 		strb	r2, [r4, #1]
 1983 0c0c EBFFFFFE 		NOP
 1984              		.loc 4 216 0
 1985 0c10 E59F03D0 		strb	r1, [r4, #2]
 1986 0c14 EBFFFFFE 		NOP
 1987              		.loc 4 217 0
 1988 0c18 E59F03CC 		strb	r0, [r4, #3]
 1989 0c1c EBFFFFFE 		NOP
 1990              		.loc 4 218 0
 1991 0c20 E59F03C8 		sub	r1, r1, #62
 1992 0c24 EBFFFFFE 		mov	r0, sl
 1993 0c28 EAFFFEEC 		mov	r2, r4
 1994              		bl	uart0_scanf
 1995              		.loc 4 219 0
 1996 0c2c E59F03C0 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 1997 0c30 EBFFFFFE 		strb	r3, [r4, #4]
 1998              		.loc 4 220 0
 1999 0c34 E1A0000A 		ldrb	r2, [sp, #8]	@ zero_extendqisi2
 2000 0c38 E3A01004 		strb	r2, [r4, #5]
 2001 0c3c E3A02000 		.loc 4 221 0
 2002 0c40 EBFFFFFE 		ldrb	r3, [sp, #9]	@ zero_extendqisi2
 2003              		strb	r3, [r4, #6]
 2004 0c44 E5DD3007 		.loc 4 222 0
 2005 0c48 E3530053 		ldrb	r2, [sp, #10]	@ zero_extendqisi2
 2006 0c4c 1A000002 		.loc 4 223 0
 2007 0c50 E5DD2008 		mov	r0, sl
 2008 0c54 E352004D 		.loc 4 222 0
 2009 0c58 0A000004 		strb	r2, [r4, #7]
 2010              		.loc 4 223 0
 2011              		bl	qbytes_to_long
 2012 0c5c E59F0394 		.loc 4 224 0
 2013 0c60 EBFFFFFE 		mov	r3, #65280
 2014              		add	r3, r3, #252
 2015              	.LVL166:
 2016              		cmp	r0, r3
 2017 0c64 E59F0390 	.LVL167:
 2018 0c68 EBFFFFFE 		.loc 4 223 0
 2019 0c6c EAFFFEDB 		mov	r5, r0
 2020              	.LVL168:
 2021              		.loc 4 224 0
 2022              		bhi	.L278
 2023 0c70 E5DD1009 		.loc 4 229 0
 2024 0c74 E3510042 		cmn	r0, #4
 2025 0c78 1AFFFFF7 	.LVL169:
 2026 0c7c E5DD000A 		addne	r4, r4, #8
 2027 0c80 E3500052 		addne	r6, r0, #11
 2028 0c84 1AFFFFF4 	.LVL170:
 2029              		beq	.L280
 2030 0c88 E3A04000 	.LVL171:
 2031              	.L330:
 2032 0c8c E5C43000 		.loc 4 232 0
 2033 0c90 E1A00000 		bl	io_uart0_read_byte
 2034              	.LVL172:
 2035 0c94 E5C42001 	.LVL173:
 2036 0c98 E1A00000 		.loc 4 231 0
 2037              		cmn	r0, #1
 2038 0c9c E5C41002 		beq	.L330
 2039 0ca0 E1A00000 		.loc 4 229 0
 2040              		cmp	r6, r4
 2041 0ca4 E5C40003 	.LVL174:
 2042 0ca8 E1A00000 		.loc 4 233 0
 2043              		strb	r0, [r4, #0]
 2044 0cac E241103E 		add	r4, r4, #1
 2045 0cb0 E1A0000A 		.loc 4 229 0
 2046 0cb4 E1A02004 		bne	.L330
 2047 0cb8 EBFFFFFE 	.LVL175:
 2048              	.L280:
 2049 0cbc E5DD3007 		.loc 4 235 0
 2050 0cc0 E5C43004 		ldr	r0, .L343+124
 2051              	.LVL176:
 2052 0cc4 E5DD2008 		bl	uart0_printf
 2053 0cc8 E5C42005 		.loc 4 237 0
 2054              		ldr	r0, .L343+128
 2055 0ccc E5DD3009 		bl	uart0_printf
 2056 0cd0 E5C43006 		.loc 4 239 0
 2057              		cmn	r5, #12
 2058 0cd4 E5DD200A 		beq	.L285
 2059              		mov	r4, #0
 2060 0cd8 E1A0000A 	.LVL177:
 2061              		add	r7, r5, #12
 2062 0cdc E5C42007 		mov	r6, r4
 2063              	.L287:
 2064 0ce0 EBFFFFFE 		ldrb	r5, [r4, #0]	@ zero_extendqisi2
 2065              	.LVL178:
 2066 0ce4 E3A03CFF 	.L288:
 2067 0ce8 E28330FC 		.loc 4 241 0
 2068              		mov	r0, #119
 2069 0cec E1500003 		mov	r1, r8
 2070              		mov	r2, r6
 2071              		mov	r3, #2
 2072 0cf0 E1A05000 		str	r5, [sp, #0]
 2073              		bl	io_i2c0_byte_transfer
 2074              		cmp	r0, #0
 2075 0cf4 8A000098 		bne	.L288
 2076              		.loc 4 239 0
 2077 0cf8 E3700004 		add	r4, r4, #1
 2078              		cmp	r4, r7
 2079 0cfc 12844008 		mov	r6, r4
 2080 0d00 1280600B 		bne	.L287
 2081              	.LVL179:
 2082 0d04 0A000006 	.L285:
 2083              		.loc 4 243 0
 2084              		ldr	r0, .L343+132
 2085              		bl	uart0_printf
 2086 0d08 EBFFFFFE 		b	.L290
 2087              	.LVL180:
 2088              	.L237:
 2089              		.loc 4 295 0
 2090 0d0c E3700001 		mov	r0, r4
 2091 0d10 0AFFFFFC 		bl	io_uart0_send_byte
 2092              		.loc 4 296 0
 2093 0d14 E1560004 		ldr	r0, .L343+136
 2094              		bl	uart0_printf
 2095              		.loc 4 297 0
 2096 0d18 E5C40000 		ldr	r0, .L343+140
 2097 0d1c E2844001 		bl	uart0_printf
 2098              		.loc 4 298 0
 2099 0d20 1AFFFFF8 		ldr	r0, .L343+144
 2100              		bl	uart0_printf
 2101              		.loc 4 299 0
 2102              		ldr	r0, .L343+148
 2103 0d24 E59F02D4 		bl	uart0_printf
 2104              		.loc 4 300 0
 2105 0d28 EBFFFFFE 		ldr	r0, .L343+152
 2106              		bl	uart0_printf
 2107 0d2c E59F02D0 		.loc 4 301 0
 2108 0d30 EBFFFFFE 		ldr	r0, .L343+156
 2109              		bl	uart0_printf
 2110 0d34 E375000C 		.loc 4 302 0
 2111 0d38 0A00000F 		ldr	r0, .L343+160
 2112 0d3c E3A04000 		bl	uart0_printf
 2113              		.loc 4 303 0
 2114 0d40 E285700C 		ldr	r0, .L343+164
 2115 0d44 E1A06004 		bl	uart0_printf
 2116              		.loc 4 304 0
 2117 0d48 E5D45000 		ldr	r0, .L343+168
 2118              		bl	uart0_printf
 2119              		.loc 4 305 0
 2120              		ldr	r0, .L343+172
 2121 0d4c E3A00077 		bl	uart0_printf
 2122 0d50 E1A01008 		.loc 4 306 0
 2123 0d54 E1A02006 		ldr	r0, .L343+176
 2124 0d58 E3A03002 		bl	uart0_printf
 2125 0d5c E58D5000 		.loc 4 307 0
 2126 0d60 EBFFFFFE 		ldr	r0, .L343+180
 2127 0d64 E3500000 		bl	uart0_printf
 2128 0d68 1AFFFFF7 		.loc 4 308 0
 2129              		ldr	r0, .L343+184
 2130 0d6c E2844001 		bl	uart0_printf
 2131 0d70 E1540007 		.loc 4 309 0
 2132 0d74 E1A06004 		ldr	r0, .L343+188
 2133 0d78 1AFFFFF2 		bl	uart0_printf
 2134              		.loc 4 310 0
 2135              		ldr	r0, .L343+192
 2136              		bl	uart0_printf
 2137 0d7c E59F0284 		.loc 4 311 0
 2138 0d80 EBFFFFFE 		ldr	r0, .L343+196
 2139 0d84 EAFFFFB6 		bl	uart0_printf
 2140              		.loc 4 312 0
 2141              		ldr	r0, .L343+200
 2142              		bl	uart0_printf
 2143 0d88 E1A00004 		.loc 4 313 0
 2144 0d8c EBFFFFFE 		ldr	r0, .L343+204
 2145              		bl	uart0_printf
 2146 0d90 E59F0274 		.loc 4 314 0
 2147 0d94 EBFFFFFE 		ldr	r0, .L343+208
 2148              		bl	uart0_printf
 2149 0d98 E59F0270 		.loc 4 315 0
 2150 0d9c EBFFFFFE 		ldr	r0, .L343+212
 2151              		bl	uart0_printf
 2152 0da0 E59F026C 		b	.L224
 2153 0da4 EBFFFFFE 	.L337:
 2154              		.loc 4 110 0
 2155 0da8 E59F0268 		ldrb	r3, [sp, #9]	@ zero_extendqisi2
 2156 0dac EBFFFFFE 		cmp	r3, #66
 2157              		bne	.L243
 2158 0db0 E59F0264 		ldrb	r3, [sp, #10]	@ zero_extendqisi2
 2159 0db4 EBFFFFFE 		cmp	r3, #82
 2160              		bne	.L243
 2161 0db8 E59F0260 		.loc 4 111 0
 2162 0dbc EBFFFFFE 		mov	r1, #4
 2163              		mov	r2, #0
 2164 0dc0 E59F025C 		mov	r0, sl
 2165 0dc4 EBFFFFFE 		bl	uart0_scanf
 2166              		.loc 4 112 0
 2167 0dc8 E59F0258 		mov	r0, sl
 2168 0dcc EBFFFFFE 		bl	qbytes_to_long
 2169              		.loc 4 113 0
 2170 0dd0 E59F0254 		mov	r3, #32512
 2171 0dd4 EBFFFFFE 		add	r3, r3, #248
 2172              	.LVL181:
 2173 0dd8 E59F0250 		cmp	r0, r3
 2174 0ddc EBFFFFFE 		bhi	.L278
 2175              		.loc 4 118 0
 2176 0de0 E59F024C 		adds	r5, r0, #4
 2177 0de4 EBFFFFFE 		beq	.L251
 2178              		.loc 4 115 0
 2179 0de8 E59F0248 		mov	r4, #0
 2180 0dec EBFFFFFE 	.LVL182:
 2181              	.L252:
 2182 0df0 E59F0244 		.loc 4 119 0
 2183 0df4 EBFFFFFE 		mov	r1, #4
 2184              		mov	r2, #0
 2185 0df8 E59F0240 		mov	r0, sl
 2186 0dfc EBFFFFFE 	.LVL183:
 2187              		bl	uart0_scanf
 2188 0e00 E59F023C 		.loc 4 120 0
 2189 0e04 EBFFFFFE 		mov	r0, sl
 2190              		bl	qbytes_to_long
 2191 0e08 E59F0238 		str	r0, [r4], #4
 2192 0e0c EBFFFFFE 		.loc 4 118 0
 2193              		cmp	r5, r4
 2194 0e10 E59F0234 		bne	.L252
 2195 0e14 EBFFFFFE 	.LVL184:
 2196              	.L251:
 2197 0e18 E59F0230 		.loc 4 123 0
 2198 0e1c EBFFFFFE 		nop
 2199              		.loc 4 124 0
 2200 0e20 E59F022C 		nop
 2201 0e24 EBFFFFFE 		.loc 4 125 0
 2202              		nop
 2203 0e28 E59F0228 		b	.L242
 2204 0e2c EBFFFFFE 	.LVL185:
 2205 0e30 EAFFFE6A 	.L234:
 2206              		.loc 4 253 0
 2207              		mov	r0, r4
 2208 0e34 E5DD3009 		bl	io_uart0_send_byte
 2209 0e38 E3530042 		.loc 4 254 0
 2210 0e3c 1AFFFEEE 		ldr	r0, .L343+216
 2211 0e40 E5DD300A 		bl	uart0_printf
 2212 0e44 E3530052 		.loc 4 255 0
 2213 0e48 1AFFFEEB 		mov	r0, sl
 2214              		mov	r1, #2
 2215 0e4c E3A01004 		mov	r2, #1
 2216 0e50 E3A02000 		bl	uart0_scanf
 2217 0e54 E1A0000A 		.loc 4 256 0
 2218 0e58 EBFFFFFE 		mov	r0, sl
 2219              		mov	r1, #2
 2220 0e5c E1A0000A 		bl	hex_string_to_long
 2221 0e60 EBFFFFFE 		.loc 4 257 0
 2222              		ands	r6, r0, #255
 2223 0e64 E3A03C7F 	.LVL186:
 2224 0e68 E28330F8 		beq	.L329
 2225              		.loc 4 261 0
 2226 0e6c E1500003 		ldr	r0, .L343+220
 2227 0e70 8A000039 		bl	uart0_printf
 2228              		.loc 4 262 0
 2229 0e74 E2905004 		ldr	r0, .L343+224
 2230 0e78 0A000009 		bl	uart0_printf
 2231              	.L293:
 2232 0e7c E3A04000 		.loc 4 263 0
 2233              		bl	io_uart0_read_byte
 2234              		cmn	r0, #1
 2235              		beq	.L293
 2236 0e80 E3A01004 	.L311:
 2237 0e84 E3A02000 		.loc 4 264 0
 2238 0e88 E1A0000A 		bl	io_uart0_read_byte
 2239              		cmn	r0, #1
 2240 0e8c EBFFFFFE 		bne	.L311
 2241              		.loc 4 364 0
 2242 0e90 E1A0000A 		mov	r5, #0
 2243 0e94 EBFFFFFE 	.LVL187:
 2244 0e98 E4840004 		b	.L331
 2245              	.LVL188:
 2246 0e9c E1550004 	.L342:
 2247 0ea0 1AFFFFF6 		.loc 4 267 0
 2248              		cmp	r4, #0
 2249              		bge	.L341
 2250              	.LVL189:
 2251 0ea4 E1A00000 	.L331:
 2252              		.loc 4 268 0
 2253 0ea8 E1A00000 		mov	ip, #0
 2254              		mov	r2, r5
 2255 0eac E1A00000 		mov	r1, r6
 2256 0eb0 EAFFFE7C 		mov	r3, #2
 2257              		mov	r0, #114
 2258              		str	ip, [sp, #0]
 2259              		bl	io_i2c0_byte_transfer
 2260 0eb4 E1A00004 		mov	r4, r0
 2261 0eb8 EBFFFFFE 	.LVL190:
 2262              		.loc 4 269 0
 2263 0ebc E59F0198 		bl	io_uart0_read_byte
 2264 0ec0 EBFFFFFE 		cmn	r0, #1
 2265              		.loc 4 278 0
 2266 0ec4 E1A0000A 		mov	r0, r4
 2267 0ec8 E3A01002 		.loc 4 269 0
 2268 0ecc E3A02001 		beq	.L342
 2269 0ed0 EBFFFFFE 	.LVL191:
 2270              		.loc 4 275 0
 2271 0ed4 E1A0000A 		ldr	r0, .L343+228
 2272 0ed8 E3A01002 	.LVL192:
 2273 0edc EBFFFFFE 		bl	uart0_printf
 2274              		b	.L301
 2275 0ee0 E21060FF 	.LVL193:
 2276              	.L278:
 2277 0ee4 0AFFFE94 		.loc 4 225 0
 2278              		ldr	r0, .L343+232
 2279 0ee8 E59F0170 	.LVL194:
 2280 0eec EBFFFFFE 		bl	uart0_printf
 2281              		b	.L224
 2282 0ef0 E59F016C 	.LVL195:
 2283 0ef4 EBFFFFFE 	.L341:
 2284              		.loc 4 278 0
 2285              		bl	io_uart0_send_byte
 2286 0ef8 EBFFFFFE 		.loc 4 265 0
 2287 0efc E3700001 		mov	r3, #65536
 2288 0f00 0AFFFFFC 		add	r5, r5, #1
 2289              		sub	r3, r3, #1
 2290              		cmp	r5, r3
 2291 0f04 EBFFFFFE 		bne	.L331
 2292 0f08 E3700001 		b	.L301
 2293 0f0c 1AFFFFFC 	.L344:
 364:main.c        **** 	while(1);
 2294              	5
 2295 0f10 E3A05000 		.word	.LC6
 2296              		.word	.LC7
 2297 0f14 EA000001 		.word	.LC8
 2298              		.word	.LC9
 2299              		.word	.LC10
 2300              		.word	.LC11
 2301 0f18 E3540000 		.word	.LC19
 2302 0f1c AA000011 		.word	.LC21
 2303              		.word	.LC58
 2304              		.word	.LC17
 2305              		.word	.LC18
 2306 0f20 E3A0C000 		.word	.LC22
 2307 0f24 E1A02005 		.word	.LC12
 2308 0f28 E1A01006 		.word	.LC14
 2309 0f2c E3A03002 		.word	.LC55
 2310 0f30 E3A00072 		.word	.LC56
 2311 0f34 E58DC000 		.word	.LC20
 2312 0f38 EBFFFFFE 		.word	.LC57
 2313 0f3c E1A04000 		.word	.LC15
 2314              		.word	.LC16
 2315              		.word	.LC32
 2316 0f40 EBFFFFFE 		.word	.LC33
 2317 0f44 E3700001 		.word	.LC34
 2318              		.word	.LC23
 2319 0f48 E1A00004 		.word	.LC27
 2320              		.word	.LC28
 2321 0f4c 0AFFFFF1 		.word	.LC24
 2322              		.word	.LC25
 2323              		.word	.LC26
 2324 0f50 E59F0110 		.word	.LC35
 2325              		.word	.LC36
 2326 0f54 EBFFFFFE 		.word	.LC37
 2327 0f58 EAFFFF23 		.word	.LC38
 2328              		.word	.LC39
 2329              		.word	.LC40
 2330              		.word	.LC41
 2331 0f5c E59F0108 		.word	.LC42
 2332              		.word	.LC43
 2333 0f60 EBFFFFFE 		.word	.LC44
 2334 0f64 EAFFFE1D 		.word	.LC45
 2335              		.word	.LC46
 2336              		.word	.LC47
 2337              		.word	.LC48
 2338 0f68 EBFFFFFE 		.word	.LC49
 2339              		.word	.LC50
 2340 0f6c E3A03801 		.word	.LC51
 2341 0f70 E2855001 		.word	.LC52
 2342 0f74 E2433001 		.word	.LC53
 2343 0f78 E1550003 		.word	.LC54
 2344 0f7c 1AFFFFE7 		.word	.LC29
 2345 0f80 EAFFFF19 		.word	.LC30
 2346              		.word	.LC31
 2347              		.word	.LC59
 2348              		.word	.LC13
 2349 0f84 00000000 	.LFE34:
 2351 0f8c 00000094 		.align	2
 2352 0f90 000000DC 		.global	io_enable_xint
 2354 0f98 0000016C 	io_enable_xint:
 2355 0f9c 000001B4 	.LFB23:
 2356 0fa0 00000220 		.loc 1 444 0
 2357 0fa4 00000258 		@ args = 0, pretend = 0, frame = 0
 2358 0fa8 000002BC 		@ frame_needed = 0, uses_anonymous_args = 0
 2359 0fac 00000320 		@ link register save eliminated.
 2360 0fb0 000004F8 		@ lr needed for prologue
 2361 0fb4 0000055C 	.LBB6:
 2362 0fb8 00000C6C 	.LBB7:
 2363 0fbc 0000049C 		.loc 1 428 0
 2364 0fc0 000004D8 		 mrs r3, cpsr
 2365 0fc4 00000588 	.LVL196:
 2366 0fc8 00000370 	.LBE7:
 2367 0fcc 00000408 	.LBE6:
 2368 0fd0 00000BF0 	.LBB8:
 2369 0fd4 00000C20 	.LBB9:
 2370 0fd8 00000548 		.loc 1 437 0
 2371 0fdc 00000C48 		bic	r3, r3, #192
 2372 0fe0 00000430 	.LVL197:
 2373 0fe4 00000478 		 msr cpsr, r3
 2374 0fe8 00000744 	.LBE9:
 2375 0fec 00000778 	.LBE8:
 2376 0ff0 000007E4 		.loc 1 448 0
 2377 0ff4 000005A8 		mov	pc, lr
 2378 0ff8 00000650 	.LFE23:
 2380 1000 00000608 		.align	2
 2381 1004 00000620 		.global	io_disable_xint
 2383 100c 00000828 	io_disable_xint:
 2384 1010 00000844 	.LFB24:
 2385 1014 00000864 		.loc 1 454 0
 2386 1018 000008A4 		@ args = 0, pretend = 0, frame = 0
 2387 101c 000008D8 		@ frame_needed = 0, uses_anonymous_args = 0
 2388 1020 00000914 		@ link register save eliminated.
 2389 1024 00000950 		@ lr needed for prologue
 2390 1028 00000974 	.LBB14:
 2391 102c 000009B0 	.LBB15:
 2392 1030 000009CC 		.loc 1 428 0
 2393 1034 000009E4 		 mrs r3, cpsr
 2394 1038 00000A2C 	.LVL198:
 2395 103c 00000A6C 	.LBE15:
 2396 1040 00000AA4 	.LBE14:
 2397 1044 00000AC8 	.LBB16:
 2398 1048 00000B0C 	.LBB17:
 2399 104c 00000B4C 		.loc 1 437 0
 2400 1050 00000B78 		orr	r3, r3, #192
 2401 1054 00000BA4 	.LVL199:
 2402 1058 00000BC8 		 msr cpsr, r3
 2403 105c 00000680 	.LBE17:
 2404 1060 000006BC 	.LBE16:
 2405 1064 000006FC 		.loc 1 458 0
 2406 1068 00000C90 		mov	pc, lr
 2407 106c 000003E4 	.LFE24:
 2409              		.section	.debug_frame,"",%progbits
 2410              	.Lframe0:
 2411              		.4byte	.LECIE0-.LSCIE0
 2412              	.LSCIE0:
 2413              		.4byte	0xffffffff
 2414              		.byte	0x1
 417:../lib/io_driver.c **** //		case 14:         asm volatile ("mcr p15,0,%0,c14,c14,0" : /* no outputs */ : "r" (_cp_val)); br
 418:../lib/io_driver.c **** //		case 15:         asm volatile ("mcr p15,0,%0,c15,c15,0" : /* no outputs */ : "r" (_cp_val)); br
 419:../lib/io_driver.c **** 		default:         break;
 420:../lib/io_driver.c **** 	}
 421:../lib/io_driver.c **** }
 422:../lib/io_driver.c **** // ******************************************************************************
 423:../lib/io_driver.c **** // read CMSR value
 424:../lib/io_driver.c ****    static inline unsigned long get_cmsr(void)
 425:../lib/io_driver.c **** // ******************************************************************************
 426:../lib/io_driver.c **** {
 427:../lib/io_driver.c **** 	unsigned long _cmsr;
 428:../lib/io_driver.c **** 	asm volatile (" mrs %0, cpsr" : "=r" (_cmsr) : /* no inputs */  );
 429:../lib/io_driver.c **** 	return _cmsr;
 430:../lib/io_driver.c **** }
 431:../lib/io_driver.c **** 
 432:../lib/io_driver.c **** // ******************************************************************************
 433:../lib/io_driver.c **** // write CMSR value
 434:../lib/io_driver.c ****    static inline void set_cmsr(unsigned long _cmsr)
 435:../lib/io_driver.c **** // ******************************************************************************
 436:../lib/io_driver.c **** {
 437:../lib/io_driver.c **** 	asm volatile (" msr cpsr, %0" : /* no outputs */ : "r" (_cmsr)  );
 438:../lib/io_driver.c **** }
 439:../lib/io_driver.c **** 
 440:../lib/io_driver.c **** // ******************************************************************************
 441:../lib/io_driver.c **** // Enable all external INTs
 442:../lib/io_driver.c ****    void io_enable_xint(void)
 443:../lib/io_driver.c **** // ******************************************************************************
 444:../lib/io_driver.c **** {
 2415              	.4byte	.LEFDE0-.LASFDE0
 2416              	.LASFDE0:
 2417              		.4byte	.Lframe0
 2418              		.4byte	.LFB2
 2419              		.4byte	.LFE2-.LFB2
 2420              		.align	2
 2421              	.LEFDE0:
 2422              	.LSFDE2:
 2423 1070 E10F3000 		.4byte	.LEFDE2-.LASFDE2
 2424              	.LASFDE2:
 2425              		.4byte	.Lframe0
 2426              		.4byte	.LFB3
 2427              		.4byte	.LFE3-.LFB3
 2428              		.align	2
 2429              	.LEFDE2:
 2430 1074 E3C330C0 	.LSFDE4:
 2431              		.4byte	.LEFDE4-.LASFDE4
 2432 1078 E129F003 	.LASFDE4:
 2433              		.4byte	.Lframe0
 2434              		.4byte	.LFB4
 445:../lib/io_driver.c **** 	unsigned long _cmsr = get_cmsr();
 446:../lib/io_driver.c **** 	_cmsr = _cmsr & ~(1<<CMSR_FIQ) &~(1<<CMSR_IRQ);
 447:../lib/io_driver.c **** 	set_cmsr(_cmsr);
 448:../lib/io_driver.c **** }
 2435              		.align	2
 2436 107c E1A0F00E 	.LEFDE4:
 2437              	.LSFDE6:
 2438              		.4byte	.LEFDE6-.LASFDE6
 2439              	.LASFDE6:
 2440              		.4byte	.Lframe0
 2441              		.4byte	.LFB5
 2442              		.4byte	.LFE5-.LFB5
 2443              		.align	2
 449:../lib/io_driver.c **** 
 450:../lib/io_driver.c **** // ******************************************************************************
 451:../lib/io_driver.c **** // Disable all global IBTs
 452:../lib/io_driver.c ****    void io_disable_xint(void)
 453:../lib/io_driver.c **** // ******************************************************************************
 454:../lib/io_driver.c **** {
 2444              	.LSFDE8:
 2445              		.4byte	.LEFDE8-.LASFDE8
 2446              	.LASFDE8:
 2447              		.4byte	.Lframe0
 2448              		.4byte	.LFB6
 2449              		.4byte	.LFE6-.LFB6
 2450              		.align	2
 2451              	.LEFDE8:
 2452 1080 E10F3000 	.LSFDE10:
 2453              		.4byte	.LEFDE10-.LASFDE10
 2454              	.LASFDE10:
 2455              		.4byte	.Lframe0
 2456              		.4byte	.LFB7
 2457              		.4byte	.LFE7-.LFB7
 2458              		.align	2
 2459 1084 E38330C0 	.LEFDE10:
 2460              	.LSFDE12:
 2461 1088 E129F003 		.4byte	.LEFDE12-.LASFDE12
 2462              	.LASFDE12:
 2463              		.4byte	.Lframe0
 455:../lib/io_driver.c **** 	unsigned long _cmsr = get_cmsr();
 456:../lib/io_driver.c **** 	_cmsr = _cmsr | (1<<CMSR_FIQ) | (1<<CMSR_IRQ);
 457:../lib/io_driver.c **** 	set_cmsr(_cmsr);
 458:../lib/io_driver.c **** }
 2464              	e	.LFE8-.LFB8
 2465 108c E1A0F00E 		.byte	0x4
 2466              		.4byte	.LCFI0-.LFB8
 2467              		.byte	0xe
 2828              		.4byte	0x0
DEFINED SYMBOLS
                            *ABS*:00000000 main.c
C:\Users\jh\AppData\Local\Temp/ccyqcaaa.s:13     .text:00000000 io_read_gpio0_pin
C:\Users\jh\AppData\Local\Temp/ccyqcaaa.s:22     .text:00000000 $a
C:\Users\jh\AppData\Local\Temp/ccyqcaaa.s:39     .text:00000018 io_read_gpio0_port
C:\Users\jh\AppData\Local\Temp/ccyqcaaa.s:59     .text:00000024 io_set_gpio0_pin
C:\Users\jh\AppData\Local\Temp/ccyqcaaa.s:85     .text:00000040 io_clr_gpio0_pin
C:\Users\jh\AppData\Local\Temp/ccyqcaaa.s:111    .text:00000064 io_toggle_gpio0_pin
C:\Users\jh\AppData\Local\Temp/ccyqcaaa.s:137    .text:00000080 io_set_gpio0_port
C:\Users\jh\AppData\Local\Temp/ccyqcaaa.s:157    .text:0000008c io_set_pwm
C:\Users\jh\AppData\Local\Temp/ccyqcaaa.s:229    .text:00000108 io_get_pwm
C:\Users\jh\AppData\Local\Temp/ccyqcaaa.s:282    .text:00000158 io_uart0_read_byte
C:\Users\jh\AppData\Local\Temp/ccyqcaaa.s:306    .text:00000170 io_uart0_send_byte
C:\Users\jh\AppData\Local\Temp/ccyqcaaa.s:331    .text:0000018c io_spi0_config
C:\Users\jh\AppData\Local\Temp/ccyqcaaa.s:361    .text:000001b0 io_spi0_speed
C:\Users\jh\AppData\Local\Temp/ccyqcaaa.s:381    .text:000001bc io_spi0_trans
C:\Users\jh\AppData\Local\Temp/ccyqcaaa.s:418    .text:000001f4 io_spi0_enable
C:\Users\jh\AppData\Local\Temp/ccyqcaaa.s:444    .text:00000210 io_spi0_disable
C:\Users\jh\AppData\Local\Temp/ccyqcaaa.s:470    .text:00000234 io_i2c0_speed
C:\Users\jh\AppData\Local\Temp/ccyqcaaa.s:503    .text:00000260 io_i2c0_byte_transfer
C:\Users\jh\AppData\Local\Temp/ccyqcaaa.s:647    .text:00000390 get_syscpreg
C:\Users\jh\AppData\Local\Temp/ccyqcaaa.s:662    .text:000003a0 $d
C:\Users\jh\AppData\Local\Temp/ccyqcaaa.s:679    .text:000003e0 $a
C:\Users\jh\AppData\Local\Temp/ccyqcaaa.s:785    .text:00000468 set_syscpreg
C:\Users\jh\AppData\Local\Temp/ccyqcaaa.s:804    .text:0000047c $d
C:\Users\jh\AppData\Local\Temp/ccyqcaaa.s:814    .text:0000049c $a
C:\Users\jh\AppData\Local\Temp/ccyqcaaa.s:834    .text:000004bc uart0_printf
C:\Users\jh\AppData\Local\Temp/ccyqcaaa.s:879    .text:000004f4 uart0_scanf
C:\Users\jh\AppData\Local\Temp/ccyqcaaa.s:946    .text:0000054c $d
C:\Users\jh\AppData\Local\Temp/ccyqcaaa.s:952    .text:00000550 uart0_print_buffer
C:\Users\jh\AppData\Local\Temp/ccyqcaaa.s:958    .text:00000550 $a
C:\Users\jh\AppData\Local\Temp/ccyqcaaa.s:982    .text:00000574 long_to_hex_string
C:\Users\jh\AppData\Local\Temp/ccyqcaaa.s:1052   .text:000005e4 get_adc
C:\Users\jh\AppData\Local\Temp/ccyqcaaa.s:1093   .text:00000624 delay
C:\Users\jh\AppData\Local\Temp/ccyqcaaa.s:1125   .text:0000064c string_cmpc
C:\Users\jh\AppData\Local\Temp/ccyqcaaa.s:1176   .text:00000694 hex_string_to_long
C:\Users\jh\AppData\Local\Temp/ccyqcaaa.s:1240   .text:00000700 qbytes_to_long
C:\Users\jh\AppData\Local\Temp/ccyqcaaa.s:1487   .text:00000720 main
C:\Users\jh\AppData\Local\Temp/ccyqcaaa.s:2349   .text:00000f84 $d
C:\Users\jh\AppData\Local\Temp/ccyqcaaa.s:2413   .text:00001070 io_enable_xint
C:\Users\jh\AppData\Local\Temp/ccyqcaaa.s:2423   .text:00001070 $a
C:\Users\jh\AppData\Local\Temp/ccyqcaaa.s:2442   .text:00001080 io_disable_xint

NO UNDEFINED SYMBOLS
