   1              		.file	"main.c"
   9              	.Ltext0:
  10              		.align	2
  11              		.global	io_read_gpio0_pin
  13              	io_read_gpio0_pin:
  14              	.LFB2:
  15              		.file 1 "../lib/io_driver.c"
   1:../lib/io_driver.c **** #include "io_driver.h"
   2:../lib/io_driver.c **** #include "storm_core.h"
   3:../lib/io_driver.c **** #include "storm_soc_basic.h"
   4:../lib/io_driver.c **** 
   5:../lib/io_driver.c **** // ################################################################################################
   6:../lib/io_driver.c **** // General Purpose IO (GENERAL_PURPOSE_CONTROLLER_0)
   7:../lib/io_driver.c **** // ################################################################################################
   8:../lib/io_driver.c **** 
   9:../lib/io_driver.c **** // ******************************************************************************
  10:../lib/io_driver.c **** // Read general purpose IO pin
  11:../lib/io_driver.c ****    unsigned long io_read_gpio0_pin(unsigned char pin)
  12:../lib/io_driver.c **** // ******************************************************************************
  13:../lib/io_driver.c **** {
  16              	 args = 0, pretend = 0, frame = 0
  17              		@ frame_needed = 0, uses_anonymous_args = 0
  18              		@ link register save eliminated.
  19              	.LVL0:
  20              		.loc 1 17 0
  14:../lib/io_driver.c **** //	unsigned long _cmsr = get_cmsr();
  15:../lib/io_driver.c **** //	set_cmsr(_cmsr  | (1<<CMSR_IRQ) | (1<<CMSR_FIQ));
  16:../lib/io_driver.c **** 
  17:../lib/io_driver.c **** 		unsigned long temp = GPIO0_IN & (1<<pin);
  21              	r3, #61440
  22 0000 E3E03A0F 		ldr	r1, [r3, #-4091]
  23 0004 E5131FFB 		.loc 1 13 0
  24              		and	r2, r0, #255
  25 0008 E20020FF 		.loc 1 21 0
  18:../lib/io_driver.c **** 	
  19:../lib/io_driver.c **** //	set_cmsr(_cmsr);
  20:../lib/io_driver.c **** 	return temp;
  21:../lib/io_driver.c **** }
  26              	r0, #1
  27 000c E3A00001 	.LVL1:
  28              		and	r0, r1, r0, asl r2
  29 0010 E0010210 		.loc 1 13 0
  30              		@ lr needed for prologue
  31              		.loc 1 21 0
  32              		mov	pc, lr
  33 0014 E1A0F00E 	.LFE2:
  35              		.align	2
  36              		.global	io_read_gpio0_port
  38              	io_read_gpio0_port:
  39              	.LFB3:
  40              		.loc 1 27 0
  22:../lib/io_driver.c **** 
  23:../lib/io_driver.c **** // ******************************************************************************
  24:../lib/io_driver.c **** // Read general purpose IO port
  25:../lib/io_driver.c ****    unsigned long io_read_gpio0_port(void)
  26:../lib/io_driver.c **** // ******************************************************************************
  27:../lib/io_driver.c **** {
  41              	etend = 0, frame = 0
  42              		@ frame_needed = 0, uses_anonymous_args = 0
  43              		@ link register save eliminated.
  44              		.loc 1 31 0
  28:../lib/io_driver.c **** //	unsigned long _cmsr = get_cmsr();
  29:../lib/io_driver.c **** //	set_cmsr(_cmsr  | (1<<CMSR_IRQ) | (1<<CMSR_FIQ));
  30:../lib/io_driver.c **** 
  31:../lib/io_driver.c **** 		unsigned long temp = GPIO0_IN;
  45              		r3, #61440
  46 0018 E3E03A0F 		ldr	r0, [r3, #-4091]
  47 001c E5130FFB 	.LVL2:
  48              		.loc 1 27 0
  49              		@ lr needed for prologue
  50              	.LVL3:
  51              		.loc 1 35 0
  32:../lib/io_driver.c **** 
  33:../lib/io_driver.c **** //	set_cmsr(_cmsr);
  34:../lib/io_driver.c **** 	return temp;
  35:../lib/io_driver.c **** }
  52              	, lr
  53 0020 E1A0F00E 	.LFE3:
  55              		.align	2
  56              		.global	io_set_gpio0_pin
  58              	io_set_gpio0_pin:
  59              	.LFB4:
  60              		.loc 1 41 0
  36:../lib/io_driver.c **** 
  37:../lib/io_driver.c **** // ******************************************************************************
  38:../lib/io_driver.c **** // Set general purpose IO port
  39:../lib/io_driver.c ****    void io_set_gpio0_pin(unsigned char pin)
  40:../lib/io_driver.c **** // ******************************************************************************
  41:../lib/io_driver.c **** {
  61              	 0, pretend = 0, frame = 0
  62              		@ frame_needed = 0, uses_anonymous_args = 0
  63              		@ link register save eliminated.
  64              	.LVL4:
  65              		.loc 1 45 0
  42:../lib/io_driver.c **** //	unsigned long _cmsr = get_cmsr();
  43:../lib/io_driver.c **** //	set_cmsr(_cmsr  | (1<<CMSR_IRQ) | (1<<CMSR_FIQ));
  44:../lib/io_driver.c **** 
  45:../lib/io_driver.c **** 		GPIO0_OUT = GPIO0_OUT | (1<<pin);
  66              	r1, #61440
  67 0024 E3E01A0F 		ldr	r3, [r1, #-4095]
  68 0028 E5113FFF 		.loc 1 41 0
  69              		and	r0, r0, #255
  70 002c E20000FF 		.loc 1 45 0
  71              		mov	r2, #1
  72 0030 E3A02001 		orr	r3, r3, r2, asl r0
  73 0034 E1833012 		.loc 1 41 0
  74              		@ lr needed for prologue
  75              		.loc 1 45 0
  76              		str	r3, [r1, #-4095]
  77 0038 E5013FFF 		.loc 1 48 0
  46:../lib/io_driver.c **** 
  47:../lib/io_driver.c **** //	set_cmsr(_cmsr);
  48:../lib/io_driver.c **** }
  78              	.LFE4:
  80              		.align	2
  81              		.global	io_clr_gpio0_pin
  83              	io_clr_gpio0_pin:
  84              	.LFB5:
  85              		.loc 1 54 0
  86              		@ args = 0, pretend = 0, frame = 0
  49:../lib/io_driver.c **** 
  50:../lib/io_driver.c **** // ******************************************************************************
  51:../lib/io_driver.c **** // Clear general purpose IO port
  52:../lib/io_driver.c ****    void io_clr_gpio0_pin(unsigned char pin)
  53:../lib/io_driver.c **** // ******************************************************************************
  54:../lib/io_driver.c **** {
  87              	needed = 0, uses_anonymous_args = 0
  88              		@ link register save eliminated.
  89              	.LVL5:
  90              		and	r0, r0, #255
  91              		.loc 1 58 0
  92 0040 E20000FF 		mov	r2, #1
  55:../lib/io_driver.c **** //	unsigned long _cmsr = get_cmsr();
  56:../lib/io_driver.c **** //	set_cmsr(_cmsr  | (1<<CMSR_IRQ) | (1<<CMSR_FIQ));
  57:../lib/io_driver.c **** 
  58:../lib/io_driver.c **** 		GPIO0_OUT = GPIO0_OUT & ~(1<<pin);
  93              	2, r2, asl r0
  94 0044 E3A02001 		mvn	r1, #61440
  95 0048 E1A02012 		ldr	r3, [r1, #-4095]
  96 004c E3E01A0F 		mvn	r2, r2
  97 0050 E5113FFF 		and	r3, r3, r2
  98 0054 E1E02002 		.loc 1 54 0
  99 0058 E0033002 		@ lr needed for prologue
 100              		.loc 1 58 0
 101              		str	r3, [r1, #-4095]
 102              		.loc 1 61 0
 103 005c E5013FFF 		mov	pc, lr
  59:../lib/io_driver.c **** 
  60:../lib/io_driver.c **** //	set_cmsr(_cmsr);
  61:../lib/io_driver.c **** }
 104              	ze	io_clr_gpio0_pin, .-io_clr_gpio0_pin
 105 0060 E1A0F00E 		.align	2
 106              		.global	io_toggle_gpio0_pin
 108              	io_toggle_gpio0_pin:
 109              	.LFB6:
 110              		.loc 1 66 0
 111              		@ args = 0, pretend = 0, frame = 0
 112              		@ frame_needed = 0, uses_anonymous_args = 0
  62:../lib/io_driver.c **** // ******************************************************************************
  63:../lib/io_driver.c **** // Set general purpose IO port
  64:../lib/io_driver.c ****    void io_toggle_gpio0_pin(unsigned char pin)
  65:../lib/io_driver.c **** // ******************************************************************************
  66:../lib/io_driver.c **** {
 113              	egister save eliminated.
 114              	.LVL6:
 115              		.loc 1 70 0
 116              		mvn	r1, #61440
 117              		ldr	r3, [r1, #-4095]
  67:../lib/io_driver.c **** //	unsigned long _cmsr = get_cmsr();
  68:../lib/io_driver.c **** //	set_cmsr(_cmsr  | (1<<CMSR_IRQ) | (1<<CMSR_FIQ));
  69:../lib/io_driver.c **** 
  70:../lib/io_driver.c **** 		GPIO0_OUT = GPIO0_OUT ^ (1<<pin);
 118              	 1 66 0
 119 0064 E3E01A0F 		and	r0, r0, #255
 120 0068 E5113FFF 		.loc 1 70 0
 121              		mov	r2, #1
 122 006c E20000FF 		eor	r3, r3, r2, asl r0
 123              		.loc 1 66 0
 124 0070 E3A02001 		@ lr needed for prologue
 125 0074 E0233012 		.loc 1 70 0
 126              		str	r3, [r1, #-4095]
 127              		.loc 1 73 0
 128              		mov	pc, lr
 129 0078 E5013FFF 	.LFE6:
  71:../lib/io_driver.c **** 
  72:../lib/io_driver.c **** //	set_cmsr(_cmsr);
  73:../lib/io_driver.c **** }
 130              	ggle_gpio0_pin, .-io_toggle_gpio0_pin
 131 007c E1A0F00E 		.align	2
 132              		.global	io_set_gpio0_port
 134              	io_set_gpio0_port:
 135              	.LFB7:
 136              		.loc 1 79 0
 137              		@ args = 0, pretend = 0, frame = 0
 138              		@ frame_needed = 0, uses_anonymous_args = 0
  74:../lib/io_driver.c **** 
  75:../lib/io_driver.c **** // ******************************************************************************
  76:../lib/io_driver.c **** // Clear general purpose IO port
  77:../lib/io_driver.c ****    void io_set_gpio0_port(unsigned long value)
  78:../lib/io_driver.c **** // ******************************************************************************
  79:../lib/io_driver.c **** {
 139              	egister save eliminated.
 140              	.LVL7:
 141              		.loc 1 83 0
 142              		mvn	r3, #61440
 143              		.loc 1 79 0
  80:../lib/io_driver.c **** //	unsigned long _cmsr = get_cmsr();
  81:../lib/io_driver.c **** //	set_cmsr(_cmsr  | (1<<CMSR_IRQ) | (1<<CMSR_FIQ));
  82:../lib/io_driver.c **** 
  83:../lib/io_driver.c **** 		GPIO0_OUT = value;
 144              	 needed for prologue
 145 0080 E3E03A0F 		.loc 1 83 0
 146              		str	r0, [r3, #-4095]
 147              		.loc 1 86 0
 148              		mov	pc, lr
 149 0084 E5030FFF 	.LFE7:
  84:../lib/io_driver.c **** 
  85:../lib/io_driver.c **** //	set_cmsr(_cmsr);
  86:../lib/io_driver.c **** }
 150              		io_set_gpio0_port, .-io_set_gpio0_port
 151 0088 E1A0F00E 		.align	2
 152              		.global	io_set_pwm
 154              	io_set_pwm:
 155              	.LFB8:
 156              		.loc 1 98 0
 157              		@ args = 0, pretend = 0, frame = 0
 158              		@ frame_needed = 0, uses_anonymous_args = 0
  87:../lib/io_driver.c **** 
  88:../lib/io_driver.c **** 
  89:../lib/io_driver.c **** 
  90:../lib/io_driver.c **** // ################################################################################################
  91:../lib/io_driver.c **** // Pulse-Width-Modulation Controller
  92:../lib/io_driver.c **** // ################################################################################################
  93:../lib/io_driver.c **** 
  94:../lib/io_driver.c **** // ******************************************************************************
  95:../lib/io_driver.c **** // Set pwm value
  96:../lib/io_driver.c ****    void io_set_pwm(unsigned char port, unsigned char data)
  97:../lib/io_driver.c **** // ******************************************************************************
  98:../lib/io_driver.c **** {
 159              	nd	r0, r0, #255
 160              		.loc 1 105 0
 161              		cmp	r0, #7
 162              		.loc 1 98 0
 163 008c E20000FF 		stmfd	sp!, {r4, lr}
  99:../lib/io_driver.c **** //	unsigned long _cmsr = get_cmsr();
 100:../lib/io_driver.c **** //	set_cmsr(_cmsr  | (1<<CMSR_IRQ) | (1<<CMSR_FIQ));
 101:../lib/io_driver.c **** 
 102:../lib/io_driver.c **** 	unsigned long temp = 0;
 103:../lib/io_driver.c **** 
 104:../lib/io_driver.c **** 	// value adjustment
 105:../lib/io_driver.c **** 	if(port > 7)
 164              	0:
 165 0090 E3500007 		.loc 1 105 0
 166              		mov	ip, #0
 167 0094 E92D4010 		mvn	lr, #255
 168              		.loc 1 98 0
 169              		and	r1, r1, #255
 170 0098 E3A0C000 		.loc 1 105 0
 171 009c E3E0E0FF 		bhi	.L16
 172              		.loc 1 117 0
 173 00a0 E20110FF 		sub	r3, r0, #4
 174              		and	r3, r3, #255
 175 00a4 8A000011 		.loc 1 108 0
 106:../lib/io_driver.c **** 		port = 0;
 107:../lib/io_driver.c **** 
 108:../lib/io_driver.c **** 	if(port < 4){
 109:../lib/io_driver.c **** 		temp = PWM0_CONF0; // get working copy
 110:../lib/io_driver.c **** 		temp = temp & ~(0xFF << (port*8)); // clear old value
 111:../lib/io_driver.c **** 		temp = temp | (unsigned long)(data << (port*8)); // insert new value
 112:../lib/io_driver.c **** 		PWM0_CONF0 = temp;
 113:../lib/io_driver.c **** 	}
 114:../lib/io_driver.c **** 	else{
 115:../lib/io_driver.c **** 		port = port-4;
 116:../lib/io_driver.c **** 		temp = PWM0_CONF1; // get working copy
 117:../lib/io_driver.c **** 		temp = temp & ~(0xFF << (port*8)); // clear old value
 176              		.loc 1 117 0
 177 00a8 E2403004 		mov	lr, r3, asl #3
 178 00ac E20330FF 		.loc 1 116 0
 179              		mvn	r4, #61440
 180 00b0 E3500003 		.loc 1 108 0
 181              		mov	ip, r0, asl #3
 182 00b4 E1A0E183 		bls	.L22
 183              		.loc 1 117 0
 184 00b8 E3E04A0F 		mov	r3, #255
 185              		mov	r3, r3, asl lr
 186 00bc E1A0C180 		.loc 1 116 0
 187 00c0 9A000007 		ldr	r2, [r4, #-3979]
 188              	.LVL9:
 189 00c4 E3A030FF 		.loc 1 117 0
 190 00c8 E1A03E13 		mvn	r3, r3
 191              		and	r2, r2, r3
 192 00cc E5142F8B 	.LVL10:
 193              		.loc 1 118 0
 194              		orr	r2, r2, r1, asl lr
 195 00d0 E1E03003 	.LVL11:
 196 00d4 E0022003 		.loc 1 119 0
 197              		str	r2, [r4, #-3979]
 118:../lib/io_driver.c **** 		temp = temp | (unsigned long)(data << (port*8)); // insert new value
 198              	LVL12:
 199 00d8 E1822E11 	.L22:
 200              		.loc 1 108 0
 119:../lib/io_driver.c **** 		PWM0_CONF1 = temp;
 201              	v	r3, #255
 202 00dc E5042F8B 		mov	r3, r3, asl ip
 203 00e0 E8BD8010 		mvn	lr, r3
 204              	.L16:
 205              		.loc 1 109 0
 206              		mvn	r2, #61440
 207 00e4 E3A030FF 		ldr	r3, [r2, #-3983]
 208 00e8 E1A03C13 	.LVL13:
 209 00ec E1E0E003 		.loc 1 110 0
 210              		and	r3, r3, lr
 211              	.LVL14:
 212 00f0 E3E02A0F 		.loc 1 111 0
 213 00f4 E5123F8F 		orr	r3, r3, r1, asl ip
 214              	.LVL15:
 215              		.loc 1 112 0
 216 00f8 E003300E 		str	r3, [r2, #-3983]
 217              		ldmfd	sp!, {r4, pc}
 218              	.LFE8:
 220              		.align	2
 221              		.global	io_get_pwm
 223 0104 E8BD8010 	io_get_pwm:
 224              	.LFB9:
 225              		.loc 1 128 0
 226              		@ args = 0, pretend = 0, frame = 0
 227              		@ frame_needed = 0, uses_anonymous_args = 0
 228              		@ link register save eliminated.
 229              	.LVL16:
 230              		and	r0, r0, #255
 120:../lib/io_driver.c **** 	}
 121:../lib/io_driver.c **** //	set_cmsr(_cmsr);
 122:../lib/io_driver.c **** }
 123:../lib/io_driver.c **** 
 124:../lib/io_driver.c **** // ******************************************************************************
 125:../lib/io_driver.c **** // Set pwm value
 126:../lib/io_driver.c ****    unsigned char io_get_pwm(unsigned char port)
 127:../lib/io_driver.c **** // ******************************************************************************
 128:../lib/io_driver.c **** {
 231              	c 1 128 0
 232              		@ lr needed for prologue
 233              		.loc 1 135 0
 234              		mov	r2, #0
 235              		bhi	.L26
 236 0108 E20000FF 		.loc 1 142 0
 129:../lib/io_driver.c **** //	unsigned long _cmsr = get_cmsr();
 130:../lib/io_driver.c **** //	set_cmsr(_cmsr  | (1<<CMSR_IRQ) | (1<<CMSR_FIQ));
 131:../lib/io_driver.c **** 
 132:../lib/io_driver.c **** 	unsigned long temp = 0;
 133:../lib/io_driver.c **** 
 134:../lib/io_driver.c **** 	// value adjustment
 135:../lib/io_driver.c **** 	if(port > 7)
 237              	3, r0, #4
 238 010c E3500007 		.loc 1 138 0
 239              		cmp	r0, #3
 240              		.loc 1 142 0
 241              		and	r2, r3, #255
 242 0110 E3A02000 		.loc 1 138 0
 243 0114 8A00000A 		bls	.L31
 136:../lib/io_driver.c **** 		port = 0;
 137:../lib/io_driver.c **** 
 138:../lib/io_driver.c **** 	if(port < 4)
 139:../lib/io_driver.c **** 		temp = PWM0_CONF0; // get config register
 140:../lib/io_driver.c **** 	else{
 141:../lib/io_driver.c **** 		port = port-4;
 142:../lib/io_driver.c **** 		temp = PWM0_CONF1; // get config register
 244              	 142 0
 245 0118 E2403004 		mvn	r3, #61440
 246              		ldr	r0, [r3, #-3979]
 247 011c E3500003 	.LVL17:
 248              		mov	r2, r2, asl #3
 249 0120 E20320FF 		mov	r0, r0, lsr r2
 250              	.LVL18:
 251 0124 9A000005 		and	r0, r0, #255
 252              		.loc 1 149 0
 253 0128 E3E03A0F 		mov	pc, lr
 254 012c E5130F8B 	.LVL19:
 255              	.L31:
 256 0130 E1A02182 		.loc 1 138 0
 257 0134 E1A00230 		mov	r2, r0, asl #3
 258              	.L26:
 259 0138 E20000FF 		.loc 1 139 0
 143:../lib/io_driver.c **** 	}
 144:../lib/io_driver.c **** 
 145:../lib/io_driver.c **** 	temp = temp >> (port*8); // only keep designated byte
 146:../lib/io_driver.c **** 
 147:../lib/io_driver.c **** //	set_cmsr(_cmsr);
 148:../lib/io_driver.c **** 	return (unsigned char)temp;
 149:../lib/io_driver.c **** }
 260              		ldr	r0, [r3, #-3983]
 261 013c E1A0F00E 	.LVL20:
 262              		.loc 1 142 0
 263              		mov	r0, r0, lsr r2
 264              	.LVL21:
 265 0140 E1A02180 		and	r0, r0, #255
 266              		.loc 1 149 0
 267              		mov	pc, lr
 268 0144 E3E03A0F 	.LFE9:
 270              		.align	2
 271              		.global	io_uart0_read_byte
 273              	io_uart0_read_byte:
 274 0150 E20000FF 	.LFB10:
 275              		.loc 1 161 0
 276 0154 E1A0F00E 		@ args = 0, pretend = 0, frame = 0
 277              		@ frame_needed = 0, uses_anonymous_args = 0
 278              		@ link register save eliminated.
 279              		.loc 1 166 0
 280              		mvn	r2, #61440
 281              		ldr	r3, [r2, #-3835]
 282              		tst	r3, #2
 283              		mvn	r0, #0
 150:../lib/io_driver.c **** 
 151:../lib/io_driver.c **** 
 152:../lib/io_driver.c **** 
 153:../lib/io_driver.c **** // ################################################################################################
 154:../lib/io_driver.c **** // General Purpose UART "miniUART" (UART_0)
 155:../lib/io_driver.c **** // ################################################################################################
 156:../lib/io_driver.c **** 
 157:../lib/io_driver.c **** // ******************************************************************************
 158:../lib/io_driver.c **** // Read one byte via UART 0
 159:../lib/io_driver.c ****    int io_uart0_read_byte(void)
 160:../lib/io_driver.c **** // ******************************************************************************
 161:../lib/io_driver.c **** {
 284              	drne	r0, [r2, #-3839]
 285              		.loc 1 161 0
 286              		@ lr needed for prologue
 287              	.LVL23:
 162:../lib/io_driver.c **** //	unsigned long _cmsr = get_cmsr();
 163:../lib/io_driver.c **** //	set_cmsr(_cmsr  | (1<<CMSR_IRQ) | (1<<CMSR_FIQ));
 164:../lib/io_driver.c **** 
 165:../lib/io_driver.c **** 	int temp;
 166:../lib/io_driver.c **** 	if ((UART0_SREG & (1<<CUART_RXD)) != 0) // byte available?
 288              	c 1 173 0
 289 0158 E3E02A0F 		mov	pc, lr
 290 015c E5123EFB 	.LFE10:
 292 0164 E3E00000 		.align	2
 293              		.global	io_uart0_send_byte
 167:../lib/io_driver.c **** 		temp = UART0_DATA;
 294              		io_uart0_send_byte, %function
 295 0168 15120EFF 	io_uart0_send_byte:
 296              	.LFB11:
 297              		.loc 1 179 0
 298              		@ args = 0, pretend = 0, frame = 0
 168:../lib/io_driver.c **** 	else
 169:../lib/io_driver.c **** 		temp = -1;
 170:../lib/io_driver.c **** 
 171:../lib/io_driver.c **** //	set_cmsr(_cmsr);
 172:../lib/io_driver.c **** 	return temp;
 173:../lib/io_driver.c **** }
 299              	ame_needed = 0, uses_anonymous_args = 0
 300 016c E1A0F00E 		@ link register save eliminated.
 301              	.LVL24:
 302              		@ lr needed for prologue
 303              		mvn	r2, #61440
 304              	.L39:
 305              		.loc 1 183 0
 306              		ldr	r3, [r2, #-3835]
 307              		tst	r3, #1
 174:../lib/io_driver.c **** 
 175:../lib/io_driver.c **** // ******************************************************************************
 176:../lib/io_driver.c **** // Write one byte via UART 0
 177:../lib/io_driver.c ****    int io_uart0_send_byte(int ch)
 178:../lib/io_driver.c **** // ******************************************************************************
 179:../lib/io_driver.c **** {
 308              	
 309              		.loc 1 184 0
 310              		and	r3, r0, #255
 311              		str	r3, [r2, #-3839]
 312              	.LVL25:
 313              		.loc 1 188 0
 314 0170 E3E02A0F 		mov	pc, lr
 315              	.LFE11:
 180:../lib/io_driver.c **** //	unsigned long _cmsr = get_cmsr();
 181:../lib/io_driver.c **** //	set_cmsr(_cmsr  | (1<<CMSR_IRQ) | (1<<CMSR_FIQ));
 182:../lib/io_driver.c **** 
 183:../lib/io_driver.c **** 	while((UART0_SREG & (1<<CUART_TXB)) == 0); // uart busy?
 316              	io_uart0_send_byte, .-io_uart0_send_byte
 317 0174 E5123EFB 		.align	2
 318 0178 E3130001 		.global	io_spi0_config
 184:../lib/io_driver.c **** 	UART0_DATA = (ch & 0x000000FF);
 320              	pi0_config:
 321 0180 E20030FF 	.LFB12:
 322 0184 E5023EFF 		.loc 1 200 0
 323              		@ args = 0, pretend = 0, frame = 0
 185:../lib/io_driver.c **** 
 186:../lib/io_driver.c **** //	set_cmsr(_cmsr);
 187:../lib/io_driver.c **** 	return ch;
 188:../lib/io_driver.c **** }
 324              	rame_needed = 0, uses_anonymous_args = 0
 325 0188 E1A0F00E 		@ link register save eliminated.
 326              	.LVL26:
 327              		and	r0, r0, #255
 328              		.loc 1 206 0
 329              		cmp	r0, #1
 330              		.loc 1 209 0
 331              		orr	r2, r1, #1024
 332              		.loc 1 207 0
 189:../lib/io_driver.c **** 
 190:../lib/io_driver.c **** 
 191:../lib/io_driver.c **** 
 192:../lib/io_driver.c **** // ################################################################################################
 193:../lib/io_driver.c **** // Serial Peripherial Interface (SPI_CONTROLLER_0)
 194:../lib/io_driver.c **** // ################################################################################################
 195:../lib/io_driver.c **** 
 196:../lib/io_driver.c **** // ******************************************************************************
 197:../lib/io_driver.c **** // Configure SPI 0
 198:../lib/io_driver.c ****    void io_spi0_config(unsigned char auto_cs, unsigned long data_size)
 199:../lib/io_driver.c **** // ******************************************************************************
 200:../lib/io_driver.c **** {
 333              	, #61440
 334              		orr	r1, r1, #9216
 335              	.LVL27:
 336              		.loc 1 209 0
 337              		mvnne	r3, #61440
 338 018c E20000FF 		.loc 1 200 0
 201:../lib/io_driver.c **** //	unsigned long _cmsr = get_cmsr();
 202:../lib/io_driver.c **** //	set_cmsr(_cmsr  | (1<<CMSR_IRQ) | (1<<CMSR_FIQ));
 203:../lib/io_driver.c **** 	// devices update their serial input on a rising edge of sclk,
 204:../lib/io_driver.c **** 	// so we need to update the mosi output of the core before
 205:../lib/io_driver.c **** 	// -> at the falling edge of sclk = set SPI_TX_NEG
 206:../lib/io_driver.c **** 	if(auto_cs == 1)
 339              	needed for prologue
 340 0190 E3500001 		.loc 1 207 0
 207:../lib/io_driver.c **** 		SPI0_CONF = (1<<SPI_ACS) | (1<<SPI_TX_NEG) | data_size; // auto assert cs
 208:../lib/io_driver.c **** 	else
 209:../lib/io_driver.c **** 		SPI0_CONF = (0<<SPI_ACS) | (1<<SPI_TX_NEG) | data_size; // manual assert cs
 341              	treq	r1, [r3, #-3327]
 342 0194 E3812B01 		.loc 1 209 0
 343              		strne	r2, [r3, #-3327]
 344 0198 03E03A0F 		mov	pc, lr
 345 019c E3811B09 	.LFE12:
 347              		.align	2
 348 01a0 13E03A0F 		.global	io_spi0_speed
 350              	io_spi0_speed:
 351              	.LFB13:
 352 01a4 05031CFF 		.loc 1 217 0
 353              		@ args = 0, pretend = 0, frame = 0
 354 01a8 15032CFF 		@ frame_needed = 0, uses_anonymous_args = 0
 355 01ac E1A0F00E 		@ link register save eliminated.
 356              	.LVL28:
 357              		.loc 1 221 0
 358              		mvn	r3, #61440
 359              		.loc 1 217 0
 360              		@ lr needed for prologue
 361              		.loc 1 221 0
 362              		str	r0, [r3, #-3323]
 210:../lib/io_driver.c **** //	set_cmsr(_cmsr);
 211:../lib/io_driver.c **** }
 212:../lib/io_driver.c **** 
 213:../lib/io_driver.c **** // ******************************************************************************
 214:../lib/io_driver.c **** // Configure SPI 0 CLK frequency -> (sys_clk/(spi_clk*2))-1
 215:../lib/io_driver.c ****    void io_spi0_speed(unsigned long clk_divider)
 216:../lib/io_driver.c **** // ******************************************************************************
 217:../lib/io_driver.c **** {
 363              	 lr
 364              	.LFE13:
 366              		.align	2
 367              		.global	io_spi0_trans
 218:../lib/io_driver.c **** //	unsigned long _cmsr = get_cmsr();
 219:../lib/io_driver.c **** //	set_cmsr(_cmsr  | (1<<CMSR_IRQ) | (1<<CMSR_FIQ));
 220:../lib/io_driver.c **** 
 221:../lib/io_driver.c **** 		SPI0_PRSC = clk_divider; // (sys_clk/(spi_clk*2))-1;
 368              	e	io_spi0_trans, %function
 369 01b0 E3E03A0F 	io_spi0_trans:
 370              	.LFB14:
 371              		.loc 1 230 0
 372              		@ args = 0, pretend = 0, frame = 0
 373 01b4 E5030CFB 		@ frame_needed = 0, uses_anonymous_args = 0
 222:../lib/io_driver.c **** 
 223:../lib/io_driver.c **** //	set_cmsr(_cmsr);
 224:../lib/io_driver.c **** }
 374              	k register save eliminated.
 375 01b8 E1A0F00E 	.LVL29:
 376              		@ lr needed for prologue
 377              		mvn	r2, #61440
 378              	.L53:
 379              		.loc 1 235 0
 380              		ldr	r3, [r2, #-3327]
 381              		tst	r3, #256
 382              		bne	.L53
 225:../lib/io_driver.c **** 
 226:../lib/io_driver.c **** // ******************************************************************************
 227:../lib/io_driver.c **** // Sends/receives max 32 bits via SPI, CS and config must be done outside
 228:../lib/io_driver.c ****    unsigned long io_spi0_trans(unsigned long data)
 229:../lib/io_driver.c **** // ******************************************************************************
 230:../lib/io_driver.c **** {
 383              	36 0
 384              		str	r0, [r2, #-3311]
 385              		.loc 1 237 0
 386              		ldr	r3, [r2, #-3327]
 387              		orr	r3, r3, #256
 388              		str	r3, [r2, #-3327]
 389 01bc E3E02A0F 		mvn	r2, #61440
 390              	.L55:
 231:../lib/io_driver.c **** //	unsigned long _cmsr = get_cmsr();
 232:../lib/io_driver.c **** //	set_cmsr(_cmsr  | (1<<CMSR_IRQ) | (1<<CMSR_FIQ));
 233:../lib/io_driver.c **** 
 234:../lib/io_driver.c **** 	// spi transmission
 235:../lib/io_driver.c **** 	while((SPI0_CONF & (1<<SPI_BUSY)) != 0); // wait for prev tx to finish
 391              	238 0
 392 01c0 E5123CFF 		ldr	r3, [r2, #-3327]
 393 01c4 E3130C01 		tst	r3, #256
 394 01c8 1AFFFFFC 		bne	.L55
 236:../lib/io_driver.c **** 	SPI0_DAT0 = data;
 395              	c 1 239 0
 396 01cc E5020CEF 		ldr	r0, [r2, #-3311]
 237:../lib/io_driver.c **** 	SPI0_CONF = SPI0_CONF | (1<<SPI_BUSY); // start transmitter
 397              	VL30:
 398 01d0 E5123CFF 	.LVL31:
 399 01d4 E3833C01 		.loc 1 243 0
 400 01d8 E5023CFF 		mov	pc, lr
 401 01dc E3E02A0F 	.LFE14:
 238:../lib/io_driver.c **** 	while((SPI0_CONF & (1<<SPI_BUSY)) != 0); // wait for rx to finish
 403              	n	2
 404 01e0 E5123CFF 		.global	io_spi0_enable
 406 01e8 1AFFFFFC 	io_spi0_enable:
 239:../lib/io_driver.c **** 	unsigned long temp = SPI0_DAT0;
 407              	15:
 408 01ec E5120CEF 		.loc 1 249 0
 409              		@ args = 0, pretend = 0, frame = 0
 410              		@ frame_needed = 0, uses_anonymous_args = 0
 240:../lib/io_driver.c **** 
 241:../lib/io_driver.c **** //	set_cmsr(_cmsr);
 242:../lib/io_driver.c **** 	return temp;
 243:../lib/io_driver.c **** }
 411              	ink register save eliminated.
 412 01f0 E1A0F00E 	.LVL32:
 413              		.loc 1 253 0
 414              		mvn	r1, #61440
 415              		ldr	r3, [r1, #-3319]
 416              		.loc 1 249 0
 417              		and	r0, r0, #255
 418              		.loc 1 253 0
 419              		mov	r2, #1
 244:../lib/io_driver.c **** 
 245:../lib/io_driver.c **** // ******************************************************************************
 246:../lib/io_driver.c **** // Controls the CS of SPI0, enables a connected CS (turns it LOW)
 247:../lib/io_driver.c ****    void io_spi0_enable(unsigned char device)
 248:../lib/io_driver.c **** // ******************************************************************************
 249:../lib/io_driver.c **** {
 420              	r3, r2, asl r0
 421              		.loc 1 249 0
 422              		@ lr needed for prologue
 423              		.loc 1 253 0
 424              		str	r3, [r1, #-3319]
 250:../lib/io_driver.c **** //	unsigned long _cmsr = get_cmsr();
 251:../lib/io_driver.c **** //	set_cmsr(_cmsr  | (1<<CMSR_IRQ) | (1<<CMSR_FIQ));
 252:../lib/io_driver.c **** 
 253:../lib/io_driver.c **** 		SPI0_SCSR = SPI0_SCSR | (1<<device);
 425              	 1 256 0
 426 01f4 E3E01A0F 		mov	pc, lr
 427 01f8 E5113CF7 	.LFE15:
 429 01fc E20000FF 		.align	2
 430              		.global	io_spi0_disable
 432 0204 E1833012 	io_spi0_disable:
 433              	.LFB16:
 434              		.loc 1 262 0
 435              		@ args = 0, pretend = 0, frame = 0
 436 0208 E5013CF7 		@ frame_needed = 0, uses_anonymous_args = 0
 254:../lib/io_driver.c **** 
 255:../lib/io_driver.c **** //	set_cmsr(_cmsr);
 256:../lib/io_driver.c **** }
 437              	ster save eliminated.
 438 020c E1A0F00E 	.LVL33:
 439              		and	r0, r0, #255
 440              		.loc 1 266 0
 441              		mov	r2, #1
 442              		mov	r2, r2, asl r0
 443              		mvn	r1, #61440
 444              		ldr	r3, [r1, #-3319]
 445              		mvn	r2, r2
 257:../lib/io_driver.c **** 
 258:../lib/io_driver.c **** // ******************************************************************************
 259:../lib/io_driver.c **** // Controls the CS of SPI0, disables a connected CS (turns it HIGH)
 260:../lib/io_driver.c ****    void io_spi0_disable(unsigned char device)
 261:../lib/io_driver.c **** // ******************************************************************************
 262:../lib/io_driver.c **** {
 446              	r3, r2
 447              		.loc 1 262 0
 448              		@ lr needed for prologue
 449              		.loc 1 266 0
 450              		str	r3, [r1, #-3319]
 451 0210 E20000FF 		.loc 1 269 0
 263:../lib/io_driver.c **** //	unsigned long _cmsr = get_cmsr();
 264:../lib/io_driver.c **** //	set_cmsr(_cmsr  | (1<<CMSR_IRQ) | (1<<CMSR_FIQ));
 265:../lib/io_driver.c **** 
 266:../lib/io_driver.c **** 		SPI0_SCSR = SPI0_SCSR & ~(1<<device);
 452              	c, lr
 453 0214 E3A02001 	.LFE16:
 455 021c E3E01A0F 		.align	2
 456 0220 E5113CF7 		.global	io_i2c0_speed
 458 0228 E0033002 	io_i2c0_speed:
 459              	.LFB17:
 460              		.loc 1 282 0
 461              		@ args = 0, pretend = 0, frame = 0
 462 022c E5013CF7 		@ frame_needed = 0, uses_anonymous_args = 0
 267:../lib/io_driver.c **** 
 268:../lib/io_driver.c **** //	set_cmsr(_cmsr);
 269:../lib/io_driver.c **** }
 463              	ister save eliminated.
 464 0230 E1A0F00E 	.LVL34:
 465              		.loc 1 285 0
 466              		mvn	r2, #61440
 467              		ldr	r3, [r2, #-3047]
 468              		.loc 1 287 0
 469              		mov	r1, r0, lsr #8
 470              		.loc 1 285 0
 471              		bic	r3, r3, #128
 270:../lib/io_driver.c **** 
 271:../lib/io_driver.c **** 
 272:../lib/io_driver.c **** 
 273:../lib/io_driver.c **** 
 274:../lib/io_driver.c **** // ################################################################################################
 275:../lib/io_driver.c **** // Inter Intergrated Circuit Interface (I²C_CONTROLLER_0)
 276:../lib/io_driver.c **** // ################################################################################################
 277:../lib/io_driver.c **** 
 278:../lib/io_driver.c **** // ******************************************************************************
 279:../lib/io_driver.c **** // Configure SPI 0 CLK frequency -> (sys_clk/(5*i2c_clock)-1
 280:../lib/io_driver.c ****    void io_i2c0_speed(unsigned long clk_divider)
 281:../lib/io_driver.c **** // ******************************************************************************
 282:../lib/io_driver.c **** {
 472              	[r2, #-3047]
 473              		.loc 1 286 0
 474              		str	r0, [r2, #-3055]
 475              		.loc 1 287 0
 476              		str	r1, [r2, #-3051]
 283:../lib/io_driver.c **** //	unsigned long _cmsr = get_cmsr();
 284:../lib/io_driver.c **** //	set_cmsr(_cmsr  | (1<<CMSR_IRQ) | (1<<CMSR_FIQ));
 285:../lib/io_driver.c **** 		I2C0_CTRL = I2C0_CTRL & ~(1<<I2C_EN); // disable i2c core
 477              	 1 288 0
 478 0234 E3E02A0F 		ldr	r3, [r2, #-3047]
 479 0238 E5123BE7 		orr	r3, r3, #128
 286:../lib/io_driver.c **** 		I2C0_PRLO = clk_divider;
 287:../lib/io_driver.c **** 		I2C0_PRHI = clk_divider >> 8;
 480              	oc 1 282 0
 481 023c E1A01420 		@ lr needed for prologue
 482              		.loc 1 288 0
 483 0240 E3C33080 		str	r3, [r2, #-3047]
 484 0244 E5023BE7 		.loc 1 290 0
 485              		mov	pc, lr
 486 0248 E5020BEF 	.LFE17:
 488 024c E5021BEB 		.align	2
 288:../lib/io_driver.c **** 		I2C0_CTRL = I2C0_CTRL | (1<<I2C_EN); // enable i2c core
 489              	io_i2c0_byte_transfer
 491 0254 E3833080 	io_i2c0_byte_transfer:
 492              	.LFB18:
 493              		.loc 1 300 0
 494              		@ args = 4, pretend = 0, frame = 0
 495 0258 E5023BE7 		@ frame_needed = 0, uses_anonymous_args = 0
 289:../lib/io_driver.c **** //	set_cmsr(_cmsr);
 290:../lib/io_driver.c **** }
 496              	
 497 025c E1A0F00E 		stmfd	sp!, {r4, r5, lr}
 498              	.LCFI1:
 499              		.loc 1 306 0
 500              		mov	ip, #144
 501              		.loc 1 305 0
 502              		and	r4, r1, #254
 503              		mvn	lr, #61440
 504              	.LVL36:
 291:../lib/io_driver.c **** 
 292:../lib/io_driver.c **** // ******************************************************************************
 293:../lib/io_driver.c **** // Read/write byte from/to I²C slave, max 2 address bytes
 294:../lib/io_driver.c ****    int io_i2c0_byte_transfer(unsigned char rw,        // 'r' read / 'w' write cycle
 295:../lib/io_driver.c ****                              unsigned char id,        // device ID
 296:../lib/io_driver.c **** 							 unsigned long data_adr,  // data address
 297:../lib/io_driver.c **** 							 unsigned char adr_bytes, // number of adr bytes
 298:../lib/io_driver.c **** 							 unsigned char data)      // data byte
 299:../lib/io_driver.c **** // ******************************************************************************
 300:../lib/io_driver.c **** {
 505              	300 0
 506              		ldrb	r5, [sp, #15]	@ zero_extendqisi2
 507              		and	r0, r0, #255
 508              		.loc 1 305 0
 509 0260 E92D4030 		str	r4, [lr, #-3043]
 510              		.loc 1 300 0
 301:../lib/io_driver.c **** //	unsigned long _cmsr = get_cmsr();
 302:../lib/io_driver.c **** //	set_cmsr(_cmsr  | (1<<CMSR_IRQ) | (1<<CMSR_FIQ));
 303:../lib/io_driver.c **** 
 304:../lib/io_driver.c **** 	// transfer slave identification address
 305:../lib/io_driver.c **** 	I2C0_DATA = id & 0xFE;                  // device id and write
 306:../lib/io_driver.c **** 	I2C0_CMD = (1<<I2C_STA) | (1<<I2C_WR);  // start condition and write cycle
 511              	1, r1, #255
 512 0264 E3A0C090 		.loc 1 306 0
 513              		str	ip, [lr, #-3071]
 514 0268 E20140FE 		.loc 1 300 0
 515 026c E3E0EA0F 		mov	r4, r2
 516              		and	ip, r3, #255
 517              	.LVL37:
 518 0270 E5DD500F 	.L69:
 519 0274 E20000FF 		.loc 1 307 0
 520              		ldr	r3, [lr, #-3071]
 521 0278 E50E4BE3 		tst	r3, #2
 522              		bne	.L69
 523 027c E20110FF 		.loc 1 308 0
 524              		ldr	r3, [lr, #-3071]
 525 0280 E50ECBFF 		tst	r3, #128
 526              		mvnne	r0, #0
 527 0284 E1A04002 	.LVL38:
 528 0288 E203C0FF 		ldmnefd	sp!, {r4, r5, pc}
 529              	.L80:
 530              		.loc 1 314 0
 307:../lib/io_driver.c **** 	while((I2C0_STAT & (1<<I2C_TIP)) != 0); // wait for transfer to finish
 531              	09
 532 028c E51E3BFF 		.loc 1 315 0
 533 0290 E3130002 		sub	r3, ip, #1
 534 0294 1AFFFFFC 		and	ip, r3, #255
 308:../lib/io_driver.c **** 	if((I2C0_STAT & (1<<I2C_RXACK)) != 0){  // ack received?
 535              	c 1 316 0
 536 0298 E51E3BFF 		cmp	ip, #1
 537 029c E3130080 		.loc 1 317 0
 538 02a0 13E00000 		moveq	r2, r4, lsr #8
 539              		mvneq	r3, #61440
 540 02a4 18BD8030 		.loc 1 319 0
 541              		mvnne	r3, #61440
 309:../lib/io_driver.c **** //		set_cmsr(_cmsr);
 310:../lib/io_driver.c **** 		return -1;
 311:../lib/io_driver.c **** 	}
 312:../lib/io_driver.c **** 
 313:../lib/io_driver.c **** 	// transfer data address
 314:../lib/io_driver.c **** 	while(adr_bytes != 0){
 542              	 317 0
 543 02a8 E35C0000 		streq	r2, [r3, #-3043]
 544 02ac 0A000012 		.loc 1 319 0
 315:../lib/io_driver.c **** 		adr_bytes--;
 545              	rne	r4, [r3, #-3043]
 546 02b0 E24C3001 		.loc 1 320 0
 547 02b4 E203C0FF 		mvn	r2, #61440
 316:../lib/io_driver.c **** 		if(adr_bytes == 1)
 548              	v	r3, #16
 549 02b8 E35C0001 		str	r3, [r2, #-3071]
 317:../lib/io_driver.c **** 			I2C0_DATA = data_adr >> 8;          // high byte
 550              	78:
 551 02bc 01A02424 		.loc 1 321 0
 552 02c0 03E03A0F 		ldr	r3, [r2, #-3071]
 318:../lib/io_driver.c **** 		else
 319:../lib/io_driver.c **** 			I2C0_DATA = data_adr;               // low byte
 553              	t	r3, #2
 554 02c4 13E03A0F 		bne	.L78
 555              		.loc 1 322 0
 556 02c8 05032BE3 		ldr	r3, [r2, #-3071]
 557              		tst	r3, #128
 558 02cc 15034BE3 		beq	.L80
 320:../lib/io_driver.c **** 		I2C0_CMD = (1<<I2C_WR);                 // write cycle
 559              	0, #1
 560 02d0 E3E02A0F 		ldmfd	sp!, {r4, r5, pc}
 561 02d4 E3A03010 	.LVL39:
 562 02d8 E5023BFF 	.L109:
 563              	.LVL40:
 321:../lib/io_driver.c **** 		while((I2C0_STAT & (1<<I2C_TIP)) != 0); // wait for transfer to finish
 564              	 1 328 0
 565 02dc E5123BFF 		cmp	r0, #119
 566 02e0 E3130002 		bne	.L83
 567 02e4 1AFFFFFC 		.loc 1 330 0
 322:../lib/io_driver.c **** 		if((I2C0_STAT & (1<<I2C_RXACK)) != 0){  // ack received?
 568              		r3, #61440
 569 02e8 E5123BFF 		.loc 1 331 0
 570 02ec E3130080 		mov	r2, #80
 571 02f0 0AFFFFEC 		.loc 1 330 0
 572 02f4 E3E00001 		str	r5, [r3, #-3043]
 573 02f8 E8BD8030 		.loc 1 331 0
 574              		str	r2, [r3, #-3071]
 575              		mov	r2, r3
 576              	.L85:
 323:../lib/io_driver.c **** //			set_cmsr(_cmsr);
 324:../lib/io_driver.c **** 			return -2;
 325:../lib/io_driver.c **** 		}
 326:../lib/io_driver.c **** 	}
 327:../lib/io_driver.c **** 
 328:../lib/io_driver.c **** 	if(rw == 'w'){
 577              	32 0
 578 02fc E3500077 		ldr	r3, [r2, #-3071]
 579 0300 1A00000C 		tst	r3, #2
 329:../lib/io_driver.c **** 		// write adressed byte
 330:../lib/io_driver.c **** 		I2C0_DATA = data;                       // send data
 580              	e	.L85
 581 0304 E3E03A0F 		.loc 1 333 0
 331:../lib/io_driver.c **** 		I2C0_CMD = (1<<I2C_STO) | (1<<I2C_WR);  // stop condition and write cycle
 582              	dr	r3, [r2, #-3071]
 583 0308 E3A02050 		ands	r0, r3, #128
 584              	.LVL41:
 585 030c E5035BE3 		ldmeqfd	sp!, {r4, r5, pc}
 586              	.L87:
 587 0310 E5032BFF 		.loc 1 355 0
 588 0314 E1A02003 		mvn	r0, #2
 589              		.loc 1 360 0
 332:../lib/io_driver.c **** 		while((I2C0_STAT & (1<<I2C_TIP)) != 0); // wait for transfer to finish
 590              	p!, {r4, r5, pc}
 591 0318 E5123BFF 	.LVL42:
 592 031c E3130002 	.L83:
 593 0320 1AFFFFFC 		.loc 1 343 0
 333:../lib/io_driver.c **** 		if((I2C0_STAT & (1<<I2C_RXACK)) != 0){  // ack received?
 594              		r0, #114
 595 0324 E5123BFF 		mvnne	r0, #3
 596 0328 E2130080 	.LVL43:
 597              		ldmnefd	sp!, {r4, r5, pc}
 598 032c 08BD8030 		.loc 1 345 0
 599              		orr	r3, r1, #1
 334:../lib/io_driver.c **** //			set_cmsr(_cmsr);
 335:../lib/io_driver.c **** 			return -3;
 336:../lib/io_driver.c **** 		}
 337:../lib/io_driver.c **** 		else{
 338:../lib/io_driver.c **** //			set_cmsr(_cmsr);
 339:../lib/io_driver.c **** 			return 0;
 340:../lib/io_driver.c **** 		}
 341:../lib/io_driver.c **** 	}
 342:../lib/io_driver.c **** 
 343:../lib/io_driver.c **** 	if(rw == 'r'){
 344:../lib/io_driver.c **** 		// re-send control byte - this time with read-bit
 345:../lib/io_driver.c **** 		I2C0_DATA = id | 0x01;                  // device id and READ
 346:../lib/io_driver.c **** 		I2C0_CMD = (1<<I2C_STA) | (1<<I2C_WR);  // start condition and write cycle
 347:../lib/io_driver.c **** 		while((I2C0_STAT & (1<<I2C_TIP)) != 0); // wait for transfer to finish
 348:../lib/io_driver.c **** 		if((I2C0_STAT & (1<<I2C_RXACK)) != 0){  // ack received?
 349:../lib/io_driver.c **** //			set_cmsr(_cmsr);
 350:../lib/io_driver.c **** 			return -3;
 351:../lib/io_driver.c **** 		}
 352:../lib/io_driver.c **** 		// read adressed byte
 353:../lib/io_driver.c **** 		I2C0_CMD = (1<<I2C_STO) | (1<<I2C_RD) | (1<<I2C_ACK);
 354:../lib/io_driver.c **** 		while((I2C0_STAT & (1<<I2C_TIP)) != 0); // wait for transfer to finish
 355:../lib/io_driver.c **** 		return I2C0_DATA;
 600              	2, #61440
 601 0330 E3E00002 		.loc 1 346 0
 356:../lib/io_driver.c **** 	}
 357:../lib/io_driver.c **** 
 358:../lib/io_driver.c **** //	set_cmsr(_cmsr);
 359:../lib/io_driver.c **** 	return -4;
 360:../lib/io_driver.c **** }
 602              	ov	r1, #144
 603 0334 E8BD8030 	.LVL44:
 604              		.loc 1 345 0
 605              		str	r3, [r2, #-3043]
 606              		.loc 1 346 0
 607 0338 E3500072 		str	r1, [r2, #-3071]
 608 033c 13E00003 	.L91:
 609              		.loc 1 347 0
 610 0340 18BD8030 		ldr	r3, [r2, #-3071]
 611              		tst	r3, #2
 612 0344 E3813001 		bne	.L91
 613 0348 E3E02A0F 		.loc 1 348 0
 614              		ldr	r3, [r2, #-3071]
 615 034c E3A01090 		tst	r3, #128
 616              		bne	.L87
 617              		.loc 1 353 0
 618 0350 E5023BE3 		mov	r3, #104
 619              		str	r3, [r2, #-3071]
 620 0354 E5021BFF 		mvn	r0, #61440
 621              	.L94:
 622              		.loc 1 354 0
 623 0358 E5123BFF 		ldr	r3, [r0, #-3071]
 624 035c E3130002 		tst	r3, #2
 625 0360 1AFFFFFC 		bne	.L94
 626              		.loc 1 355 0
 627 0364 E5123BFF 		ldr	r0, [r0, #-3043]
 628 0368 E3130080 		ldmfd	sp!, {r4, r5, pc}
 629 036c 1AFFFFEF 	.LFE18:
 631 0370 E3A03068 		.align	2
 632 0374 E5023BFF 		.global	get_syscpreg
 634              	get_syscpreg:
 635              	.LFB19:
 636 037c E5103BFF 		.loc 1 373 0
 637 0380 E3130002 		@ args = 0, pretend = 0, frame = 0
 638 0384 1AFFFFFC 		@ frame_needed = 0, uses_anonymous_args = 0
 639              		@ link register save eliminated.
 640 0388 E5100BE3 	.LVL45:
 641 038c E8BD8030 		and	r0, r0, #255
 642              		@ lr needed for prologue
 643              		.loc 1 375 0
 644              		cmp	r0, #15
 645              		ldrls	pc, [pc, r0, asl #2]
 646              		b	.L111
 647              		.p2align 2
 648              	.L128:
 361:../lib/io_driver.c **** 
 362:../lib/io_driver.c **** 
 363:../lib/io_driver.c **** 
 364:../lib/io_driver.c **** 
 365:../lib/io_driver.c **** // ################################################################################################
 366:../lib/io_driver.c **** // System
 367:../lib/io_driver.c **** // ################################################################################################
 368:../lib/io_driver.c **** 
 369:../lib/io_driver.c **** // ******************************************************************************
 370:../lib/io_driver.c **** // read system coprocessor register x
 371:../lib/io_driver.c ****    unsigned long get_syscpreg(unsigned char index)
 372:../lib/io_driver.c **** // ******************************************************************************
 373:../lib/io_driver.c **** {
 649              	L115
 650              		.word	.L116
 651              		.word	.L117
 652              		.word	.L118
 653              		.word	.L119
 654 0390 E20000FF 		.word	.L120
 655              		.word	.L121
 374:../lib/io_driver.c **** 	unsigned long _cp_val;
 375:../lib/io_driver.c **** 	switch(index){
 656              	.L122
 657 0394 E350000F 		.word	.L123
 658 0398 979FF100 		.word	.L124
 659 039c EA00000F 		.word	.L125
 660              		.word	.L126
 661              		.word	.L127
 662 03a0 00000460 	.L111:
 663 03a4 00000458 		mov	r0, #0
 664 03a8 00000450 	.LVL46:
 665 03ac 00000448 		mov	pc, lr
 666 03b0 00000440 	.LVL47:
 667 03b4 00000438 	.L127:
 668 03b8 00000430 		.loc 1 391 0
 669 03bc 00000428 		mrc p15,0,r0,c15,c15
 670 03c0 00000420 	.LVL48:
 671 03c4 00000418 	.LVL49:
 672 03c8 00000410 		.loc 1 395 0
 673 03cc 00000408 		mov	pc, lr
 674 03d0 00000400 	.LVL50:
 675 03d4 000003F8 	.L126:
 676 03d8 000003F0 		.loc 1 390 0
 677 03dc 000003E8 		mrc p15,0,r0,c14,c14
 678              	.LVL51:
 679 03e0 E3A00000 		mov	pc, lr
 680              	.LVL52:
 681 03e4 E1A0F00E 	.L125:
 682              		.loc 1 389 0
 683              		mrc p15,0,r0,c13,c13
 376:../lib/io_driver.c **** 		case ID_REG_0:   asm volatile ("mrc p15,0,%0, c0, c0" : "=r" (_cp_val) : /* no inputs */  ); brea
 377:../lib/io_driver.c **** 		case ID_REG_1:   asm volatile ("mrc p15,0,%0, c1, c1" : "=r" (_cp_val) : /* no inputs */  ); brea
 378:../lib/io_driver.c **** 		case ID_REG_2:   asm volatile ("mrc p15,0,%0, c2, c2" : "=r" (_cp_val) : /* no inputs */  ); brea
 379:../lib/io_driver.c **** 		case 3:          asm volatile ("mrc p15,0,%0, c3, c3" : "=r" (_cp_val) : /* no inputs */  ); brea
 380:../lib/io_driver.c **** 		case 4:          asm volatile ("mrc p15,0,%0, c4, c4" : "=r" (_cp_val) : /* no inputs */  ); brea
 381:../lib/io_driver.c **** 		case 5:          asm volatile ("mrc p15,0,%0, c5, c5" : "=r" (_cp_val) : /* no inputs */  ); brea
 382:../lib/io_driver.c **** 		case SYS_CTRL_0: asm volatile ("mrc p15,0,%0, c6, c6" : "=r" (_cp_val) : /* no inputs */  ); brea
 383:../lib/io_driver.c **** 		case 7:          asm volatile ("mrc p15,0,%0, c7, c7" : "=r" (_cp_val) : /* no inputs */  ); brea
 384:../lib/io_driver.c **** 		case CSTAT:      asm volatile ("mrc p15,0,%0, c8, c8" : "=r" (_cp_val) : /* no inputs */  ); brea
 385:../lib/io_driver.c **** 		case ADR_FB:     asm volatile ("mrc p15,0,%0, c9, c9" : "=r" (_cp_val) : /* no inputs */  ); brea
 386:../lib/io_driver.c **** 		case 10:         asm volatile ("mrc p15,0,%0,c10,c10" : "=r" (_cp_val) : /* no inputs */  ); brea
 387:../lib/io_driver.c **** 		case LFSR_POLY:  asm volatile ("mrc p15,0,%0,c11,c11" : "=r" (_cp_val) : /* no inputs */  ); brea
 388:../lib/io_driver.c **** 		case LFSR_DATA:  asm volatile ("mrc p15,0,%0,c12,c12" : "=r" (_cp_val) : /* no inputs */  ); brea
 389:../lib/io_driver.c **** 		case SYS_IO:     asm volatile ("mrc p15,0,%0,c13,c13" : "=r" (_cp_val) : /* no inputs */  ); brea
 390:../lib/io_driver.c **** 		case 14:         asm volatile ("mrc p15,0,%0,c14,c14" : "=r" (_cp_val) : /* no inputs */  ); brea
 391:../lib/io_driver.c **** 		case 15:         asm volatile ("mrc p15,0,%0,c15,c15" : "=r" (_cp_val) : /* no inputs */  ); brea
 684              	.L124:
 685 03e8 EE1F0F1F 		.loc 1 388 0
 686              		mrc p15,0,r0,c12,c12
 687              	.LVL55:
 392:../lib/io_driver.c **** 		default:         _cp_val = 0; break;
 393:../lib/io_driver.c **** 	}
 394:../lib/io_driver.c **** 	return _cp_val;
 395:../lib/io_driver.c **** }
 688              		pc, lr
 689 03ec E1A0F00E 	.LVL56:
 690              	.L123:
 691              		.loc 1 387 0
 692              		mrc p15,0,r0,c11,c11
 693 03f0 EE1E0F1E 	.LVL57:
 694              		mov	pc, lr
 695 03f4 E1A0F00E 	.LVL58:
 696              	.L122:
 697              		.loc 1 386 0
 698              		mrc p15,0,r0,c10,c10
 699 03f8 EE1D0F1D 	.LVL59:
 700              		mov	pc, lr
 701 03fc E1A0F00E 	.LVL60:
 702              	.L121:
 703              		.loc 1 385 0
 704              		mrc p15,0,r0, c9, c9
 705 0400 EE1C0F1C 	.LVL61:
 706              		mov	pc, lr
 707 0404 E1A0F00E 	.LVL62:
 708              	.L120:
 709              		.loc 1 384 0
 710              		mrc p15,0,r0, c8, c8
 711 0408 EE1B0F1B 	.LVL63:
 712              		mov	pc, lr
 713 040c E1A0F00E 	.LVL64:
 714              	.L119:
 715              		.loc 1 383 0
 716              		mrc p15,0,r0, c7, c7
 717 0410 EE1A0F1A 	.LVL65:
 718              		mov	pc, lr
 719 0414 E1A0F00E 	.LVL66:
 720              	.L118:
 721              		.loc 1 382 0
 722              		mrc p15,0,r0, c6, c6
 723 0418 EE190F19 	.LVL67:
 724              		mov	pc, lr
 725 041c E1A0F00E 	.LVL68:
 726              	.L117:
 727              		.loc 1 381 0
 728              		mrc p15,0,r0, c5, c5
 729 0420 EE180F18 	.LVL69:
 730              		mov	pc, lr
 731 0424 E1A0F00E 	.LVL70:
 732              	.L116:
 733              		.loc 1 380 0
 734              		mrc p15,0,r0, c4, c4
 735 0428 EE170F17 	.LVL71:
 736              		mov	pc, lr
 737 042c E1A0F00E 	.LVL72:
 738              	.L115:
 739              		.loc 1 379 0
 740              		mrc p15,0,r0, c3, c3
 741 0430 EE160F16 	.LVL73:
 742              		mov	pc, lr
 743 0434 E1A0F00E 	.LVL74:
 744              	.L114:
 745              		.loc 1 378 0
 746              		mrc p15,0,r0, c2, c2
 747 0438 EE150F15 	.LVL75:
 748              		mov	pc, lr
 749 043c E1A0F00E 	.LVL76:
 750              	.L113:
 751              		.loc 1 377 0
 752              		mrc p15,0,r0, c1, c1
 753 0440 EE140F14 	.LVL77:
 754              		mov	pc, lr
 755 0444 E1A0F00E 	.LVL78:
 756              	.L112:
 757              		.loc 1 376 0
 758              		mrc p15,0,r0, c0, c0
 759 0448 EE130F13 	.LVL79:
 760              		mov	pc, lr
 761 044c E1A0F00E 	.LFE19:
 763              		.align	2
 764              		.global	set_syscpreg
 766              	set_syscpreg:
 767 0454 E1A0F00E 	.LFB20:
 768              		.loc 1 401 0
 769              		@ args = 0, pretend = 0, frame = 0
 770              		@ frame_needed = 0, uses_anonymous_args = 0
 771 0458 EE110F11 		@ link register save eliminated.
 772              	.LVL80:
 773 045c E1A0F00E 		and	r1, r1, #255
 774              		.loc 1 402 0
 775              		sub	r1, r1, #6
 776              	.LVL81:
 777 0460 EE100F10 		.loc 1 401 0
 778              		@ lr needed for prologue
 779 0464 E1A0F00E 		.loc 1 402 0
 780              		cmp	r1, #7
 781              		ldrls	pc, [pc, r1, asl #2]
 782              		b	.L138
 783              		.p2align 2
 784              	.L137:
 785              		.word	.L133
 786              		.word	.L138
 396:../lib/io_driver.c **** 
 397:../lib/io_driver.c **** // ******************************************************************************
 398:../lib/io_driver.c **** // write system coprocessor register x
 399:../lib/io_driver.c ****    void set_syscpreg(unsigned long _cp_val, unsigned char index)
 400:../lib/io_driver.c **** // ******************************************************************************
 401:../lib/io_driver.c **** {
 787              		mcr p15,0,r0,c13,c13,0
 788              	.L138:
 789              		mov	pc, lr
 790              	.L133:
 791              		.loc 1 409 0
 792 0468 E20110FF 		mcr p15,0,r0, c6, c6,0
 402:../lib/io_driver.c **** 	switch(index){
 793              	c, lr
 794 046c E2411006 	.L134:
 795              		.loc 1 414 0
 796              		mcr p15,0,r0,c11,c11,0
 797              		mov	pc, lr
 798              	.L135:
 799 0470 E3510007 		.loc 1 415 0
 800 0474 979FF101 		mcr p15,0,r0,c12,c12,0
 801 0478 EA000008 		mov	pc, lr
 802              	.LFE20:
 804 047c 000004A4 		.align	2
 805 0480 000004A0 		.global	io_enable_xint
 807 0488 000004A0 	io_enable_xint:
 808 048c 000004A0 	.LFB23:
 809 0490 000004AC 		.loc 1 444 0
 810 0494 000004B4 		@ args = 0, pretend = 0, frame = 0
 811 0498 0000049C 		@ frame_needed = 0, uses_anonymous_args = 0
 812              		@ link register save eliminated.
 403:../lib/io_driver.c **** //		case ID_REG_0:   asm volatile ("mcr p15,0,%0, c0, c0,0" : /* no outputs */ : "r" (_cp_val)); br
 404:../lib/io_driver.c **** //		case ID_REG_1:   asm volatile ("mcr p15,0,%0, c1, c1,0" : /* no outputs */ : "r" (_cp_val)); br
 405:../lib/io_driver.c **** //		case ID_REG_2:   asm volatile ("mcr p15,0,%0, c2, c2,0" : /* no outputs */ : "r" (_cp_val)); br
 406:../lib/io_driver.c **** //		case 3:          asm volatile ("mcr p15,0,%0, c3, c3,0" : /* no outputs */ : "r" (_cp_val)); br
 407:../lib/io_driver.c **** //		case 4:          asm volatile ("mcr p15,0,%0, c4, c4,0" : /* no outputs */ : "r" (_cp_val)); br
 408:../lib/io_driver.c **** //		case 5:          asm volatile ("mcr p15,0,%0, c5, c5,0" : /* no outputs */ : "r" (_cp_val)); br
 409:../lib/io_driver.c **** 		case SYS_CTRL_0: asm volatile ("mcr p15,0,%0, c6, c6,0" : /* no outputs */ : "r" (_cp_val)); brea
 410:../lib/io_driver.c **** //		case 7:          asm volatile ("mcr p15,0,%0, c7, c7,0" : /* no outputs */ : "r" (_cp_val)); br
 411:../lib/io_driver.c **** //		case CSTAT:      asm volatile ("mcr p15,0,%0, c8, c8,0" : /* no outputs */ : "r" (_cp_val)); br
 412:../lib/io_driver.c **** //		case ADR_FB:     asm volatile ("mcr p15,0,%0, c9, c9,0" : /* no outputs */ : "r" (_cp_val)); br
 413:../lib/io_driver.c **** //		case 10:         asm volatile ("mcr p15,0,%0,c10,c10,0" : /* no outputs */ : "r" (_cp_val)); br
 414:../lib/io_driver.c **** 		case LFSR_POLY:  asm volatile ("mcr p15,0,%0,c11,c11,0" : /* no outputs */ : "r" (_cp_val)); brea
 415:../lib/io_driver.c **** 		case LFSR_DATA:  asm volatile ("mcr p15,0,%0,c12,c12,0" : /* no outputs */ : "r" (_cp_val)); brea
 416:../lib/io_driver.c **** 		case SYS_IO:     asm volatile ("mcr p15,0,%0,c13,c13,0" : /* no outputs */ : "r" (_cp_val)); brea
 813              	logue
 814 049c EE0D0F1D 	.LBB6:
 815              	.LBB7:
 816 04a0 E1A0F00E 		.loc 1 428 0
 817              		 mrs r3, cpsr
 818              	.LVL82:
 819 04a4 EE060F16 	.LBE7:
 820 04a8 E1A0F00E 	.LBE6:
 821              	.LBB8:
 822              	.LBB9:
 823 04ac EE0B0F1B 		.loc 1 437 0
 824 04b0 E1A0F00E 		bic	r3, r3, #192
 825              	.LVL83:
 826              		 msr cpsr, r3
 827 04b4 EE0C0F1C 	.LBE9:
 828 04b8 E1A0F00E 	.LBE8:
 829              		.loc 1 448 0
 830              		mov	pc, lr
 831              	.LFE23:
 833              		.align	2
 834              		.global	io_disable_xint
 417:../lib/io_driver.c **** //		case 14:         asm volatile ("mcr p15,0,%0,c14,c14,0" : /* no outputs */ : "r" (_cp_val)); br
 418:../lib/io_driver.c **** //		case 15:         asm volatile ("mcr p15,0,%0,c15,c15,0" : /* no outputs */ : "r" (_cp_val)); br
 419:../lib/io_driver.c **** 		default:         break;
 420:../lib/io_driver.c **** 	}
 421:../lib/io_driver.c **** }
 422:../lib/io_driver.c **** // ******************************************************************************
 423:../lib/io_driver.c **** // read CMSR value
 424:../lib/io_driver.c ****    static inline unsigned long get_cmsr(void)
 425:../lib/io_driver.c **** // ******************************************************************************
 426:../lib/io_driver.c **** {
 427:../lib/io_driver.c **** 	unsigned long _cmsr;
 428:../lib/io_driver.c **** 	asm volatile (" mrs %0, cpsr" : "=r" (_cmsr) : /* no inputs */  );
 429:../lib/io_driver.c **** 	return _cmsr;
 430:../lib/io_driver.c **** }
 431:../lib/io_driver.c **** 
 432:../lib/io_driver.c **** // ******************************************************************************
 433:../lib/io_driver.c **** // write CMSR value
 434:../lib/io_driver.c ****    static inline void set_cmsr(unsigned long _cmsr)
 435:../lib/io_driver.c **** // ******************************************************************************
 436:../lib/io_driver.c **** {
 437:../lib/io_driver.c **** 	asm volatile (" msr cpsr, %0" : /* no outputs */ : "r" (_cmsr)  );
 438:../lib/io_driver.c **** }
 439:../lib/io_driver.c **** 
 440:../lib/io_driver.c **** // ******************************************************************************
 441:../lib/io_driver.c **** // Enable all external INTs
 442:../lib/io_driver.c ****    void io_enable_xint(void)
 443:../lib/io_driver.c **** // ******************************************************************************
 444:../lib/io_driver.c **** {
 836              	:
 837              		.loc 1 454 0
 838              		@ args = 0, pretend = 0, frame = 0
 839              		@ frame_needed = 0, uses_anonymous_args = 0
 840              		@ link register save eliminated.
 841              		@ lr needed for prologue
 842              	.LBB14:
 843              	.LBB15:
 844 04bc E10F3000 		.loc 1 428 0
 845              		 mrs r3, cpsr
 846              	.LVL84:
 847              	.LBE15:
 848              	.LBE14:
 849              	.LBB16:
 850              	.LBB17:
 851 04c0 E3C330C0 		.loc 1 437 0
 852              		orr	r3, r3, #192
 853 04c4 E129F003 	.LVL85:
 854              		 msr cpsr, r3
 855              	.LBE17:
 445:../lib/io_driver.c **** 	unsigned long _cmsr = get_cmsr();
 446:../lib/io_driver.c **** 	_cmsr = _cmsr & ~(1<<CMSR_FIQ) &~(1<<CMSR_IRQ);
 447:../lib/io_driver.c **** 	set_cmsr(_cmsr);
 448:../lib/io_driver.c **** }
 856              	0
 857 04c8 E1A0F00E 		mov	pc, lr
 858              	.LFE24:
 860              		.align	2
 861              		.global	long_to_hex_string
 863              	long_to_hex_string:
 864              	.LFB25:
 449:../lib/io_driver.c **** 
 450:../lib/io_driver.c **** // ******************************************************************************
 451:../lib/io_driver.c **** // Disable all global IBTs
 452:../lib/io_driver.c ****    void io_disable_xint(void)
 453:../lib/io_driver.c **** // ******************************************************************************
 454:../lib/io_driver.c **** {
 865              	"../lib/utilities.c"
 866              		.loc 2 9 0
 867              		@ args = 0, pretend = 0, frame = 0
 868              		@ frame_needed = 0, uses_anonymous_args = 0
 869              	.LVL86:
 870              		stmfd	sp!, {r4, lr}
 871              	.LCFI2:
 872              		.loc 2 9 0
 873 04cc E10F3000 		and	r4, r2, #255
 874              		.loc 2 14 0
 875              		cmp	r4, #8
 876              		movhi	r4, #8
 877              		bhi	.L146
 878              	.LVL87:
 879              		.loc 2 16 0
 880 04d0 E38330C0 		cmp	r4, #0
 881              		.loc 2 39 0
 882 04d4 E129F003 		moveq	r4, #1
 883              	.L146:
 884              		mov	r2, r1
 455:../lib/io_driver.c **** 	unsigned long _cmsr = get_cmsr();
 456:../lib/io_driver.c **** 	_cmsr = _cmsr | (1<<CMSR_FIQ) | (1<<CMSR_IRQ);
 457:../lib/io_driver.c **** 	set_cmsr(_cmsr);
 458:../lib/io_driver.c **** }
 885              	.LVL89:
 886 04d8 E1A0F00E 	.L148:
 887              		.loc 2 22 0
 888              		mov	r3, lr, asl #2
 889              		.loc 2 21 0
 890              		cmp	lr, #1
 891              		.loc 2 22 0
 892              		sub	r3, r3, #4
 893              		.loc 2 21 0
 894              		mov	ip, r0
   1:../lib/utilities.c **** #include "utilities.h"
   2:../lib/utilities.c **** 
   3:../lib/utilities.c **** // ############################################################################################
   4:../lib/utilities.c **** // Convert 4/8/12/16/20/24/28/32 bit hexadecimal value to ASCII string
   5:../lib/utilities.c ****    void long_to_hex_string(unsigned long data,    // max 32 bit data word
   6:../lib/utilities.c ****                            unsigned char *buffer, // buffer to store the string
   7:../lib/utilities.c **** 						   unsigned char numbers) // number of places, max 8
   8:../lib/utilities.c **** // ############################################################################################
   9:../lib/utilities.c **** {
 895              	loc 2 22 0
 896              		movhi	ip, r0, lsr r3
 897              		.loc 2 26 0
 898              		sub	r3, lr, #1
 899 04dc E92D4010 		.loc 2 25 0
 900              		and	ip, ip, #15
 901              	.LVL91:
 902 04e0 E20240FF 		.loc 2 26 0
  10:../lib/utilities.c **** 	unsigned char temp_char = 0;
  11:../lib/utilities.c **** 	unsigned long temp_data = 0;
  12:../lib/utilities.c **** 
  13:../lib/utilities.c **** 	// fit into range
  14:../lib/utilities.c **** 	if(numbers > 8)
 903              	 r3, #255
 904 04e4 E3540008 		.loc 2 29 0
 905 04e8 83A04008 		cmp	ip, #9
 906 04ec 8A000001 		.loc 2 30 0
 907              		add	r3, ip, #48
  15:../lib/utilities.c **** 		numbers = 8;
  16:../lib/utilities.c **** 	if(numbers < 1)
 908              	2:
 909 04f0 E3540000 		.loc 2 32 0
  17:../lib/utilities.c **** 		numbers = 1;
  18:../lib/utilities.c **** 
  19:../lib/utilities.c **** 	while(numbers > 0){
  20:../lib/utilities.c **** 		// isolate one 4-bit value
  21:../lib/utilities.c **** 		if(numbers > 1)
  22:../lib/utilities.c **** 			temp_data = data >> ((numbers-1)*4);
  23:../lib/utilities.c **** 		else
  24:../lib/utilities.c **** 			temp_data = data;
  25:../lib/utilities.c **** 		temp_data = temp_data & 0x0000000F;
  26:../lib/utilities.c **** 		numbers--;
  27:../lib/utilities.c **** 
  28:../lib/utilities.c **** 		// convert 4-bit value temp_data to char temp_char
  29:../lib/utilities.c **** 		if(temp_data < 10)
  30:../lib/utilities.c **** 			temp_char = '0' + temp_data;
  31:../lib/utilities.c **** 		else
  32:../lib/utilities.c **** 			temp_char = 'A' + temp_data - 10;
  33:../lib/utilities.c **** 
  34:../lib/utilities.c **** 		// save character
  35:../lib/utilities.c **** 		*buffer++ = temp_char;
  36:../lib/utilities.c **** 	}
  37:../lib/utilities.c **** 
  38:../lib/utilities.c **** 	*buffer++ = 0; // terminate string
  39:../lib/utilities.c **** }
 910              	ddhi	r3, ip, #55
 911 04f4 03A04001 		.loc 2 19 0
 912              		cmp	lr, #0
 913 04f8 E1A02001 		.loc 2 35 0
 914              		strb	r3, [r2], #1
 915 04fc E1A0E004 		.loc 2 19 0
 916              		bne	.L148
 917              		.loc 2 38 0
 918              		sub	r3, r4, #1
 919 0500 E1A0310E 	.LVL93:
 920              		and	r3, r3, #255
 921 0504 E35E0001 		add	r3, r1, r3
 922              		strb	lr, [r3, #1]
 923 0508 E2433004 		.loc 2 39 0
 924              		ldmfd	sp!, {r4, pc}
 925 050c E1A0C000 	.LFE25:
 927              		.align	2
 928 0510 81A0C330 		.global	get_adc
 930 0514 E24E3001 	get_adc:
 931              	.LFB26:
 932 0518 E20CC00F 		.loc 2 45 0
 933              		@ args = 0, pretend = 0, frame = 0
 934              		@ frame_needed = 0, uses_anonymous_args = 0
 935 051c E203E0FF 	.LVL94:
 936              		stmfd	sp!, {r4, lr}
 937 0520 E35C0009 	.LCFI3:
 938              		.loc 2 45 0
 939 0524 E28C3030 		mov	r4, r0
 940              		.loc 2 48 0
 941              		cmp	r4, #7
 942 0528 828C3037 		.loc 2 52 0
 943              		mov	r1, #16
 944 052c E35E0000 		mov	r0, #1
 945              	.LVL95:
 946 0530 E4C23001 		.loc 2 48 0
 947              		bls	.L165
 948 0534 1AFFFFF1 		.loc 2 58 0
 949              		mov	r0, #0
 950 0538 E2443001 		ldmfd	sp!, {r4, pc}
 951              	.L165:
 952 053c E20330FF 		.loc 2 52 0
 953 0540 E0813003 		bl	io_spi0_config
 954 0544 E5C3E001 		.loc 2 53 0
 955              		mov	r0, #6
 956 0548 E8BD8010 		bl	io_spi0_enable
 957              		.loc 2 56 0
 958              		mov	r0, #0
 959              		bl	io_spi0_trans
 960              		.loc 2 57 0
 961              		mov	r0, r4, asl #11
 962              		.loc 2 58 0
 963              		ldmfd	sp!, {r4, lr}
  40:../lib/utilities.c **** 
  41:../lib/utilities.c **** // ############################################################################################
  42:../lib/utilities.c **** // read external ADC value
  43:../lib/utilities.c ****    unsigned int get_adc(int adc_index) // adc 0..7
  44:../lib/utilities.c **** // ############################################################################################
  45:../lib/utilities.c **** {
 964              	.-get_adc
 965              		.align	2
 966              		.global	delay
 968 054c E92D4010 	delay:
 969              	.LFB27:
 970              		.loc 2 64 0
 971 0550 E1A04000 		@ args = 0, pretend = 0, frame = 0
  46:../lib/utilities.c **** 	unsigned long temp;
  47:../lib/utilities.c **** 
  48:../lib/utilities.c **** 	if ((adc_index < 0) || (adc_index > 7))
 972              	_needed = 0, uses_anonymous_args = 0
 973 0554 E3540007 		@ link register save eliminated.
  49:../lib/utilities.c **** 		return 0;
  50:../lib/utilities.c **** 
  51:../lib/utilities.c **** 	// config spi
  52:../lib/utilities.c **** 	io_spi0_config(1,16); // auto assert cs, 16 bit transfer
 974              	VL96:
 975 0558 E3A01010 		.loc 2 65 0
 976 055c E3A00001 		rsb	r3, r0, r0, asl #5
 977              		add	r0, r0, r3, asl #2
 978              	.LVL97:
 979 0560 9A000001 		add	r0, r0, r0, asl #2
  53:../lib/utilities.c **** 	io_spi0_enable(adc_cs);
  54:../lib/utilities.c **** 
  55:../lib/utilities.c **** 	temp = adc_index * 2048;
  56:../lib/utilities.c **** 	io_spi0_trans(0); // dummy read
  57:../lib/utilities.c **** 	return (unsigned int)io_spi0_trans(temp);
  58:../lib/utilities.c **** }
 980              	0, r0, asl #4
 981 0564 E3A00000 	.LVL98:
 982 0568 E8BD8010 		.loc 2 66 0
 983              		cmp	r0, #0
 984              		.loc 2 64 0
 985 056c EBFFFFFE 		@ lr needed for prologue
 986              		.loc 2 66 0
 987 0570 E3A00006 		movle	pc, lr
 988 0574 EBFFFFFE 	.L170:
 989              		.loc 2 67 0
 990 0578 E3A00000 		NOP
 991 057c EBFFFFFE 		.loc 2 66 0
 992              		subs	r0, r0, #1
 993 0580 E1A00584 		bne	.L170
 994              		mov	pc, lr
 995 0584 E8BD4010 	.LFE27:
 997 0588 EAFFFFFE 		.align	2
 998              		.global	string_cmpc
 1000              	string_cmpc:
 1001              	.LFB28:
 1002              		.loc 2 76 0
 1003              		@ args = 0, pretend = 0, frame = 0
 1004              		@ frame_needed = 0, uses_anonymous_args = 0
  59:../lib/utilities.c **** 
  60:../lib/utilities.c **** // ############################################################################################
  61:../lib/utilities.c **** // simple delay routine
  62:../lib/utilities.c ****    void delay(int time) // waits time*10000 clock ticks
  63:../lib/utilities.c **** // ############################################################################################
  64:../lib/utilities.c **** {
 1005              	minated.
 1006              	.LVL99:
 1007              		.loc 2 77 0
 1008              		ands	ip, r2, #255
 1009              		.loc 2 76 0
  65:../lib/utilities.c **** 	time = time*2500*4;
 1010              	 needed for prologue
 1011 058c E0603280 		.loc 2 77 0
 1012 0590 E0800103 		beq	.L173
 1013              	.LVL100:
 1014 0594 E0800100 		.loc 2 78 0
 1015 0598 E1A00200 		ldrb	r2, [r0, #0]	@ zero_extendqisi2
 1016              		ldrb	r3, [r1, #0]	@ zero_extendqisi2
  66:../lib/utilities.c **** 	while(time > 0){
 1017              	, r3
 1018 059c E3500000 		beq	.L177
 1019              		b	.L175
 1020              	.L178:
 1021              	.LVL101:
 1022 05a0 D1A0F00E 		ldrb	r2, [r0, #1]!	@ zero_extendqisi2
 1023              	.LVL102:
  67:../lib/utilities.c **** 		asm volatile ("NOP");
 1024              	3, [r1, #1]!	@ zero_extendqisi2
 1025 05a4 E1A00000 		cmp	r2, r3
 1026              		bne	.L175
 1027 05a8 E2500001 	.LVL103:
 1028 05ac 1AFFFFFC 	.L177:
 1029 05b0 E1A0F00E 		.loc 2 80 0
 1030              		sub	r3, ip, #1
 1031              		.loc 2 77 0
 1032              		ands	ip, r3, #255
 1033              		bne	.L178
 1034              	.LVL104:
 1035              	.L173:
 1036              		mov	r0, #1
  68:../lib/utilities.c **** 		time--;
  69:../lib/utilities.c **** 	}
  70:../lib/utilities.c **** }
  71:../lib/utilities.c **** 
  72:../lib/utilities.c **** // ############################################################################################
  73:../lib/utilities.c **** // String compare, buffered string with immediate const char string
  74:../lib/utilities.c ****    unsigned char string_cmpc(unsigned char *string1, const char *string2, unsigned char length)
  75:../lib/utilities.c **** // ############################################################################################
  76:../lib/utilities.c **** {
 1037              	c 2 83 0
 1038              		mov	pc, lr
 1039              	.LVL106:
 1040              	.L175:
 1041              		.loc 2 77 0
  77:../lib/utilities.c **** 	while(length != 0){
 1042              	r0, #0
 1043 05b4 E212C0FF 	.LVL107:
 1044              		mov	pc, lr
 1045              	.LFE28:
 1047 05b8 0A00000B 		.align	2
 1048              		.global	uart0_printf
  78:../lib/utilities.c **** 		if(*string1++ != (unsigned char)*string2++)
 1049              	uart0_printf, %function
 1050 05bc E5D02000 	uart0_printf:
 1051 05c0 E5D13000 	.LFB29:
 1052 05c4 E1520003 		.file 3 "../lib/uart.c"
 1053 05c8 0A000004 		.loc 3 7 0
 1054 05cc EA000008 		@ args = 0, pretend = 0, frame = 0
 1055              		@ frame_needed = 0, uses_anonymous_args = 0
 1056              	.LVL108:
 1057 05d0 E5F02001 		stmfd	sp!, {r4, lr}
 1058              	.LCFI4:
 1059 05d4 E5F13001 		.loc 3 7 0
 1060 05d8 E1520003 		mov	r4, r0
 1061 05dc 1A000004 		.loc 3 10 0
 1062              		ldrb	r0, [r0, #0]	@ zero_extendqisi2
 1063              	.LVL109:
  79:../lib/utilities.c **** 			return(0); // missmatch
  80:../lib/utilities.c **** 		length--;
 1064              	e	.L186
 1065 05e0 E24C3001 		b	.L182
 1066              	.LVL110:
 1067 05e4 E213C0FF 	.L188:
 1068 05e8 1AFFFFF8 		ldrb	r0, [r4, #1]!	@ zero_extendqisi2
 1069              	.LVL111:
 1070              		cmp	r0, #0
 1071 05ec E3A00001 		beq	.L182
 1072              	.L186:
  81:../lib/utilities.c **** 	}
  82:../lib/utilities.c **** 	return(1); // match
  83:../lib/utilities.c **** }
 1073              	1 0
 1074 05f0 E1A0F00E 		bl	io_uart0_send_byte
 1075              	.LVL112:
 1076              		cmp	r0, #0
 1077              		bgt	.L188
 1078 05f4 E3A00000 	.LVL113:
 1079              	.L182:
 1080 05f8 E1A0F00E 		.loc 3 16 0
 1081              		mov	r0, r4
 1082              	.LVL114:
 1083              		ldmfd	sp!, {r4, pc}
 1084              	.LFE29:
 1086              		.section	.rodata
 1087              		.align	2
 1088              	.LC0:
   1:../lib/uart.c **** #include "uart.h"
   2:../lib/uart.c **** 
   3:../lib/uart.c **** // ############################################################################################
   4:../lib/uart.c **** // Print text string via UART 0
   5:../lib/uart.c ****    const char *uart0_printf(const char *string)
   6:../lib/uart.c **** // ############################################################################################
   7:../lib/uart.c **** {
 1089              	0"
 1090              		.text
 1091              		.align	2
 1092              		.global	uart0_scanf
 1094              	uart0_scanf:
 1095              	.LFB30:
 1096 0600 E1A04000 		.loc 3 22 0
   8:../lib/uart.c **** 	char ch;
   9:../lib/uart.c **** 
  10:../lib/uart.c **** 	while ((ch = *string)){
 1097              	= 0, pretend = 0, frame = 0
 1098 0604 E5D00000 		@ frame_needed = 0, uses_anonymous_args = 0
 1099              	.LVL115:
 1100 0608 E3500000 		stmfd	sp!, {r4, r5, r6, lr}
 1101 060c 1A000003 	.LCFI5:
 1102 0610 EA000005 		.loc 3 25 0
 1103              		subs	r4, r1, #0
 1104              		.loc 3 22 0
 1105 0614 E5F40001 		mov	r5, r0
 1106              		and	r6, r2, #255
 1107 0618 E3500000 		.loc 3 25 0
 1108 061c 0A000002 		ble	.L190
 1109              	.LVL116:
  11:../lib/uart.c **** 		if (io_uart0_send_byte(ch)<=0)
 1110              	3 26 0
 1111 0620 EBFFFFFE 		bl	io_uart0_read_byte
 1112              	.LVL117:
 1113 0624 E3500000 	.LVL118:
 1114 0628 CAFFFFF9 		.loc 3 27 0
 1115              		cmn	r0, #1
 1116              		.loc 3 28 0
  12:../lib/uart.c **** 			break;
  13:../lib/uart.c **** 		string++;
  14:../lib/uart.c **** 	}
  15:../lib/uart.c **** 	return string;
  16:../lib/uart.c **** }
 1117              	, r0, #255
 1118 062c E1A00004 	.LVL119:
 1119              		.loc 3 27 0
 1120 0630 E8BD8010 		beq	.L192
 1121              		.loc 3 30 0
 1122              		cmp	r6, #1
 1123              	.LVL120:
 1124              		.loc 3 29 0
 1125              		strb	r3, [r5, #0]
 1126 0000 0000     	.LVL121:
 1127 0002 0000     		.loc 3 31 0
 1128              		mov	r0, r3
 1129              	.LVL122:
 1130              		.loc 3 29 0
 1131              		add	r5, r5, #1
 1132              		.loc 3 30 0
  17:../lib/uart.c **** 
  18:../lib/uart.c **** // ############################################################################################
  19:../lib/uart.c **** // Read text string via UART 0
  20:../lib/uart.c ****    void uart0_scanf(unsigned char *buffer, int length, unsigned char en_echo)
  21:../lib/uart.c **** // ############################################################################################
  22:../lib/uart.c **** {
 1133              	23:
 1134              	.L194:
 1135              		.loc 3 32 0
 1136              		sub	r4, r4, #1
 1137 0634 E92D4070 	.LVL124:
 1138              	.L192:
  23:../lib/uart.c **** 	int temp = 0;
  24:../lib/uart.c **** 
  25:../lib/uart.c **** 	while(length > 0){
 1139              	3 25 0
 1140 0638 E2514000 		cmp	r4, #0
 1141              		bgt	.L197
 1142 063c E1A05000 	.LVL125:
 1143 0640 E20260FF 	.L190:
 1144              		.loc 3 35 0
 1145 0644 DA00000B 		ldr	r3, .L200
 1146              	.LVL126:
 1147              		strb	r3, [r5, #0]
  26:../lib/uart.c **** 		temp = io_uart0_read_byte();
 1148              	6 0
 1149 0648 EBFFFFFE 		ldmfd	sp!, {r4, r5, r6, pc}
 1150              	.LVL127:
 1151              	.L199:
  27:../lib/uart.c **** 		if(temp != -1){
 1152              	c 3 31 0
 1153 064c E3700001 		bl	io_uart0_send_byte
  28:../lib/uart.c **** 			temp = (unsigned char)(temp & 0x000000FF);
 1154              	VL128:
 1155 0650 E20030FF 		b	.L194
 1156              	.L201:
 1157              		.align	2
 1158 0654 0A000005 	.L200:
  29:../lib/uart.c **** 			*buffer++ = temp;
  30:../lib/uart.c **** 			if(en_echo == 1)
 1159              	d	.LC0
 1160 0658 E3560001 	.LFE30:
 1162              		.align	2
 1163 065c E5C53000 		.global	uart0_print_buffer
  31:../lib/uart.c **** 				io_uart0_send_byte(temp); // echo
 1165              	print_buffer:
 1166 0660 E1A00003 	.LFB31:
 1167              		.loc 3 42 0
 1168              		@ args = 0, pretend = 0, frame = 0
 1169 0664 E2855001 		@ frame_needed = 0, uses_anonymous_args = 0
 1170              	.LVL129:
 1171 0668 0A000005 		stmfd	sp!, {r4, r5, lr}
 1172              	.LCFI6:
 1173              		.loc 3 44 0
  32:../lib/uart.c **** 			length--;
 1174              	 r1, #0
 1175 066c E2444001 		.loc 3 42 0
 1176              		mov	r5, r0
 1177              		.loc 3 44 0
 1178              		ldmlefd	sp!, {r4, r5, pc}
 1179 0670 E3540000 	.LVL130:
 1180 0674 CAFFFFF3 	.L206:
 1181              		.loc 3 46 0
 1182              		ldrb	r0, [r5], #1	@ zero_extendqisi2
  33:../lib/uart.c **** 		}
  34:../lib/uart.c **** 	}
  35:../lib/uart.c **** 	*buffer="\0";
 1183              		bl	io_uart0_send_byte
 1184 0678 E59F300C 	.LVL132:
 1185              		.loc 3 44 0
 1186 067c E5C53000 		subs	r4, r4, #1
  36:../lib/uart.c **** }
 1187              		.L206
 1188 0680 E8BD8070 		ldmfd	sp!, {r4, r5, pc}
 1189              	.LFE31:
 1191              		.align	2
 1192 0684 EBFFFFFE 		.global	timer0_isr
 1194 0688 EAFFFFF7 	timer0_isr:
 1195              	.LFB32:
 1196              		.file 4 "main.c"
 1197              		.loc 4 18 0
 1198 068c 00000000 		@ Interrupt Service Routine.
 1199              		@ args = 0, pretend = 0, frame = 0
 1200              		@ frame_needed = 0, uses_anonymous_args = 0
 1201              		sub	lr, lr, #4
 1202              		stmfd	sp!, {r0, r1, r2, r3, ip, lr}
 1203              	.LCFI7:
 1204              		.loc 4 20 0
 1205              		mov	r0, #13
  37:../lib/uart.c **** 
  38:../lib/uart.c **** // ############################################################################################
  39:../lib/uart.c **** // Print character buffer via UART 0
  40:../lib/uart.c ****    void uart0_print_buffer(unsigned char *buffer, int size)
  41:../lib/uart.c **** // ############################################################################################
  42:../lib/uart.c **** {
 1206              	ov	r1, #13
 1207              		eor	r0, r0, #1
 1208              		bl	set_syscpreg
 1209              		.loc 4 23 0
 1210 0690 E92D4030 		mov	r2, #0
 1211              		mvn	r3, #0
  43:../lib/uart.c **** 	unsigned char char_buffer = 0;
  44:../lib/uart.c **** 	while(size > 0){
 1212              	2, [r3, #-4047]
 1213 0694 E2514000 		.loc 4 24 0
 1214              		ldmfd	sp!, {r0, r1, r2, r3, ip, pc}^
 1215 0698 E1A05000 	.LFE32:
 1217 069c D8BD8030 		.section	.rodata.str1.4,"aMS",%progbits,1
 1218              		.align	2
 1219              	.LC1:
  45:../lib/uart.c **** 		char_buffer = *buffer++;
  46:../lib/uart.c **** 		io_uart0_send_byte((int)char_buffer);
 1220              	"\015\012\015\012STORM SoC Basic Configuration\015\012"
 1221 06a0 E4D50001 		.ascii	"\000"
 1222              		.align	2
 1223 06a4 EBFFFFFE 	.LC2:
 1224              		.ascii	"Demo program\015\012\015\012\000"
 1225              		.align	2
 1226 06a8 E2544001 	.LC3:
 1227 06ac 1AFFFFFB 		.ascii	"Press any key!\015\012\000"
 1228 06b0 E8BD8030 		.text
 1229              		.align	2
 1230              		.global	main
 1232              	main:
 1233              	.LFB33:
 1234              		.loc 4 29 0
 1235              		@ args = 0, pretend = 0, frame = 0
 1236              		@ frame_needed = 0, uses_anonymous_args = 0
   1:main.c        **** #include "../lib/storm_core.h"
   2:main.c        **** #include "../lib/storm_soc_basic.h"
   3:main.c        **** #include "../lib/io_driver.c"
   4:main.c        **** #include "../lib/utilities.c"
   5:main.c        **** #include "../lib/uart.c"
   6:main.c        **** 
   7:main.c        **** // +------------------------------+
   8:main.c        **** // |    Simple Program Demo       |
   9:main.c        **** // +------------------------------+
  10:main.c        **** 
  11:main.c        **** // This program uses the system timer to toggle LED(0) of the System IO
  12:main.c        **** // port every second. Also a demo output to the terminal is made.
  13:main.c        **** // Received UART transmission are echoed.
  14:main.c        **** 
  15:main.c        **** 
  16:main.c        **** /* ---- IRQ: Timer ISR ---- */
  17:main.c        **** void __attribute__ ((interrupt("IRQ"))) timer0_isr(void)
  18:main.c        **** {
 1237              		r2, #49807360
 1238              		add	r2, r2, #192512
 1239              		.loc 4 33 0
 1240              		mvn	r1, #61440
 1241 06b4 E24EE004 		.loc 4 34 0
 1242 06b8 E92D500F 		add	r2, r2, #128
 1243              		.loc 4 33 0
  19:main.c        **** 	// toggle status led
  20:main.c        **** 	set_syscpreg((get_syscpreg(SYS_IO) ^ 0x01), SYS_IO);
 1244              	, #0
 1245 06bc E3A0000D 		str	r3, [r1, #-3583]
 1246 06c0 EBFFFFFE 		.loc 4 34 0
 1247 06c4 E3A0100D 		str	r2, [r1, #-3579]
 1248 06c8 E2200001 		.loc 4 36 0
 1249 06cc EBFFFFFE 		ldr	r2, .L221
  21:main.c        **** 
  22:main.c        **** 	// acknowledge interrupt
  23:main.c        **** 	VICVectAddr = 0;
 1250              	0, #0
 1251 06d0 E3A02000 		.loc 4 35 0
 1252 06d4 E3E03000 		add	r3, r3, #7
 1253 06d8 E5032FCF 		str	r3, [r1, #-3575]
  24:main.c        **** }
 1254              	c 4 36 0
 1255 06dc E8FD900F 		str	r2, [r0, #-4031]
 1256              		.loc 4 37 0
 1257              		add	r3, r3, #25
 1258              		.loc 4 38 0
 1259              		mov	r2, #1
 1260              		.loc 4 37 0
 1261 0000 0D0A0D0A 		str	r3, [r0, #-3967]
 1261      53544F52 
 1261      4D20536F 
 1261      43204261 
 1261      73696320 
 1262 0023 00       		.loc 4 29 0
 1263              		str	lr, [sp, #-4]!
 1264              	.LCFI8:
 1265 0024 44656D6F 		.loc 4 38 0
 1265      2070726F 
 1265      6772616D 
 1265      0D0A0D0A 
 1265      00
 1266 0035 000000   		str	r2, [r0, #-4079]
 1267              		.loc 4 39 0
 1268 0038 50726573 		bl	io_enable_xint
 1268      7320616E 
 1268      79206B65 
 1268      79210D0A 
 1268      00
 1269 0049 000000   		.loc 4 42 0
 1270              		ldr	r0, .L221+4
 1271              		bl	uart0_printf
 1272              		.loc 4 43 0
 1273              		ldr	r0, .L221+8
 1274              		bl	uart0_printf
  25:main.c        **** 
  26:main.c        **** 
  27:main.c        **** /* ---- Main function ---- */
  28:main.c        **** int main(void)
  29:main.c        **** {
 1275              	 .L221+12
 1276              		bl	uart0_printf
 1277              	.L219:
  30:main.c        **** 	int temp;
  31:main.c        **** 
  32:main.c        **** 	// timer init
  33:main.c        **** 	STME0_CNT  = 0;
  34:main.c        **** 	STME0_VAL  = 50000000; // threshold value for 1s ticks
 1278              	oc 4 49 0
 1279 06e0 E3A027BE 		bl	io_uart0_read_byte
 1280 06e4 E2822A2F 		.loc 4 50 0
 1281              		cmn	r0, #1
 1282 06e8 E3E01A0F 		beq	.L219
 1283              	.L220:
 1284 06ec E2822080 		.loc 4 51 0
 1285              		bl	io_uart0_send_byte
 1286 06f0 E3A03000 		.loc 4 49 0
 1287 06f4 E5013DFF 		bl	io_uart0_read_byte
 1288              		.loc 4 50 0
 1289 06f8 E5012DFB 		cmn	r0, #1
  35:main.c        **** 	STME0_CONF = (1<<2) | (1<<1) | (1<<0); // interrupt en, auto reset, timer enable
  36:main.c        **** 	VICVectAddr0 = (unsigned long)timer0_isr;
 1290              	b	.L219
 1291 06fc E59F205C 	.L222:
 1292 0700 E3E00000 		.align	2
 1293              	.L221:
 1294 0704 E2833007 		.word	timer0_isr
 1295 0708 E5013DF7 		.word	.LC1
 1296              		.word	.LC2
 1297 070c E5002FBF 		.word	.LC3
  37:main.c        **** 	VICVectCntl0 = (1<<5) | 0; // enable and channel select = 0 (timer0)
 1299 0710 E2833019 		.section	.debug_frame,"",%progbits
  38:main.c        **** 	VICIntEnable = (1<<0); // enable channel 0 (timer0)
 1300              	frame0:
 1301 0714 E3A02001 		.4byte	.LECIE0-.LSCIE0
 1302              	.LSCIE0:
 1303 0718 E5003F7F 		.4byte	0xffffffff
 1304              		.byte	0x1
 1305 071c E52DE004 		.ascii	"\000"
 1306              		.uleb128 0x1
 1307              		.sleb128 -4
 1308 0720 E5002FEF 		.byte	0xe
  39:main.c        **** 	io_enable_xint(); // enable IRQ
 1309              	c
 1310 0724 EBFFFFFE 		.uleb128 0xd
  40:main.c        **** 
  41:main.c        **** 	// Intro
  42:main.c        **** 	uart0_printf("\r\n\r\nSTORM SoC Basic Configuration\r\n");
 1311              	uleb128 0x0
 1312 0728 E59F0034 		.align	2
 1313 072c EBFFFFFE 	.LECIE0:
  43:main.c        **** 	uart0_printf("Demo program\r\n\r\n");
 1314              	FDE0:
 1315 0730 E59F0030 		.4byte	.LEFDE0-.LASFDE0
 1316 0734 EBFFFFFE 	.LASFDE0:
  44:main.c        **** 
  45:main.c        **** 	uart0_printf("Press any key!\r\n");
 1317              	byte	.Lframe0
 1318 0738 E59F002C 		.4byte	.LFB2
 1319 073c EBFFFFFE 		.4byte	.LFE2-.LFB2
 1320              		.align	2
  46:main.c        **** 
  47:main.c        **** 	// echo received char
  48:main.c        **** 	while(1){
  49:main.c        **** 		temp = io_uart0_read_byte();
 1321              	DE0:
 1322 0740 EBFFFFFE 	.LSFDE2:
  50:main.c        **** 		if (temp != -1)
 1323              	4byte	.LEFDE2-.LASFDE2
 1324 0744 E3700001 	.LASFDE2:
 1325 0748 0AFFFFFC 		.4byte	.Lframe0
 1326              		.4byte	.LFB3
  51:main.c        **** 			io_uart0_send_byte(temp);
 1327              	yte	.LFE3-.LFB3
 1328 074c EBFFFFFE 		.align	2
 1329              	.LEFDE2:
 1330 0750 EBFFFFFE 	.LSFDE4:
 1331              		.4byte	.LEFDE4-.LASFDE4
 1332 0754 E3700001 	.LASFDE4:
 1333 0758 1AFFFFFB 		.4byte	.Lframe0
 1334 075c EAFFFFF7 		.4byte	.LFB4
 1335              		.4byte	.LFE4-.LFB4
 1336              		.align	2
 1337              	.LEFDE4:
 1338 0760 00000000 	.LSFDE6:
 1339 0764 00000000 		.4byte	.LEFDE6-.LASFDE6
 1340 0768 00000024 	.LASFDE6:
 1341 076c 00000038 		.4byte	.Lframe0
 1342              		.4byte	.LFB5
 1343              		.4byte	.LFE5-.LFB5
 1686              		.byte	0x53
DEFINED SYMBOLS
                            *ABS*:00000000 main.c
C:\Users\jh\AppData\Local\Temp/ccwPcaaa.s:13     .text:00000000 io_read_gpio0_pin
C:\Users\jh\AppData\Local\Temp/ccwPcaaa.s:22     .text:00000000 $a
C:\Users\jh\AppData\Local\Temp/ccwPcaaa.s:39     .text:00000018 io_read_gpio0_port
C:\Users\jh\AppData\Local\Temp/ccwPcaaa.s:59     .text:00000024 io_set_gpio0_pin
C:\Users\jh\AppData\Local\Temp/ccwPcaaa.s:85     .text:00000040 io_clr_gpio0_pin
C:\Users\jh\AppData\Local\Temp/ccwPcaaa.s:111    .text:00000064 io_toggle_gpio0_pin
C:\Users\jh\AppData\Local\Temp/ccwPcaaa.s:137    .text:00000080 io_set_gpio0_port
C:\Users\jh\AppData\Local\Temp/ccwPcaaa.s:157    .text:0000008c io_set_pwm
C:\Users\jh\AppData\Local\Temp/ccwPcaaa.s:229    .text:00000108 io_get_pwm
C:\Users\jh\AppData\Local\Temp/ccwPcaaa.s:282    .text:00000158 io_uart0_read_byte
C:\Users\jh\AppData\Local\Temp/ccwPcaaa.s:306    .text:00000170 io_uart0_send_byte
C:\Users\jh\AppData\Local\Temp/ccwPcaaa.s:331    .text:0000018c io_spi0_config
C:\Users\jh\AppData\Local\Temp/ccwPcaaa.s:361    .text:000001b0 io_spi0_speed
C:\Users\jh\AppData\Local\Temp/ccwPcaaa.s:381    .text:000001bc io_spi0_trans
C:\Users\jh\AppData\Local\Temp/ccwPcaaa.s:418    .text:000001f4 io_spi0_enable
C:\Users\jh\AppData\Local\Temp/ccwPcaaa.s:444    .text:00000210 io_spi0_disable
C:\Users\jh\AppData\Local\Temp/ccwPcaaa.s:470    .text:00000234 io_i2c0_speed
C:\Users\jh\AppData\Local\Temp/ccwPcaaa.s:503    .text:00000260 io_i2c0_byte_transfer
C:\Users\jh\AppData\Local\Temp/ccwPcaaa.s:647    .text:00000390 get_syscpreg
C:\Users\jh\AppData\Local\Temp/ccwPcaaa.s:662    .text:000003a0 $d
C:\Users\jh\AppData\Local\Temp/ccwPcaaa.s:679    .text:000003e0 $a
C:\Users\jh\AppData\Local\Temp/ccwPcaaa.s:785    .text:00000468 set_syscpreg
C:\Users\jh\AppData\Local\Temp/ccwPcaaa.s:804    .text:0000047c $d
C:\Users\jh\AppData\Local\Temp/ccwPcaaa.s:814    .text:0000049c $a
C:\Users\jh\AppData\Local\Temp/ccwPcaaa.s:834    .text:000004bc io_enable_xint
C:\Users\jh\AppData\Local\Temp/ccwPcaaa.s:863    .text:000004cc io_disable_xint
C:\Users\jh\AppData\Local\Temp/ccwPcaaa.s:892    .text:000004dc long_to_hex_string
C:\Users\jh\AppData\Local\Temp/ccwPcaaa.s:962    .text:0000054c get_adc
C:\Users\jh\AppData\Local\Temp/ccwPcaaa.s:1003   .text:0000058c delay
C:\Users\jh\AppData\Local\Temp/ccwPcaaa.s:1035   .text:000005b4 string_cmpc
C:\Users\jh\AppData\Local\Temp/ccwPcaaa.s:1086   .text:000005fc uart0_printf
C:\Users\jh\AppData\Local\Temp/ccwPcaaa.s:1131   .text:00000634 uart0_scanf
C:\Users\jh\AppData\Local\Temp/ccwPcaaa.s:1198   .text:0000068c $d
C:\Users\jh\AppData\Local\Temp/ccwPcaaa.s:1204   .text:00000690 uart0_print_buffer
C:\Users\jh\AppData\Local\Temp/ccwPcaaa.s:1210   .text:00000690 $a
C:\Users\jh\AppData\Local\Temp/ccwPcaaa.s:1234   .text:000006b4 timer0_isr
C:\Users\jh\AppData\Local\Temp/ccwPcaaa.s:1273   .text:000006e0 main
C:\Users\jh\AppData\Local\Temp/ccwPcaaa.s:1338   .text:00000760 $d

NO UNDEFINED SYMBOLS
